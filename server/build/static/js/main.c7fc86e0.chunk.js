(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(53),s=r.n(a),i=(r(60),r(61),r(7)),o=r(4),l=r(6),u=r(3),d=r(54),b="{{ ip }}"===window.apiURL?"http://192.168.0.166:5005":window.apiURL,j="{{ b2ctk }}"===window.b2ctk?"ScrabbleDevToken":window.b2ctk,f="".concat(b,"/api/v1"),m=2e4,x={normal:"bg-white",tripleWord:"bg-red-700",startTile:"bg-gray-500",doubleLetter:"bg-blue-400",tripleLetter:"bg-blue-800",doubleWord:"bg-yellow-500"};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()};var h=Object(d.io)(b,{transports:["websocket","polling"]}),p=c.a.createContext(),O=c.a.createContext(),v=c.a.createContext(),g=c.a.createContext(),y=r(28),w=r.n(y),N=r(0),k=function(e){return window.crypto.getRandomValues(new Uint32Array(1))[0].toString().slice(0,e)},D=function(e){return e.match(/^[0-9a-zA-Z]+$/)},I=function(e){return Object(N.jsx)(w.a,{start:e,end:e,duration:1.5})},C=function(e,t,r,n){e.on(t,(function(e){e.name!==r&&n(e)}))},T=function(e){return JSON.parse(e.dataTransfer.getData("draggedPiece"))},S=function(){return Object(N.jsx)("div",{className:"block",children:Object(N.jsxs)("div",{className:"flex",children:[Object(N.jsxs)("div",{title:"A piece must be played on this tile at the beginning of the game",className:"flex-1",children:[Object(N.jsx)("span",{className:"".concat(x.startTile," pr-5 h-6 w-8 border-2 border-black")}),Object(N.jsx)("span",{className:"pl-2",children:"Start Point"})]}),Object(N.jsxs)("div",{title:"The total score of the letter on this tile is doubled",className:"flex-1",children:[Object(N.jsx)("span",{className:"".concat(x.doubleLetter," pr-5 h-6 w-8 border-2 border-black")}),Object(N.jsx)("span",{className:"pl-2",children:"Double Letter"})]}),Object(N.jsxs)("div",{title:"The total score of the letter on this tile is tripled",className:"flex-1",children:[Object(N.jsx)("span",{className:"".concat(x.tripleLetter," pr-5 h-6 w-8 border-2 border-black")}),Object(N.jsx)("span",{className:"pl-2",children:"Triple Letter"})]}),Object(N.jsxs)("div",{title:"The total score of the word played is doubled when a piece is on this tile",className:"flex-1",children:[Object(N.jsx)("span",{className:"".concat(x.doubleWord," pr-5 h-6 w-8 border-2 border-black")}),Object(N.jsx)("span",{className:"pl-2",children:"Double Word"})]}),Object(N.jsxs)("div",{title:"The total score of the word played is tripled when a piece is on this tile",className:"flex-1",children:[Object(N.jsx)("span",{className:"".concat(x.tripleWord," pr-5 h-6 w-8 border-2 border-black")}),Object(N.jsx)("span",{className:"pl-2",children:"Triple Word"})]})]})})},E=function(e){var t=e.id,r=e.tileID,c=e.char,a=e.weight,s=e.onBoard,i=e.isPlayed,o=e.isStatic,l=e.isTransformed,d=e.dragEndHandler,b=Object(n.useRef)(),j=Object(n.useContext)(v),f=j.validDrag,m=j.setValidDrag,x=Object(n.useState)({id:t,tileID:r,char:c,weight:a,onBoard:s,isTransformed:l,isStatic:o,isPlayed:i}),h=Object(u.a)(x,2),p=h[0],O=(h[1],function(e){e.stopImmediatePropagation(),d&&f.current&&!function(e){return"none"===e.dataTransfer.dropEffect}(e)&&d(p)}),g=function(e){e.stopPropagation(),e.stopImmediatePropagation(),m(!0),function(e,t){e.dataTransfer.setData("draggedPiece",JSON.stringify(t))}(e,p)},y=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),m(!1)},w=function(e){return e.preventDefault()},k=function(e){return e.preventDefault()},D=function(e){return e.preventDefault()};Object(n.useEffect)((function(){return b.current.addEventListener("drop",y)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragend",O)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragover",w)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragleave",D)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragstart",g)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragenter",k)}));var I=p.weight<10?"absolute relative right-0.5 bottom-0.5":"absolute relative right-1.5 bottom-0.5",C="".concat(o?"h-3/4":"h-full"," ").concat(l?"bg-yellow-300":""," ").concat(" "===p.char?"flex-col-reverse":""," cursor-pointer hover:text-gray-700 flex flex-col ").concat(s?"w-full":"w-14 border"," text-black bg-yellow-200 border-black");return Object(N.jsxs)("div",{ref:b,draggable:!i,className:C,children:[Object(N.jsx)("div",{className:"block self-center w-4/5 text-4xl font-bold",children:Object(N.jsx)("span",{style:{top:"0.4rem"},className:"absolute ".concat(l?"italic pr-2":""," relative"),children:p.char})}),Object(N.jsx)("div",{className:"block self-end w-1/5 text-xs",children:Object(N.jsx)("span",{className:I,children:p.weight})})]})},P=r(117),z=Object(n.forwardRef)((function(e,t){Object(n.useImperativeHandle)(t,(function(){return{addPiece:function(e){f(e)},removePiece:function(){f(null)},hasPiece:function(){return null!==j&&void 0!==j},getPiece:function(){return Object(o.a)(Object(o.a)({},j.props),{},{tileType:e.type})}}}));var r="",c=e.type,a=e.id,s=Object(n.useRef)(),l=Object(n.useContext)(O),d=Object(n.useState)(e.playedPiece),b=Object(u.a)(d,2),j=b[0],f=b[1],m=Object(n.useContext)(p),h=m.player,v=m.playedTiles,g=m.usedTiles,y=m.setPlayedTiles,w=function(e){g.current.includes(e.tileID)||r!==a&&f(null)},k=function(t){var n=T(t);if(!g.current.includes(n.tileID)){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var c=n.id,s=n.char,o=n.weight,u=n.isTransformed;if(r=n.tileID," "===s)e.setRequestChoosePiece({tileID:a,pieceID:c,status:!0});else{e.setRequestChoosePiece({tileID:"",pieceID:c,status:!1});var d=Object(N.jsx)(E,{id:c,char:s,onBoard:!0,weight:o,tileID:a,isTransformed:u,dragEndHandler:w});l.emit("inPlayEvent",{roomID:h.current.roomID,pieceData:{id:c,char:s,weight:o,tileID:a,prevTileID:r,isTransformed:u,onBoard:!0}}),y([].concat(Object(i.a)(v.current),[a])),f(d)}}},D=function(e){return e.preventDefault()},I=function(e){return e.preventDefault()},C=function(e){return e.preventDefault()};return Object(n.useEffect)((function(){return h.current.turn?s.current.addEventListener("drop",k):s.current.removeEventListener("drop",k),function(){return s.current.removeEventListener("drop",k)}}),[h.current.turn]),Object(n.useEffect)((function(){return h.current.turn?s.current.addEventListener("dragover",D):s.current.removeEventListener("dragover",D),function(){return s.current.removeEventListener("dragover",D)}}),[h.current.turn]),Object(n.useEffect)((function(){return h.current.turn?s.current.addEventListener("dragleave",C):s.current.removeEventListener("dragleave",C),function(){return s.current.removeEventListener("dragleave",C)}}),[h.current.turn]),Object(n.useEffect)((function(){return h.current.turn?s.current.addEventListener("dragenter",I):s.current.removeEventListener("dragenter",I),function(){return s.current.removeEventListener("dragenter",I)}}),[h.current.turn]),Object(N.jsxs)("div",{id:a,ref:s,className:"".concat(x[c]," flex flex-col justify-around items-center h-14 w-14 border border-black border-opacity-70"),children:["startTile"!==e.type||j?null:Object(N.jsx)("div",{className:"justify-center items-center",children:Object(N.jsx)(P.a,{fill:"white",strokeWidth:"0",size:24})}),j]})}));function L(e){var t=Object(n.useContext)(p).bag,r="chooseLetter"===e.mode?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(N.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:Object(N.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(N.jsxs)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:[Object(N.jsx)("h3",{className:"text-2xl font-semibold",children:"Wildcard Transformation"}),Object(N.jsx)("div",{className:"text-md pt-1 text-gray-500",children:"Choose a piece to replace the wildcard with"})]}),Object(N.jsx)("div",{className:"relative pt-7 p-10 flex justify-center flex-wrap",children:Object.values(t.current.pieces).filter((function(e){return" "!==e.piece})).map((function(t,r){return Object(N.jsx)("div",{onClick:function(){return e.modalHandler(t.piece)},className:"mx-4 my-4",children:Object(N.jsx)(E,{char:t.piece,weight:0})},r)}))})]})})}),Object(N.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(N.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:Object(N.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(N.jsx)("div",{className:"flex items-start justify-center pt-5 p-4 border-b border-solid border-blueGray-200 rounded-t",children:Object(N.jsx)("h3",{className:"text-2xl font-semibold",children:"Contents of the Scrabble Bag"})}),Object(N.jsx)("div",{className:"relative pt-7 p-10 flex justify-center flex-wrap",children:Object.values(t.current.pieces).map((function(e,t){return Object(N.jsxs)("div",{className:"mx-4 my-4",children:[Object(N.jsx)(E,{isStatic:!0,char:e.piece,weight:e.weight}),Object(N.jsxs)("div",{className:"self-center mt-1 text-xs text-gray-900",children:[e.number," left"]})]},t)}))})]})})}),Object(N.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]});return e.show?r:null}var R=r(5),W=r.n(R),G=r(8),A=r(16),F=r.n(A);F.a.defaults.baseURL=f,F.a.defaults.headers.post["Content-Type"]="application/json",F.a.defaults.headers.common.Authorization="Bearer ".concat(j),F.a.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)})),F.a.interceptors.response.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)}));var Y=function(e){return F.a[e.requestType](e.url,e.payload).then((function(e){return e.data})).catch((function(e){return console.log(e.data)}))};function B(e){var t=Object(n.useState)(e),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useRef)(c);return[c,Object(n.useCallback)((function(e){s.current="function"===typeof e?e(s.current):e,a(s.current)}),[]),s]}var H=15,q=function(e){var t=[],r=Object(n.useRef)([]),c=Object(n.useState)(),a=Object(u.a)(c,2),s=a[0],o=a[1],d=Object(n.useContext)(O),b=B({tileID:"",pieceID:"",status:!1}),j=Object(u.a)(b,3),f=(j[0],j[1]),x=j[2],h=Object(n.useContext)(p),v=h.player,g=h.playFlag,y=h.gameExited,w=h.setUsedTiles,k=h.setBoardState,D=h.usedTiles,I=h.setPlayFlag,T=h.playedTiles,P=h.setPlayedWords,R=h.setPlayedTiles,W=h.recallFlag,G=h.setRecallFlag;Object(n.useEffect)((function(){C(d,"inPlay",v.current.name,(function(e){var t=e.pieceData,r=Object(N.jsx)(E,{isPlayed:!1,id:t.id,char:t.char,weight:t.weight,tileID:t.tileID,onBoard:t.onBoard,isTransformed:t.isTransformed});t.toRackMove?t.tileID&&!D.current.includes(t.tileID)&&(q(t.tileID),R(T.current.filter((function(e){return e!==t.tileID})))):(t.prevTileID&&(q(t.prevTileID),R(T.current.filter((function(e){return e!==t.prevTileID})))),J(t.tileID,r),v.current.turn||R([].concat(Object(i.a)(T.current),[t.tileID])))}))}),[v.current]),Object(n.useEffect)((function(){C(d,"recallPieces",v.current.name,(function(e){return G(!0)}))}),[v.current]),Object(n.useEffect)((function(){if(W.current){var e,t=Object(l.a)(T.current);try{for(t.s();!(e=t.n()).done;){var r=e.value;q(r)}}catch(n){t.e(n)}finally{t.f()}G(!1),R([])}}),[W.current]),Object(n.useEffect)((function(){g.current&&(P(U()),I(!1))}),[g.current]),Object(n.useEffect)((function(){r.current=Array(t.length*H).fill().map((function(e,t){return r.current[t]}))}),[t.length]);for(var A=function(e){var n=[],c=e*H;if(0===e||14===e)for(var a=function(e){var t="normal";3!==e&&11!==e||(t="doubleLetter"),0!==e&&7!==e&&14!==e||(t="tripleWord");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},s=0;s<H;s++)a(s);if(1===e||13===e)for(var i=function(e){var t="normal";1!==e&&13!==e||(t="doubleWord"),5!==e&&9!==e||(t="tripleLetter");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},o=0;o<H;o++)i(o);if(2===e||12===e)for(var l=function(e){var t="normal";2!==e&&12!==e||(t="doubleWord"),6!==e&&8!==e||(t="doubleLetter");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},u=0;u<H;u++)l(u);if(3===e||11===e)for(var d=function(e){var t="normal";3!==e&&11!==e||(t="doubleWord"),0!==e&&7!==e&&14!==e||(t="doubleLetter");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},b=0;b<H;b++)d(b);if(4===e||10===e)for(var j=function(e){var t="normal";4!==e&&10!==e||(t="doubleWord");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},m=0;m<H;m++)j(m);if(5===e||9===e)for(var x=function(e){var t="normal";5!==e&&9!==e&&1!==e&&13!==e||(t="tripleLetter");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},h=0;h<H;h++)x(h);if(6===e||8===e)for(var p=function(e){var t="normal";2!==e&&6!==e&&8!==e&&12!==e||(t="doubleLetter");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},O=0;O<H;O++)p(O);if(7===e)for(var v=function(e){var t="normal";7===e&&(t="startTile"),0!==e&&14!==e||(t="tripleWord"),3!==e&&11!==e||(t="doubleLetter");var a=Object(N.jsx)(z,{type:t,id:c+e,setRequestChoosePiece:f,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},g=0;g<H;g++)v(g);t.push(Object(N.jsxs)("div",{className:"flex border-opacity-100",children:[" ",n," "]},e))},F=0;F<H;F++)A(F);var Y=function(e){return r.current[e]},q=function(e){return Y(e).removePiece()},J=function(e,t){return Y(e).addPiece(t)},M=function(e,t){return"top"===e?t>=0&&t<15:"bottom"===e?t>209&&t<225:"left"===e?t%15===0:t%15===14},U=function(){var e,t,r,n=[],c=Object(l.a)(T.current);try{for(c.s();!(r=c.n()).done;){var a=r.value,s=Y(a).getPiece(),o=V(a,"top"),u=V(a,"left"),d=V(a,"bottom"),b=V(a,"right");e=[].concat(Object(i.a)(o),[s],Object(i.a)(d)),t=[].concat(Object(i.a)(u),[s],Object(i.a)(b)),e.length>1&&n.push(e),t.length>1&&n.push(t)}}catch(j){c.e(j)}finally{c.f()}return n.filter((function(e,t,r){return r.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(e)}))===t}))},V=function(e,t){var r,n,c=[];if(n="right"===t||"left"===t?1:15,M(t,e))return c;for(;;){var a=Y(r="right"===t||"bottom"===t?e+n:e-n);if(!a.hasPiece())break;if("right"===t||"bottom"===t?c.push(a.getPiece()):c.unshift(a.getPiece()),n+="right"===t||"left"===t?1:15,M(t,r))break}return c},K=function(){var e,t=[],r=Object(l.a)(D.current);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(Y(n).getPiece())}}catch(c){r.e(c)}finally{r.f()}k(t)};return Object(n.useEffect)((function(){var e=setInterval((function(){K()}),m);return o(e),function(){return clearInterval(s)}}),[]),Object(n.useEffect)((function(){y.current&&K()}),[y.current]),Object(n.useEffect)((function(){if(D.current.length>0){var e,t=Object(l.a)(D.current);try{for(t.s();!(e=t.n()).done;){var r=e.value,n=Object(N.jsx)(E,{id:r.id,onBoard:!0,isPlayed:!0,char:r.char,weight:r.weight,tileID:r.tileID,isTransformed:r.isTransformed});J(r.tileID,n)}}catch(c){t.e(c)}finally{t.f()}w(D.current.map((function(e){return e.tileID})))}}),[]),Object(N.jsxs)("div",{className:"space-y-4 ",children:[Object(N.jsxs)("div",{style:{height:"fit-content"},className:"block border-8 border-black rounded-md",children:[" ",t," "]}),Object(N.jsx)(S,{}),Object(N.jsx)(L,{modalHandler:function(e){var t=Object(N.jsx)(E,{weight:0,char:e,onBoard:!0,isTransformed:!0,id:x.current.pieceID,tileID:x.current.tileID});J(x.current.tileID,t),R([].concat(Object(i.a)(T.current),[x.current.tileID])),d.emit("inPlayEvent",{roomID:v.current.roomID,pieceData:{weight:0,char:e,onBoard:!0,isTransformed:!0,id:x.current.pieceID,tileID:x.current.tileID}}),f({tileID:"",pieceID:"",status:!1})},mode:"chooseLetter",show:x.current.status})]})},J=r(118),M=r(119),U=r(120),V=function(e){var t,r,c=Object(n.useState)(1),a=Object(u.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)("on"),l=Object(u.a)(o,2),d=l[0],b=l[1],j=Object(n.useState)(!1),f=Object(u.a)(j,2),x=f[0],h=f[1],O=Object(n.useState)(),v=Object(u.a)(O,2),g=v[0],y=v[1],w=Object(n.useContext)(p),k=w.player,D=w.boardState,I=w.rackState;Object(n.useEffect)((function(){var e=setInterval((function(){C(),T()}),m);return y(e),function(){return clearInterval(g)}}),[]);var C=function(){var e=Object(G.a)(W.a.mark((function e(){var t,r,n,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,Y({requestType:"get",url:"/ping",payload:{}});case 3:(r=e.sent)&&"pingSuccess"===r.status?(n=new Date,c=n.getTime()-t.getTime(),i(c),b(c<120?"on":c<500?"warning":"off")):b("off");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(G.a)(W.a.mark((function e(){var t,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t={player:k.current,rack:I.current,board:D.current,roomID:k.current.roomID},e.next=4,Y({requestType:"post",url:"/cache",payload:t});case 4:(r=e.sent)&&r.status,setTimeout((function(){h(!1)}),2e3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"on"===d?(r="Connection is good",t=Object(N.jsx)(J.a,{size:26,color:"#1fe03d"})):"off"===d?(r="Server disconnected. Trying to reconnect",t=Object(N.jsx)(M.a,{size:26,color:"#f32b0c"})):(t=Object(N.jsx)(J.a,{size:26,color:"#ffd100"}),r="Connection is poor. Delays may occur"),Object(N.jsxs)("div",{className:"flex justify-between items-center",children:[Object(N.jsx)("div",{className:"flex space-x-1 flex-none text-gray-400",children:x?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"cursor-help flex-none",children:Object(N.jsx)(U.a,{size:23})}),Object(N.jsx)("div",{children:"Saving..."})]}):null}),Object(N.jsxs)("div",{className:"flex space-x-1",children:[Object(N.jsx)("div",{title:r,className:"cursor-help flex-none",children:t}),Object(N.jsxs)("div",{title:"Server ping",className:"cursor-help flex-none text-gray-500",children:[s,"ms"]})]})]})},K=r(121),_=r(122),Z=function(){var e=B([]),t=Object(u.a)(e,3),r=(t[0],t[1]),c=t[2],a=Object(n.useContext)(p),s=a.player,i=a.players;return Object(n.useEffect)((function(){var e,t=[],n=Object(l.a)(i.current.entries());try{for(n.s();!(e=n.n()).done;){var c=Object(u.a)(e.value,2),a=c[0],o=c[1],d=Object(N.jsxs)("tr",{children:[Object(N.jsxs)("td",{className:"text-left capitalize border ".concat(o.turn?"font-bold":""," border-gray-300 px-4 py-2 text-black-600 font-medium"),children:[o.name,Object(N.jsx)("span",{className:"inline pl-1",children:s.current.name===o.name?Object(N.jsxs)("span",{title:"This is You".concat(o.turn?". It's also your turn to play":""),children:[Object(N.jsx)(K.a,{title:"You",size:22,className:"inline pb-1",fill:"black",strokeWidth:1})," "]}):null}),Object(N.jsx)("span",{className:"inline",children:o.isSpeaking?Object(N.jsxs)("span",{title:"This person is currently recording",children:[" ",Object(N.jsx)(_.a,{size:22,className:"inline pb-1"})]}):null})]}),Object(N.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-black-600 font-medium",children:I(o.score)})]},a);t.push(d)}}catch(b){n.e(b)}finally{n.f()}r(t)}),[s.current,i.current]),Object(N.jsx)("div",{className:"flex justify-end",children:Object(N.jsxs)("table",{className:"table-auto w-80",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{className:"bg-gray-100",children:[Object(N.jsx)("th",{className:"text-left border border-gray-300 px-4 py-2 text-black-600",children:"Player"}),Object(N.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-black-600",children:"Score"})]})}),Object(N.jsx)("tbody",{children:c.current})]})})},$=r(123),Q=r(124),X=function(e){var t=Object(n.useContext)(g).notifications,r=B([]),c=Object(u.a)(r,3),a=(c[0],c[1]),s=c[2];return Object(n.useEffect)((function(){var e,r=Object(l.a)(t.current.entries());try{for(r.s();!(e=r.n()).done;){var n=Object(u.a)(e.value,2),c=n[0],s=n[1],i=void 0,o=void 0;"info"===s.type?(o=Object(N.jsx)($.a,{size:22}),i="bg-blue-100 flex items-center border border-blue-300 text-blue-900 px-4 py-4 rounded relative"):"success"===s.type?(o=Object(N.jsx)(Q.a,{size:22}),i="bg-green-100 flex items-center border border-green-300 text-green-800 px-4 py-4 rounded relative"):"error"===s.type?(o=Object(N.jsx)($.a,{size:22}),i="bg-red-100 flex items-center border border-red-300 text-red-800 px-4 py-4 rounded relative"):"warning"===s.type?(o=Object(N.jsx)($.a,{size:22}),i="bg-yellow-100 flex items-center border border-yellow-300 text-yellow-800 px-4 py-4 rounded relative"):(o=Object(N.jsx)(Q.a,{size:22}),i="bg-center-100 flex items-center text-white center-500 text-center-800 px-4 py-4 rounded relative");var d=Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:i,children:[Object(N.jsx)("span",{className:"inline pr-4",children:o}),Object(N.jsx)("span",{className:"inline text-left",children:s.message})]}),Object(N.jsx)("div",{className:"pb-2"})]},c);a([d])}}catch(b){r.e(b)}finally{r.f()}}),[t.current]),s.current},ee=r(136),te=r(125),re=r(126);function ne(e){var t=Object(n.useRef)([]),r=B(!1),c=Object(u.a)(r,3),a=(c[0],c[1]),s=c[2];Object(n.useEffect)((function(){t.current=Array(e.pieces.length).fill().map((function(e,r){return t.current[r]}))}),[e.pieces.length]);var i=function(e){t.current.filter((function(e){return!0===e.checked})).length>0?a(!0):a(!1)};return e.show?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(N.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:Object(N.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(N.jsxs)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:[Object(N.jsx)("h3",{className:"text-2xl font-semibold",children:"Exchange Pieces for a Turn"}),Object(N.jsx)("div",{className:"text-md pt-1 text-gray-500",children:"Use the checkboxes to select the pieces to swap"})]}),Object(N.jsxs)("div",{className:"relative flex flex-col p-10 pb-9 pt-8 flex justify-center flex-wrap",children:[Object(N.jsx)("div",{className:"flex justify-center block",children:e.pieces.map((function(e,r){return Object(N.jsxs)("div",{className:"mx-4 my-4 mt-2",children:[Object(N.jsx)(E,{isStatic:!0,char:e.piece,weight:e.weight}),Object(N.jsx)("div",{className:"self-center mt-1 text-xs text-gray-900",children:Object(N.jsx)("label",{className:"inline-flex items-center",children:Object(N.jsx)("input",{onChange:i,id:e.id,ref:function(e){return t.current[r]=e},type:"checkbox"})})})]},r)}))}),Object(N.jsxs)("div",{className:"my-4 mb-2 space-x-6 block",children:[Object(N.jsxs)("button",{onClick:function(){a(!1),e.swapCancelHandler()},className:"w-32 bg-red-600 hover:bg-red-700 text-white inline font-bold py-2 px-4 border border-red-700 rounded",children:[Object(N.jsx)(te.a,{className:"inline",strokeWidth:3,size:22}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Cancel"})]}),s.current?Object(N.jsxs)("button",{onClick:function(){e.swapConfirmHandler(function(){var e,r=[],n=Object(l.a)(t.current);try{for(n.s();!(e=n.n()).done;){var c=e.value;!0===c.checked&&r.push(c.id)}}catch(a){n.e(a)}finally{n.f()}return r}())},className:"w-36 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 border border-green-700 rounded",children:[Object(N.jsx)(re.a,{className:"inline",strokeWidth:3,size:22}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Confirm"})]}):null]})]})]})})}),Object(N.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]}):null}var ce=r(127),ae=r(128),se=r(129),ie=r(130),oe=r(131),le=r(132),ue={play:"Play as turn",shuffle:"Shuffle pieces on Rack",recall:"Recall played pieces",swap:"Swap pieces in place of turn",skip:"Skip turn",draw:"Start the game"},de=function(e){var t,r,n=e.type,c=e.size,a=e.handler;r="play"===n?"flex justify-center items-center hover:border-l-2 hover:border-green-600 bg-green-500 hover:bg-green-700 text-white font-bold w-12 h-12 border-green-600 hover:border-green-500":"draw"===n?"flex justify-center items-center hover:border-l-2 hover:border-yellow-300 bg-yellow-200 hover:bg-yellow-300 text-black font-normal px-10 w-12 h-12 border-2 border-yellow-300 hover:border-yellow-300":"flex justify-center items-center bg-blue-600 border-r-2 border-blue-700  hover:bg-blue-700 text-white font-bold w-12 h-12 border-blue-600 hover:border-blue-700","recall"===n?t=Object(N.jsx)(ce.a,{strokeWidth:"2.5",size:c}):"play"===n?t=Object(N.jsx)(ae.a,{fill:"white",strokeWidth:"2.5",size:c}):"shuffle"===n?t=Object(N.jsx)(se.a,{strokeWidth:"2.5",size:c}):"swap"===n?t=Object(N.jsx)(ie.a,{strokeWidth:"2.5",size:c}):"skip"===n?t=Object(N.jsx)(oe.a,{strokeWidth:"2.5",size:c}):"draw"===n&&(t="Draw");"".concat(r),le.a;return Object(N.jsx)("button",{title:ue[n],className:"".concat(r),onClick:a,children:t})},be=r(55),je=r(133),fe=r(134),me=function(){var e=Object(be.useReactMediaRecorder)({audio:{type:"audio/ogg"},askPermissionOnMount:!0}),t=e.mediaBlobUrl,r=e.clearBlobUrl,c=e.stopRecording,a=e.startRecording,s=Object(n.useContext)(O),i=B(!0),d=Object(u.a)(i,3),b=(d[0],d[1]),j=d[2],f=B(null),m=Object(u.a)(f,3),x=(m[0],m[1]),h=m[2],v=B(""),g=Object(u.a)(v,3),y=(g[0],g[1]),w=g[2],k=Object(n.useContext)(p),D=k.player,I=k.setPlayer,C=k.players,T=k.setPlayers;return Object(n.useEffect)((function(){j.current?(c(),I(Object(o.a)(Object(o.a)({},D.current),{},{isSpeaking:!1}))):(r(),a(),c(),I(Object(o.a)(Object(o.a)({},D.current),{},{isSpeaking:!0}))),s.emit("radioEvent",{audioBlob:t,roomID:D.current.roomID,speakerName:D.current.name,isSpeaking:D.current.isSpeaking})}),[t,j.current]),Object(n.useEffect)((function(){s.on("audioTransmission",(function(e){var t,r=[],n=Object(l.a)(C.current);try{for(n.s();!(t=n.n()).done;){var c=t.value;e.speakerName===c.name&&(e.isSpeaking?c.isSpeaking=!0:c.isSpeaking=!1),r.push(c)}}catch(a){n.e(a)}finally{n.f()}x(null),T(r),x(e.audioBlob),y(e.speakerName)}))}),[]),Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{title:j.current?"Audio off. Click to record":"Audio is recording. Click to stop",onClick:function(){!1===j.current?b(!0):b(!1)},className:"flex justify-center items-center hover:border bg-yellow-200 hover:bg-yellow-300 text-white font-bold w-12 h-12 border border-yellow-400 hover:border-yellow-200",children:j.current?Object(N.jsx)(je.a,{color:"black",strokeWidth:"2.5",size:20}):Object(N.jsx)(fe.a,{color:"black",strokeWidth:"2.5",size:20})}),!D.current.isSpeaking&&h.current&&w.current!==D.current.name?Object(N.jsx)("audio",{className:"hidden",src:h.current,autoPlay:!0}):null]})},xe=function(e){var t=Object(n.useContext)(p),r=t.player,c=t.gameStarted,a=t.allowAudio,s=B([]),i=Object(u.a)(s,3),o=(i[0],i[1]),d=i[2];return Object(n.useEffect)((function(){var t,n=[],a=Object(l.a)(["recall","shuffle","swap","skip","play"].entries());try{for(a.s();!(t=a.n()).done;){var s=Object(u.a)(t.value,2),i=s[0],d=s[1];n.push(Object(N.jsx)(de,{handler:e[d],type:d,size:20},i))}}catch(b){a.e(b)}finally{a.f()}r.current.isHost&&!c.current&&n.push(Object(N.jsx)(de,{handler:e.draw,type:"draw",size:20},6)),o(n)}),[c.current,r.current]),Object(N.jsxs)("div",{className:"flex items-center justify-center space-x-0 bg-blue-600",children:[a.current?Object(N.jsx)(me,{}):null,d.current]})},he=r(135),pe=function(e){var t,r=e.bag,n=B(!1),c=Object(u.a)(n,3),a=(c[0],c[1]),s=c[2];return Object(N.jsxs)("div",{title:"".concat(r.length," pieces remaining"),onClick:function(){return a(!s.current)},className:"flex items-end space-x-0",children:[Object(N.jsx)("div",{className:"flex-none",children:Object(N.jsx)(he.a,{className:"cursor-pointer",fill:"gray",size:36})}),Object(N.jsx)("div",{className:"flex-none cursor-pointer text-gray-500 text-sm",children:(t=r.length,Object(N.jsx)(w.a,{start:t+7,end:t,duration:1.5}))}),Object(N.jsx)(L,{show:s.current})]})},Oe=function(e){var t=Object(n.useRef)(),r=Object(n.useState)(),c=Object(u.a)(r,2),a=c[0],s=c[1],d=B(0),b=Object(u.a)(d,3),j=(b[0],b[1]),f=b[2],x=B([]),h=Object(u.a)(x,3),y=(h[0],h[1]),w=h[2],k=B(!1),D=Object(u.a)(k,3),I=(D[0],D[1]),C=D[2],S=B(""),P=Object(u.a)(S,3),z=(P[0],P[1]),L=P[2],R=B([]),A=Object(u.a)(R,3),F=(A[0],A[1]),H=A[2],q=Object(n.useContext)(O),J=Object(n.useContext)(v).setValidDrag,M=Object(n.useContext)(g),U=M.notifications,V=M.setNotifications,K=Object(n.useContext)(p),_=K.player,Z=K.gameResumed,$=K.gameExited,Q=K.rackState,X=K.setRackState,te=K.setPlayer,re=K.bag,ce=K.setPlayedWords,ae=K.setPlayFlag,se=K.gameStarted,ie=K.timeToPlay,oe=K.playedTiles,le=K.playedWords,ue=K.usedTiles,de=K.gameEnded,be=K.setRecallFlag,je=B(ie.current),fe=Object(u.a)(je,3),me=(fe[0],fe[1]),he=fe[2];Object(n.useEffect)((function(){function e(){return(e=Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==w.current.length){e.next=6;break}return e.t0=y,e.next=4,ye(7);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0!==Q.current.length?(y(Q.current),setTimeout((function(){q.emit("resumeEvent",{roomID:_.current.roomID}),X([])}),1e3)):function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)(Object(G.a)(W.a.mark((function e(){var t,r,n,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!de.current){e.next=8;break}t=_.current.score,r=Object(l.a)(w.current);try{for(r.s();!(n=r.n()).done;)c=n.value,t-=c.weight}catch(a){r.e(a)}finally{r.f()}return e.next=6,Y({requestType:"post",url:"/scores",payload:{score:t,name:_.current.name,roomID:_.current.roomID}});case 6:"success"===e.sent.status&&te(Object(o.a)(Object(o.a)({},_.current),{},{turn:!1}));case 8:case"end":return e.stop()}}),e)}))),[de.current]),Object(n.useEffect)(Object(G.a)(W.a.mark((function e(){var t,r,n,c,a,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(le.current.length>0)){e.next=25;break}if(!(f.current>=3)){e.next=5;break}return Pe(),j(0),e.abrupt("return");case 5:return t=le.current.map((function(e){return e.map((function(e){return e.char})).join("")})),e.next=8,ge(t);case 8:if("error"!==(r=e.sent).status){e.next=14;break}j(f.current+1),V([{type:"error",message:r.message}]),e.next=25;break;case 14:return n=0===re.current.length,c=0===w.current.length,a=Oe(t,H.current),s=ve(le.current,7===H.current.length),e.next=20,we(H.current.length);case 20:F([]),q.emit("playEvent",{score:s,word:a,bagIsEmpty:n,rackIsEmpty:c,name:_.current.name,roomID:_.current.roomID}),clearInterval(L.current),ce([]),j(0);case 25:case"end":return e.stop()}}),e)}))),[le.current]),Object(n.useEffect)((function(){if(me(ie.current),ie.current&&_.current.turn){var e=setInterval((function(){0===he.current?Pe():me(he.current-1)}),1e3);return z(e),function(){return clearInterval(L.current)}}}),[_.current.turn]);var Oe=function(e,t){var r,n,c=0,a=Object(l.a)(e);try{for(a.s();!(n=a.n()).done;){var s,i=n.value,o=0,u=Object(l.a)(t);try{for(u.s();!(s=u.n()).done;){var d=s.value;i.includes(d.piece)&&(o+=1)}}catch(b){u.e(b)}finally{u.f()}o>c&&(r=i,c=o)}}catch(b){a.e(b)}finally{a.f()}return r},ve=function(e,t){var r,n=0,c=Object(l.a)(e);try{for(c.s();!(r=c.n()).done;){var a,s=r.value,i=0,o=1,u=Object(l.a)(s);try{for(u.s();!(a=u.n()).done;){var d=a.value,b=0,j=d.tileID,f=d.tileType;ue.current.includes(j)?b=d.weight:"doubleLetter"===f?b=2*d.weight:"doubleWord"===f||"startTile"===f?(o*=2,b=d.weight):"tripleWord"===f?(o*=3,b=d.weight):b="tripleLetter"===f?3*d.weight:d.weight,i+=b}}catch(m){u.e(m)}finally{u.f()}n+=i*=o}}catch(m){c.e(m)}finally{c.f()}return n=t?n+50:n},ge=function(){var e=Object(G.a)(W.a.mark((function e(t){var r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y({url:"/validate",requestType:"post",payload:{words:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(G.a)(W.a.mark((function e(t){var r,n,c,a,s,i,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y({payload:{},requestType:"get",url:"/bag/".concat(t,"?roomID=").concat(_.current.roomID)});case 2:for(r=e.sent,n=r.pieces,c=0,a=Object.entries(n);c<a.length;c++)s=Object(u.a)(a[c],2),i=s[0],(o=s[1]).id="".concat(i,"_").concat(o.id);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(G.a)(W.a.mark((function e(t){var r,n,c,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:r=e.sent,n=Object(l.a)(r);try{for(n.s();!(c=n.n()).done;)a=c.value,ze(a)}catch(s){n.e(s)}finally{n.f()}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(e){var t=Re(e,w.current);ke(t),We(t)},ke=function(e){var t=w.current.filter((function(t){return t.id!==e.id}));y(Object(i.a)(t))},De=function(e){return e+=1,Math.ceil(e/15)},Ie=function(){var e=Object(G.a)(W.a.mark((function e(t){var r,n,c,a,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=9;break}r=[],n=Object(l.a)(t);try{for(n.s();!(c=n.n()).done;)a=c.value,s=Le(a,w.current),ke(s),r.push(s)}catch(i){n.e(i)}finally{n.f()}return clearInterval(L.current),I(!1),e.next=8,we(t.length);case 8:q.emit("playEvent",{piecesSwapped:r,isTurnSwapped:!0,name:_.current.name,roomID:_.current.roomID});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e,t,r){var n,c=!0,a=0,s=function(e,t,r){for(var n=[],c=[],a="horizontal"===t?De(e):function(e){return(e+=1)%15}(e),s="horizontal"===t?1:15,i="horizontal"===t?15*(a-1):a-1,o=0;o<15;o++)r.includes(i)&&n.push(i),c.push(i),i+=s;var l=c.indexOf(n[0]),u=c.indexOf(n[n.length-1]);return c.slice(l,u+1)}(e[e.length-1],r,e),i=Object(l.a)(s);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!ue.current.includes(o)&&!e.includes(o))return c=!1}}catch(p){i.e(p)}finally{i.f()}var u,d=Object(l.a)(e);try{for(d.s();!(u=d.n()).done;){var b,j,f,m,x=u.value,h=[];f=x-1,j=x+15,m=x+1,(b=x-15)>=0&&h.push(b),f>=0&&h.push(f),j<=224&&h.push(j),m<=224&&h.push(m),h.forEach((function(e){!t&&ue.current.includes(e)&&(a+=1)}))}}catch(p){d.e(p)}finally{d.f()}return!t&&a<1&&(c=!1),c},Te=function(e,t){var r=function(e){var t,r=(e=e.sort((function(e,t){return e-t})))[0],n=De(r),c=e.length;if(e.every((function(e){return De(e)===n})))t="horizontal";else for(var a=0;a<c;a++)if(a+1<c){var s=e[a];if((e[a+1]-s)%15!==0){t="both";break}t="vertical"}return t}(e),n=Ce(e,t,r);"both"!==r&&n?ae(!0):V([{type:"error",message:"Sorry, that's an invalid move"}])},Se=function(){de.current?V([{type:"info",message:"The game has ended. No more actions are possible."}]):_.current.turn&&(se.current||Z.current)?(y([].concat(Object(i.a)(w.current),Object(i.a)(H.current))),F([]),be(!0),q.emit("recallEvent",{roomID:_.current.roomID,name:_.current.name})):V([].concat(Object(i.a)(U.current),[{message:"You can not recall pieces until it's your turn to play. Kindly wait your turn",overwrite:!1,type:"warning",timeout:5}]))},Ee=function(){return 0===ue.current.length},Pe=function(){Se(),q.emit("playEvent",{isTurnSkipped:!0,name:_.current.name,roomID:_.current.roomID}),clearInterval(L.current)},ze=function(e){return y([].concat(Object(i.a)(w.current),[e]))},Le=function(e,t){return t.find((function(t){return t.id===e}))},Re=function(e,t){return t.find((function(t){return t.id===e.id}))},We=function(e){return F([].concat(Object(i.a)(H.current),[e]))},Ge=function(e){if(_.current.turn){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=T(e);if(!ue.current.includes(t.tileID)){var r=Re(t,H.current);q.emit("inPlayEvent",{roomID:_.current.roomID,pieceData:Object(o.a)(Object(o.a)({},t),{},{toRackMove:!0})}),t.onBoard?(!function(e){var t=Object(i.a)(H.current).filter((function(t){return t.id!==e.id}));F(Object(i.a)(t))}(r),ze(r)):J(!1)}}},Ae=function(){(w.current.length>0||H.current.length>0)&&X([].concat(Object(i.a)(w.current),Object(i.a)(H.current)))};Object(n.useEffect)((function(){var e=setInterval((function(){Ae()}),m);return s(e),function(){return clearInterval(a)}}),[]),Object(n.useEffect)((function(){$.current&&Ae()}),[$.current]);var Fe=function(e){return e.preventDefault()},Ye=function(e){return e.preventDefault()},Be=function(e){return e.preventDefault()};Object(n.useEffect)((function(){return t.current.addEventListener("drop",Ge)})),Object(n.useEffect)((function(){return t.current.addEventListener("dragover",Fe)})),Object(n.useEffect)((function(){return t.current.addEventListener("dragleave",Be)})),Object(n.useEffect)((function(){return t.current.addEventListener("dragenter",Ye)}));var He,qe=se.current||Z.current?"flex justify-between items-end":"flex justify-end items-end";return Object(N.jsxs)("div",{className:"block",children:[Object(N.jsx)("div",{ref:t,className:"flex justify-end",children:Object(N.jsx)("div",{style:{width:"25rem"},className:"h-16 flex border-4 bg-gray-300 border-gray-500 rounded-md",children:w.current?w.current.map((function(e,t){if(e)return Object(N.jsx)(E,{id:e.id,onBoard:!1,char:e.piece,weight:e.weight,dragEndHandler:Ne},"".concat(e.id,"_").concat(t))})):null})}),Object(N.jsx)("div",{className:"py-2"}),Object(N.jsxs)("div",{className:qe,children:[se.current||Z.current?Object(N.jsx)(pe,{bag:re.current}):null,Object(N.jsx)(xe,{gameStarted:se,shuffle:function(){return y(Object(i.a)(function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}(w.current)))},recall:Se,skip:function(){de.current?V([{type:"info",message:"The game has ended. No more actions are possible."}]):_.current.turn&&(se.current||Z.current)?window.confirm("Are you sure you want to skip your turn?")&&Pe():V([].concat(Object(i.a)(U.current),[{message:"You can not skip turn until it is your turn to play. Kindly wait your turn",overwrite:!1,type:"warning",timeout:5}]))},play:function(){if(de.current)V([{type:"info",message:"The game has ended. No more actions are possible."}]);else if(_.current.turn&&(se.current||Z.current))if(0===H.current.length)V([{type:"warning",message:"You haven't played anything. You can alternatively skip your turn"}]);else{var e=Ee();if(e&&!oe.current.includes(112))return void V([{type:"error",message:"Invalid start move. You must play on the starred tile"}]);Te(oe.current,e)}},draw:function(){return q.emit("drawEvent",{roomID:_.current.roomID})},swap:function(){de.current?V([{type:"info",message:"The game has ended. No more actions are possible."}]):_.current.turn&&(se.current||Z.current)?re.current.length<=7?V([{message:"Swapping pieces is no longer possible, as the bag has ".concat(re.current.length," pieces left. "),type:"info"}]):(Se(),I(!0)):V([{message:"You can not swap pieces until it is your turn to play. Kindly wait your turn",overwrite:!1,type:"warning",timeout:5}])}})]}),Object(N.jsx)("div",{className:"py-2"}),_.current.turn&&ie.current?Object(N.jsxs)("div",{title:"Time left to play",className:"".concat(he.current<10?"blink":""," cursor-help flex text-gray-400 justify-end items-center"),children:[Object(N.jsx)(ee.a,{size:19,className:"inline"}),Object(N.jsx)("span",{className:"pl-1",children:(He=he.current,new Date(1e3*He).toISOString().substr(14,5))})]}):null,Object(N.jsx)(ne,{show:C.current,pieces:w.current,swapCancelHandler:function(){return I(!1)},swapConfirmHandler:Ie})]})},ve=r(137),ge=r(138),ye=r(139);function we(e){var t=e.logs,r=e.close,n=e.show,c=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{onClick:function(){return r()},className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(N.jsx)("div",{className:"relative w-screen my-6 mx-auto max-w-3xl",children:Object(N.jsxs)("div",{className:"h-96 border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(N.jsxs)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:[Object(N.jsx)("h3",{className:"text-2xl font-semibold",children:"Logs"}),Object(N.jsx)("div",{className:"text-md pt-1 text-gray-500",children:"History of in-game plays"})]}),Object(N.jsx)("div",{className:"overflow-auto py-0 justify-center",children:t.length>0?Object(N.jsxs)("table",{className:"table-auto w-full mb-5",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{className:"bg-gray-100",children:[Object(N.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-black-600",children:"Time"}),Object(N.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-black-600",children:"Event"})]})}),Object(N.jsx)("tbody",{children:t.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{className:"w-1/5 text-gray-500 capitalize border border-gray-300 px-4 py-2 text-black-600 font-medium",children:e.time}),Object(N.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-black-600 font-medium",children:e.event})]},t)}))})]}):Object(N.jsx)("div",{className:"flex pt-28 text-gray-500 justify-center",children:"Nothing to show :)"})})]})})}),Object(N.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]});return n.current?c:null}var Ne=function(e){var t=Object(n.useContext)(O),r=B(!1),c=Object(u.a)(r,3),a=(c[0],c[1]),s=c[2],o=B([]),l=Object(u.a)(o,3),d=(l[0],l[1]),b=l[2],j=Object(n.useContext)(p),f=j.player,m=j.rackState,x=j.boardState,h=j.setGameExited,v=function(){var e=Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),!window.confirm("Are you sure you want to leave the game?")){e.next=9;break}return e.next=5,g();case 5:alert("Note that you can still resume this game session using your name and the session ID."),setTimeout((function(){t.emit("leave",{roomID:f.current.roomID,name:f.current.name}),window.location.reload()}),700),e.next=10;break;case 9:h(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(G.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={player:f.current,rack:m.current,board:x.current,roomID:f.current.roomID},e.next=3,Y({requestType:"post",url:"/cache",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t.on("leftRoom",function(){var e=Object(G.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===f.current.name){e.next=5;break}return e.next=3,g();case 3:alert("".concat(t.name," has left the game session. Note that you can still resume this game session using your name and the session ID.")),setTimeout((function(){window.location.reload()}),1700);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)(Object(G.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.current){e.next=5;break}return e.next=3,Y({requestType:"get",url:"/logs/".concat(f.current.roomID)});case 3:"success"===(t=e.sent).status&&d(Object(i.a)(t.logs));case 5:case"end":return e.stop()}}),e)}))),[s.current]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"flex justify-between items-center",children:[Object(N.jsxs)("div",{onClick:function(){return a(!0)},className:"cursor-pointer flex justify-end items-end space-x-1 text-gray-500",children:[Object(N.jsx)("div",{className:"flex-none",children:Object(N.jsx)(ve.a,{size:22})}),Object(N.jsx)("div",{className:"flex-none text-sm",children:"Game Logs"})]}),Object(N.jsx)("div",{className:"flex justify-end items-end space-x-1",children:Object(N.jsxs)("div",{className:"font-bold pt-2 text-sm text-gray-500",children:[Object(N.jsx)(ge.a,{size:22,className:"inline pb-1 pr-1"}),f.current.roomID]})}),Object(N.jsx)("div",{onClick:v,className:"flex cursor-pointer justify-end items-end space-x-1",children:Object(N.jsxs)("div",{className:"font-bold pt-2 text-sm text-red-500",children:[Object(N.jsx)(ye.a,{size:22,className:"inline pb-1 pr-1"}),"Leave"]})})]}),Object(N.jsx)(we,{logs:b.current,close:function(){return a(!1)},show:s})]})},ke=function(e){return Object(N.jsxs)("div",{className:"flex flex-col pt-4 pb-10 justify-around w-450",children:[Object(N.jsx)("div",{className:"block",children:Object(N.jsx)(X,{})}),Object(N.jsx)("div",{className:"block py-8",children:Object(N.jsx)(V,{status:"off"})}),Object(N.jsx)("div",{className:"block py-8",children:Object(N.jsx)(Z,{})}),Object(N.jsx)("div",{className:"block py-8",children:Object(N.jsx)("div",{className:"flex justify-end",children:Object(N.jsx)(Oe,{})})}),Object(N.jsx)("div",{className:"block",children:Object(N.jsx)("div",{className:"pt-1",children:Object(N.jsx)(Ne,{})})})]})},De=r(140),Ie=r(141),Ce=r(142),Te=function(e){return Object(N.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[Object(N.jsxs)("div",{className:"block flex justify-center text-gray-800 text-bold text-3xl space-x-2",children:[Object(N.jsx)("div",{className:"text-4xl",children:"Scrabble"}),Object(N.jsx)("div",{className:"bg-yellow-200 px-2 font-normal rounded-md text-black self-center text-sm border",children:"v2.4"})]}),Object(N.jsxs)("div",{className:"flex my-6 mb-2 space-x-6 block justify-center",children:[Object(N.jsxs)("button",{title:"Create a new game session",onClick:function(){return e.setGameChoice("new")},className:"h-12 w-36 bg-green-600 hover:bg-green-700 text-white font-bold px-4 border border-green-700 rounded inline-flex justify-center items-center",children:[Object(N.jsx)(De.a,{strokeWidth:3,size:26}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Host"})]}),Object(N.jsxs)("button",{onClick:function(){return e.setGameChoice("join")},className:"h-12 w-36 bg-blue-600 hover:bg-blue-700 text-white font-bold px-4 border border-blue-700 rounded inline-flex justify-center items-center",children:[Object(N.jsx)(Ie.a,{strokeWidth:3,size:26}),Object(N.jsx)("span",{title:"Join a game session",className:"pl-1 pr-2 text-md",children:"Join"})]}),Object(N.jsxs)("button",{onClick:function(){return e.setGameChoice("resume")},className:"h-12 w-36 bg-red-600 hover:bg-red-700 text-white font-bold px-4 border border-red-700 rounded inline-flex justify-center items-center",children:[Object(N.jsx)(Ce.a,{strokeWidth:3,size:22}),Object(N.jsx)("span",{title:"Resume a game session",className:"pl-1 pr-1 text-md",children:"Resume"})]})]}),Object(N.jsx)("div",{className:"flex my-4 mb-2 space-x-6 block justify-center",children:Object(N.jsxs)("div",{className:"text-gray-400",children:["Familiarize yourself with the ",Object(N.jsx)("a",{className:"text-blue-500",href:"https://github.com/olumidesan/scrabble",target:"_blank",referrerPolicy:"no-referrer",children:"Game Notes"})," before you begin"]})})]})},Se=r(143),Ee=r(144),Pe=function(e){var t=Object(n.useContext)(O),r=Object(n.useContext)(g).setNotifications,c=B([]),a=Object(u.a)(c,3),s=(a[0],a[1]),i=a[2],o=B("Preparing game room..."),l=Object(u.a)(o,3),d=(l[0],l[1]),b=l[2],j=Object(n.useContext)(p),f=j.player,m=j.setRackState,x=j.setGameStarted,h=j.setGameResumed,v=j.setGameCreated,y=j.setAllowAudio,w=j.setPlayers,k=j.setUsedTiles,D=j.setTimeToPlay;return Object(n.useEffect)((function(){s([f.current]),t.on("joinedRoom",(function(r){D(r.timeToPlay),y(r.enableAudio),s(r.connectedPlayers),i.current.length===e.numPlayers&&f.current.isHost&&t.emit("create"===r.mode?"gameCreateEvent":"gameResumeEvent",{roomID:e.roomID})})),t.on("gameCreate",(function(e){var t=f.current.isHost?"Make a draw using the yellow button on your button rack. You'll":"The host will make a draw, and you'll";r([{message:"Welcome, ".concat(f.current.name,"! ").concat(t," be notified (just like this) of who gets to play first. Good luck! \ud83c\udf40"),overwrite:!1,type:"info"}]),w(e.allPlayers),setTimeout((function(){d("Fetching game bag...")}),1500),setTimeout((function(){v(!0)}),3500)}),[]),t.on("gameResume",(function(e){r([{message:"Welcome back, ".concat(f.current.name,". Again, Good luck! \ud83c\udf40"),overwrite:!1,type:"info"}]),w(e.allPlayers),k(e.usedTiles),m(e.rack[f.current.name]),setTimeout((function(){d("Fetching your pieces...")}),1500),setTimeout((function(){d("Resuming board state...")}),3500),setTimeout((function(){x(!0),h(!0)}),5500)}),[])}),[]),Object(N.jsx)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:Object(N.jsxs)("div",{className:"max-w-sm pt-4 w-96 rounded overflow-hidden shadow-2xl",children:[Object(N.jsxs)("div",{className:"px-8 flex justify-between items-center w-full py-4",children:[Object(N.jsx)("div",{className:"font-bold text-left text-2xl",children:"Waiting Room"}),Object(N.jsxs)("div",{title:"Share this ID with players you want to join your game session",className:"cursor-help font-bold pt-2 text-sm text-gray-400",children:[Object(N.jsx)(ge.a,{size:23,className:"inline pb-1 pr-1"}),e.roomID]})]}),Object(N.jsxs)("div",{className:"py-8 px-6 border-t border",children:[Object(N.jsx)(Se.a,{size:22,className:"inline"})," Connected players: ",I(i.current.length),"/",Object(N.jsx)("span",{className:"font-bold",children:e.numPlayers})]}),i.current.length===e.numPlayers?Object(N.jsx)("div",{className:"py-4 border-t border",children:Object(N.jsx)("div",{className:"text-sm italic text-gray-500",children:b.current})}):null,Object(N.jsx)("div",{className:"py-4 border-t border",children:i.current.map((function(e,t){return Object(N.jsxs)("div",{className:"text-sm text-gray-500",children:[e.name===f.current.name?"You (".concat(e.name,")"):e.name," joined the game room"]},t)}))}),f.current.isHost?Object(N.jsx)("div",{className:"h-14 border-t border",children:Object(N.jsxs)("button",{onClick:e.handleDestroyGameSession,className:"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center",children:[Object(N.jsx)(Ee.a,{size:22}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Delete Session"})]})}):null]})})},ze=function(e){var t=Object(n.useState)(0),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(!1),i=Object(u.a)(s,2),l=i[0],d=i[1],b=Object(n.useState)({valid:!0,message:"",roomID:""}),j=Object(u.a)(b,2),f=j[0],m=j[1],x=Object(n.useState)({valid:!0,message:"",name:""}),h=Object(u.a)(x,2),v=h[0],g=h[1],y=Object(n.useContext)(O),w=Object(n.useContext)(p).setPlayer,k=function(){var e=Object(G.a)(W.a.mark((function e(t,r){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y({requestType:"get",url:"/room/".concat(t,"?name=").concat(v.name,"&mode=").concat(r),payload:{}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(G.a)(W.a.mark((function e(){var t,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v.name.length<2||v.name.length>10)){e.next=3;break}return g(Object(o.a)(Object(o.a)({},v),{},{valid:!1,message:"Name must be between 2 and 10 characters"})),e.abrupt("return");case 3:if(D(v.name)){e.next=6;break}return g(Object(o.a)(Object(o.a)({},v),{},{valid:!1,message:"Name must be alphanumeric"})),e.abrupt("return");case 6:if(!(f.roomID.length<11)){e.next=9;break}return m(Object(o.a)(Object(o.a)({},f),{},{valid:!1,message:"Session ID must be 11 characters"})),e.abrupt("return");case 9:return e.next=11,k(f.roomID,"resume");case 11:"error"===(t=e.sent).status?m(Object(o.a)(Object(o.a)({},f),{},{valid:!1,message:t.message})):"nameError"===t.status?g(Object(o.a)(Object(o.a)({},v),{},{valid:!1,message:t.message})):(r={turn:!1,isSpeaking:!1,roomID:f.roomID,score:t.player.score,isHost:t.player.isHost,name:v.name.capitalize()},y.emit("resume",{roomID:f.roomID,player:r}),a(t.limit),w(r),d(!0));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C="".concat(v.valid?"mb-4":"mb-0"," w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500");return l?Object(N.jsx)(Pe,{roomID:f.roomID,numPlayers:c}):Object(N.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[Object(N.jsx)("div",{className:"font-medium text-xl pb-3",children:"Resume a Game Session"}),Object(N.jsxs)("div",{className:"justify-center flex flex-col pt-4 w-96 rounded overflow-hidden shadow-2xl",children:[Object(N.jsx)("div",{className:"flex self-center pt-6 mx-3 mb-1",children:Object(N.jsxs)("div",{className:"px-3",children:[Object(N.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-1",children:"Previous Session Name"}),Object(N.jsx)("input",{minLength:3,maxLength:10,onChange:function(e){g(Object(o.a)(Object(o.a)({},v),{},{valid:!0,name:e.target.value.trim()}))},title:"Your name",className:C,type:"text",placeholder:"E.g. Joey"})]})}),Object(N.jsx)("div",{className:"flex self-center wrap mx-3",children:v.valid?null:Object(N.jsx)("div",{className:"w-full px-3",children:Object(N.jsx)("div",{className:"w-80 md:flex md:items-center",children:Object(N.jsx)("span",{className:"text-sm text-red-600 mb-4",children:v.message})})})}),Object(N.jsx)("div",{className:"flex self-center mx-3 mb-0",children:Object(N.jsxs)("div",{className:"px-3",children:[Object(N.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Previous Session ID"}),Object(N.jsx)("input",{onChange:function(e){m(Object(o.a)(Object(o.a)({},f),{},{valid:!0,roomID:e.target.value.trim()}))},maxLength:11,className:"w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",placeholder:"E.g. 41828-11860"})]})}),Object(N.jsx)("div",{className:"flex self-center wrap mx-3 mb-6",children:f.valid?null:Object(N.jsx)("div",{className:"w-full px-3",children:Object(N.jsx)("div",{className:"w-80  md:flex md:items-center",children:Object(N.jsx)("span",{className:"text-sm text-red-600 pb-2",children:f.message})})})}),Object(N.jsxs)("div",{className:"h-14 border-t flex border",children:[Object(N.jsx)("div",{className:"block w-1/2",children:Object(N.jsxs)("button",{onClick:function(){return e.setGameChoice("cancel")},className:"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center",children:[Object(N.jsx)(te.a,{size:26}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Cancel"})]})}),Object(N.jsx)("div",{className:"block w-1/2",children:Object(N.jsxs)("button",{onClick:I,className:"h-full w-full bg-green-600 hover:bg-green-700 text-white font-bold border border-green-700 inline-flex justify-center items-center",children:[Object(N.jsx)(Ce.a,{className:"pb",strokeWidth:3,size:26}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Resume"})]})})]})]})]})},Le=function(e){var t=Object(n.useState)(0),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(!1),i=Object(u.a)(s,2),l=i[0],d=i[1],b=Object(n.useState)({valid:!0,message:"",roomID:""}),j=Object(u.a)(b,2),f=j[0],m=j[1],x=Object(n.useState)({valid:!0,message:"",name:""}),h=Object(u.a)(x,2),v=h[0],g=h[1],y=Object(n.useContext)(O),w=Object(n.useContext)(p).setPlayer,k=function(){var e=Object(G.a)(W.a.mark((function e(t,r){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y({requestType:"get",url:"/room/".concat(t,"?name=").concat(v.name,"&mode=").concat(r),payload:{}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(G.a)(W.a.mark((function e(){var t,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v.name.length<2||v.name.length>10)){e.next=3;break}return g(Object(o.a)(Object(o.a)({},v),{},{valid:!1,message:"Name must be between 2 and 10 characters"})),e.abrupt("return");case 3:if(D(v.name)){e.next=6;break}return g(Object(o.a)(Object(o.a)({},v),{},{valid:!1,message:"Name must be alphanumeric"})),e.abrupt("return");case 6:if(!(f.roomID.length<11)){e.next=9;break}return m(Object(o.a)(Object(o.a)({},f),{},{valid:!1,message:"Session ID must be 11 characters"})),e.abrupt("return");case 9:return e.next=11,k(f.roomID,"join");case 11:"error"===(t=e.sent).status?m(Object(o.a)(Object(o.a)({},f),{},{valid:!1,message:t.message})):"nameError"===t.status?g(Object(o.a)(Object(o.a)({},v),{},{valid:!1,message:t.message})):t.room.joinable?(r={score:0,turn:!1,isHost:!1,isSpeaking:!1,roomID:f.roomID,name:v.name.capitalize()},y.emit("join",{roomID:f.roomID,player:r}),a(t.room.limit),w(r),d(!0)):m({valid:!1,message:"Game session has started and cannot be joined"});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C="".concat(v.valid?"mb-4":"mb-0"," w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500");return l?Object(N.jsx)(Pe,{roomID:f.roomID,numPlayers:c}):Object(N.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[Object(N.jsx)("div",{className:"font-medium text-xl pb-3",children:"Join a Game Session"}),Object(N.jsxs)("div",{className:"justify-center flex flex-col pt-4 w-96 rounded overflow-hidden shadow-2xl",children:[Object(N.jsx)("div",{className:"flex self-center pt-6 mx-3 mb-1",children:Object(N.jsxs)("div",{className:"px-3",children:[Object(N.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-1",children:"Your Name"}),Object(N.jsx)("input",{minLength:3,maxLength:10,onChange:function(e){g(Object(o.a)(Object(o.a)({},v),{},{valid:!0,name:e.target.value.trim()}))},title:"Your name",className:C,type:"text",placeholder:"E.g. Joey"})]})}),Object(N.jsx)("div",{className:"flex self-center wrap mx-3",children:v.valid?null:Object(N.jsx)("div",{className:"w-full px-3",children:Object(N.jsx)("div",{className:"w-80 md:flex md:items-center",children:Object(N.jsx)("span",{className:"text-sm text-red-600 mb-4",children:v.message})})})}),Object(N.jsx)("div",{className:"flex self-center mx-3 mb-0",children:Object(N.jsxs)("div",{className:"px-3",children:[Object(N.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Session ID"}),Object(N.jsx)("input",{onChange:function(e){m(Object(o.a)(Object(o.a)({},f),{},{valid:!0,roomID:e.target.value.trim()}))},maxLength:11,className:"w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",placeholder:"E.g. 41828-11860"})]})}),Object(N.jsx)("div",{className:"flex self-center wrap mx-3 mb-6",children:f.valid?null:Object(N.jsx)("div",{className:"w-full px-3",children:Object(N.jsx)("div",{className:"w-80  md:flex md:items-center",children:Object(N.jsx)("span",{className:"text-sm text-red-600 pb-2",children:f.message})})})}),Object(N.jsxs)("div",{className:"h-14 border-t flex border",children:[Object(N.jsx)("div",{className:"block w-1/2",children:Object(N.jsxs)("button",{onClick:function(){return e.setGameChoice("cancel")},className:"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center",children:[Object(N.jsx)(te.a,{size:26}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Cancel"})]})}),Object(N.jsx)("div",{className:"block w-1/2",children:Object(N.jsxs)("button",{onClick:I,className:"h-full w-full bg-green-600 hover:bg-green-700 text-white font-bold border border-green-700 inline-flex justify-center items-center",children:[Object(N.jsx)(Ie.a,{className:"pb",strokeWidth:3,size:26}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Join"})]})})]})]})]})},Re=r(145),We=r(146),Ge=r(147),Ae="".concat(k(5),"-").concat(k(5)),Fe=function(e){var t=Object(n.useState)(!1),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(2),i=Object(u.a)(s,2),l=i[0],d=i[1],b=Object(n.useState)(null),j=Object(u.a)(b,2),f=j[0],m=j[1],x=Object(n.useState)(!1),h=Object(u.a)(x,2),v=h[0],g=h[1],y=Object(n.useState)(!1),w=Object(u.a)(y,2),I=w[0],C=w[1],T=Object(n.useState)({valid:!0,message:"",name:""}),S=Object(u.a)(T,2),E=S[0],P=S[1],z=Object(n.useRef)(null),L=Object(n.useContext)(O),R=Object(n.useContext)(p).setPlayer,W="".concat(E.valid?"mb-4":"mb-0"," w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500");return v?Object(N.jsx)(Pe,{roomID:Ae,numPlayers:l,handleDestroyGameSession:function(){window.confirm("Are you sure you want to delete this game session?")&&(d(2),C(!1),g(!1),e.setGameChoice("cancel"),P({message:"",valid:!0,name:""}),L.emit("leave",{roomID:Ae}),Ae="".concat(k(5),"-").concat(k(5)))}}):Object(N.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[Object(N.jsx)("div",{className:"font-medium text-xl pb-3",children:"Host a Game Session"}),Object(N.jsxs)("div",{className:"justify-center flex flex-col pt-4 w-96 rounded overflow-hidden shadow-2xl",children:[Object(N.jsx)("div",{className:"flex self-center pt-6 mx-3 mb-2",children:Object(N.jsxs)("div",{className:"px-3",children:[Object(N.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Your Session ID"}),Object(N.jsxs)("div",{className:"relative",children:[Object(N.jsx)("input",{ref:z,title:"Automatically-generated session ID",disabled:!0,value:Ae,className:"w-80 cursor-not-allowed appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",placeholder:"E.g. Joey"}),"https:"===window.location.protocol||"localhost"===window.location.hostname?Object(N.jsx)("div",{className:"absolute inset-y-0 right-0 w-1/6",children:Object(N.jsx)("button",{title:"Copy",onClick:function(){navigator.clipboard.writeText(z.current.value),a(!0),setTimeout((function(){a(!1)}),1500)},className:"h-full w-full border- rounded-r bg-gray-700 hover:bg-gray-700 text-white font-bold inline-flex justify-center items-center",children:c?Object(N.jsx)(Re.a,{strokeWidth:3,size:20}):Object(N.jsx)(We.a,{strokeWidth:3,size:20})})}):null]})]})}),Object(N.jsx)("div",{className:"flex self-center mx-3 mb-1",children:Object(N.jsxs)("div",{className:"px-3",children:[Object(N.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-1",children:"Your Name"}),Object(N.jsx)("input",{minLength:3,maxLength:10,onChange:function(e){P(Object(o.a)(Object(o.a)({},E),{},{valid:!0,name:e.target.value.trim()}))},title:"Your name",className:W,type:"text",placeholder:"E.g. Phoebe"})]})}),Object(N.jsx)("div",{className:"flex self-center wrap mx-3",children:E.valid?null:Object(N.jsx)("div",{className:"w-full px-3",children:Object(N.jsx)("div",{className:"w-80 md:flex md:items-center",children:Object(N.jsx)("span",{className:"text-sm text-red-600 mb-4",children:E.message})})})}),Object(N.jsx)("div",{className:"flex self-center flex-wrap -mx-3 mt-1 mb-4",children:Object(N.jsxs)("div",{className:"w-full px-3",children:[Object(N.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Number of Players"}),Object(N.jsxs)("div",{className:"relative",children:[Object(N.jsxs)("select",{onChange:function(e){d(parseInt(e.target.value))},className:"block cursor-pointer appearance-none w-80 bg-gray-100 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[Object(N.jsx)("option",{defaultValue:!0,value:2,children:"Two"}),Object(N.jsx)("option",{value:3,children:"Three"}),Object(N.jsx)("option",{value:4,children:"Four"})]}),Object(N.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:Object(N.jsx)(Ge.a,{size:20})})]})]})}),Object(N.jsx)("div",{className:"flex self-center flex-wrap -mx-3 mt-1 mb-6",children:Object(N.jsxs)("div",{className:"w-full px-3",children:[Object(N.jsx)("label",{title:"Required time to play before turn is automatically skipped",className:"cursor-help block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Time to Play"}),Object(N.jsxs)("div",{className:"relative",children:[Object(N.jsxs)("select",{onChange:function(e){"Disabled"!==e.target.value?m(parseInt(e.target.value)):m(null)},className:"block cursor-pointer appearance-none w-80 bg-gray-100 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[Object(N.jsx)("option",{defaultValue:!0,value:null,children:"Disabled"}),Object(N.jsx)("option",{value:300,children:"Five minutes"}),Object(N.jsx)("option",{value:240,children:"Four minutes"}),Object(N.jsx)("option",{value:180,children:"Three minutes"}),Object(N.jsx)("option",{value:120,children:"Two minutes"}),Object(N.jsx)("option",{value:60,children:"One minute"})]}),Object(N.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:Object(N.jsx)(Ge.a,{size:20})})]})]})}),"https"===window.location.protocol||"localhost"===window.location.hostname?Object(N.jsx)("div",{className:"flex self-center wrap mx-3 mb-4",children:Object(N.jsx)("div",{className:"w-full px-3",children:Object(N.jsxs)("div",{title:"If checked, push-to-talk audio between players will be allowed. That is, of course, if the player allows it",className:"w-80 cursor-help md:flex md:items-center mb-2",children:[Object(N.jsx)("label",{className:"pb-1 block text-gray-500 font-bold",children:Object(N.jsx)("input",{onChange:function(e){C(e.target.checked)},className:"mr-2 leading-tight h-5 w-5",type:"checkbox"})}),Object(N.jsx)("span",{className:"text-sm pb-2",children:"Enable Audio Chat (Push-To-Talk)"})]})})}):null,Object(N.jsxs)("div",{className:"h-14 border-t flex border",children:[Object(N.jsx)("div",{className:"block w-1/2",children:Object(N.jsxs)("button",{onClick:function(){return e.setGameChoice("cancel")},className:"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center",children:[Object(N.jsx)(te.a,{size:26}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Cancel"})]})}),Object(N.jsx)("div",{className:"block w-1/2",children:Object(N.jsxs)("button",{onClick:function(){if(E.name.length<2||E.name.length>10)P(Object(o.a)(Object(o.a)({},E),{},{valid:!1,message:"Name must be between 2 and 10 characters"}));else if(D(E.name)){var e={roomID:Ae,score:0,turn:!1,isHost:!0,isSpeaking:!1,name:E.name.capitalize()};L.emit("join",{roomID:Ae,enableAudio:I,timeToPlay:f,player:e,limit:l}),R(e),g(!0)}else P(Object(o.a)(Object(o.a)({},E),{},{valid:!1,message:"Name must be alphanumeric"}))},className:"h-full w-full bg-green-600 hover:bg-green-700 text-white font-bold border border-green-700 inline-flex justify-center items-center",children:[Object(N.jsx)(De.a,{className:"pb",strokeWidth:3,size:26}),Object(N.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Host"})]})})]})]})]})},Ye=function(e){var t=Object(n.useState)(!1),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(u.a)(d,2),j=b[0],f=b[1],m=function(e){"new"===e?(a(!0),l(!1),f(!1)):"join"===e?(l(!0),a(!1),f(!1)):"resume"===e?(a(!1),l(!1),f(!0)):(a(!1),l(!1),f(!1))};return c?Object(N.jsx)(Fe,{setGameChoice:m}):o?Object(N.jsx)(Le,{setGameChoice:m}):j?Object(N.jsx)(ze,{setGameChoice:m}):Object(N.jsx)(Te,{setGameChoice:m})},Be=r(148);function He(e){var t=B(!1),r=Object(u.a)(t,3),c=(r[0],r[1]),a=r[2],s=Object(n.useState)(""),i=Object(u.a)(s,2),o=i[0],d=i[1],b=Object(n.useContext)(O),j=Object(n.useContext)(p),f=j.player,m=j.setPlayers;Object(n.useEffect)((function(){b.on("gameEnd",(function(e){var t,r,n={name:"",score:0},a=Object(l.a)(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.score>n.score&&(n.name=s.name,n.score=s.score)}}catch(b){a.e(b)}finally{a.f()}t=f.current.name===n.name?"Congratulations, ".concat(n.name,"! You are the winner with ").concat(n.score," points. You've earned the trophy!"):"".concat(n.name," is the winner with ").concat(n.score," points. Good game, ").concat(f.current.name,". You still earn a medal \ud83c\udfc5");var i,o=Object(l.a)(e);try{for(o.s();!(i=o.n()).done;){var u=i.value;u.name===n.name?u.name="".concat(u.name," \ud83c\udfc6"):u.name="".concat(u.name," \ud83c\udfc5")}}catch(b){o.e(b)}finally{o.f()}d(t),m(e),c(!0)}))}),[]);var x=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(N.jsx)("div",{className:"relative w-screen my-6 mx-auto max-w-3xl",children:Object(N.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(N.jsx)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:Object(N.jsx)("h3",{className:"text-2xl font-semibold",children:"\ud83c\udfc6 The Game Has Ended \ud83c\udfc6"})}),Object(N.jsxs)("div",{className:"flex-col relative text-lg pt-5 pb-7 flex justify-center flex-wrap",children:[Object(N.jsx)("div",{className:"pb-6",children:o}),Object(N.jsxs)("button",{onClick:function(){c(!1)},className:"self-center bg-green-600 hover:bg-green-700 text-white inline py-2 px-4 border border-green-700 rounded",children:[Object(N.jsx)(Be.a,{className:"inline pb-1",strokeWidth:2,size:24}),Object(N.jsx)("span",{className:"pl-1",children:"Cool, Thanks"})]})]})]})})}),Object(N.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]});return a.current?x:null}var qe=r(149),Je=function(){var e=B(!1),t=Object(u.a)(e,3),r=(t[0],t[1]),c=t[2],a=B(!1),s=Object(u.a)(a,3),d=(s[0],s[1]),b=s[2],j=B(!1),f=Object(u.a)(j,3),m=(f[0],f[1]),x=f[2],h=B(!1),y=Object(u.a)(h,3),w=(y[0],y[1]),k=y[2],D=B(!1),I=Object(u.a)(D,3),C=(I[0],I[1]),T=I[2],S=B(!1),E=Object(u.a)(S,3),P=(E[0],E[1]),z=E[2],L=B(!1),R=Object(u.a)(L,3),W=(R[0],R[1]),G=R[2],A=B(!1),F=Object(u.a)(A,3),Y=(F[0],F[1]),H=F[2],J=B(null),M=Object(u.a)(J,3),U=(M[0],M[1]),V=M[2],K=B([]),_=Object(u.a)(K,3),Z=(_[0],_[1]),$=_[2],Q=B([]),X=Object(u.a)(Q,3),ee=(X[0],X[1]),te=X[2],re=B([]),ne=Object(u.a)(re,3),ce=(ne[0],ne[1]),ae=ne[2],se=B([]),ie=Object(u.a)(se,3),oe=(ie[0],ie[1]),le=ie[2],ue=B([]),de=Object(u.a)(ue,3),be=(de[0],de[1]),je=de[2],fe=B(!0),me=Object(u.a)(fe,3),xe=(me[0],me[1]),he=me[2],pe=B([]),Oe=Object(u.a)(pe,3),ve=(Oe[0],Oe[1]),ge=Oe[2],ye=B({}),we=Object(u.a)(ye,3),Ne=(we[0],we[1]),De=we[2],Ie=B({length:0,pieces:{}}),Ce=Object(u.a)(Ie,3),Te=(Ce[0],Ce[1]),Se=Ce[2],Ee=B([]),Pe=Object(u.a)(Ee,3),ze=(Pe[0],Pe[1]),Le=Pe[2],Re=Object(n.useContext)(O),We={bag:Se,setBag:Te,player:De,setPlayer:Ne,players:ge,setPlayers:ve,playFlag:z,setPlayFlag:P,gameEnded:c,setGameEnded:r,usedTiles:je,setUsedTiles:be,rackState:ae,setRackState:ce,boardState:te,setBoardState:ee,allowAudio:H,setAllowAudio:Y,recallFlag:G,setRecallFlag:W,timeToPlay:V,setTimeToPlay:U,gameExited:x,setGameExited:m,gameStarted:T,setGameStarted:C,gameCreated:b,setGameCreated:d,gameResumed:k,setGameResumed:w,playedTiles:$,setPlayedTiles:Z,playedWords:le,setPlayedWords:oe};Object(n.useEffect)((function(){Re.on("resumeDone",(function(e){Te(e.bag),w(!0),C(!0);var t,r=[],n=e.playerToPlay,c="",a=Object(l.a)(ge.current);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.name===n&&(s.turn=!0),r.push(s)}}catch(i){a.e(i)}finally{a.f()}ve(r),n===De.current.name?(c="You were to play before the game was paused",Ne(Object(o.a)(Object(o.a)({},De.current),{},{turn:!0}))):c="".concat(n," was to play before the game was paused"),ze([{message:"".concat(c,". The game has officially resumed."),overwrite:!1,type:"info",timeout:5}])})),Re.on("drawDone",(function(e){Te(e.bag),C(!0);var t,r,n=[],c=e.players[0],a="",s=Object(l.a)(ge.current);try{for(s.s();!(r=s.n()).done;){var i=r.value;i.name===c&&(i.turn=!0),n.push(i)}}catch(u){s.e(u)}finally{s.f()}ve(n),c===De.current.name?(t="You get to play first",Ne(Object(o.a)(Object(o.a)({},De.current),{},{turn:!0}))):t="".concat(c," gets to play first"),e.players.forEach((function(t,r){t===De.current.name&&(t="".concat(t," (You)")),r+1===e.players.length?a+=t:a+="".concat(t,", then ")})),ze([{message:"".concat(t,". Also note that the turn order is, ").concat(a),overwrite:!1,type:"info",timeout:5}])})),Re.on("validPlay",(function(e){Ge(e.playerToPlay.name),e.name===De.current.name&&Ne(Object(o.a)(Object(o.a)({},De.current),{},{score:e.updatedScore})),ve(Ae(e)),Be(e),be(Object(i.a)(new Set([].concat(Object(i.a)(je.current),Object(i.a)($.current))))),Te(e.bag),Fe(e.bag.length),Z([]),(6===e.turnSkips||e.bagIsEmpty&&e.rackIsEmpty)&&r(!0)}))}),[]);var Ge=function(e){e===De.current.name?Ne(Object(o.a)(Object(o.a)({},De.current),{},{turn:!0})):Ne(Object(o.a)(Object(o.a)({},De.current),{},{turn:!1}))},Ae=function(e){var t,r=[],n=Object(l.a)(ge.current);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.name===e.playerToPlay.name?c.turn=!0:c.turn=!1,c.name===e.name&&(c.score=e.updatedScore),r.push(c)}}catch(a){n.e(a)}finally{n.f()}return r},Fe=function(e){var t;e<=7&&(t=0===e?"No pieces are left in the bag":1===e?"Only one piece is left in the bag":"Only ".concat(e," pieces are left in the bag."),setTimeout((function(){ze([{message:"Heads up! ".concat(t),type:"warning"}])}),7e3))},Be=function(e){var t,r="It's ".concat(e.playerToPlay.name===De.current.name?"your":"".concat(e.playerToPlay.name,"'s"));e.isTurnSkipped?(t=e.name===De.current.name?"You skipped your turn.":"Turn skipped by ".concat(e.name,"."),t+=" ".concat(r," turn to play")):e.isTurnSwapped?(t=e.name===De.current.name?"You swapped pieces for your turn.":"".concat(e.name," swapped pieces for turn."),t+=" ".concat(r," turn to play")):(t=e.name===De.current.name?"You played '".concat(e.word,"' worth ").concat(e.score," points."):"".concat(e.name," played '").concat(e.word,"' worth ").concat(e.score," points."),t+=" ".concat(r," turn to play")),ze([{type:"success",message:t}])},Je=Object(N.jsxs)("div",{className:"flex space-x-10",children:[Object(N.jsx)(q,{}),Object(N.jsx)("div",{className:"px-10"}),Object(N.jsx)(ke,{})]});return Object(N.jsx)("div",{className:"container mx-auto p-10 flex h-screen justify-center",children:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?Object(N.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(N.jsx)("div",{children:Object(N.jsx)(qe.a,{size:48})}),Object(N.jsx)("div",{className:"pt-2",children:"Mobile Device Detected. Sorry, this game cannot be played on mobile device. Kindly use a laptop/desktop."})]}):Object(N.jsx)(g.Provider,{value:{notifications:Le,setNotifications:ze},children:Object(N.jsx)(p.Provider,{value:We,children:Object(N.jsxs)(v.Provider,{value:{validDrag:he,setValidDrag:xe},children:[b.current||k.current?Je:Object(N.jsx)(Ye,{}),Object(N.jsx)(He,{})]})})})})};var Me=function(){return Object(N.jsx)(O.Provider,{value:h,children:Object(N.jsx)("div",{className:"App",children:Object(N.jsx)(Je,{})})})},Ue=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,150)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(Me,{})}),document.getElementById("root")),Ue()},60:function(e,t,r){},61:function(e,t,r){}},[[116,1,2]]]);
//# sourceMappingURL=main.c7fc86e0.chunk.js.map