{"version":3,"sources":["constants.js","context.js","utils.js","components/Legend.js","components/Piece.js","components/Tile.js","components/Modal.js","xhr.js","hooks.js","components/GameBoard.js","components/Connection.js","components/ScoreBoard.js","components/Notification.js","components/SwapModal.js","components/ControlButton.js","components/Audio.js","components/Controls.js","components/Bag.js","components/Rack.js","components/GameLogModal.js","components/GameLog.js","components/GamePanel.js","components/GameChooser.js","components/ResumeGame.js","components/WaitingRoom.js","components/JoinGame.js","components/NewGame.js","components/LandingPage.js","components/WinnerModal.js","containers/Game.js","App.js","reportWebVitals.js","index.js"],"names":["URL","window","apiURL","SERVER_TOKEN","b2ctk","API_URL","tileColors","normal","tripleWord","startTile","doubleLetter","tripleLetter","doubleWord","String","prototype","capitalize","this","charAt","toUpperCase","slice","toLowerCase","socket","io","transports","GameContext","React","createContext","SocketIOContext","ValidDragContext","NotificationContext","generateRandomID","size","crypto","getRandomValues","Uint32Array","toString","isAlphanumeric","str","match","countUp","number","start","end","duration","excludeMeSioEvent","sio","eventName","myName","dispatch","on","data","name","getDragData","e","JSON","parse","dataTransfer","getData","Legend","className","title","Piece","id","tileID","char","weight","onBoard","isPlayed","isStatic","isTransformed","dragEndHandler","thisPiece","useRef","useContext","validDrag","setValidDrag","useState","pieceData","handleDragEnd","stopImmediatePropagation","current","dropEffect","dragCancelled","handleDragStart","stopPropagation","setData","stringify","setDragData","handleDragDrop","preventDefault","handleDragOver","handleDragEnter","handleDragLeave","useEffect","addEventListener","weightClassNames","classNames","ref","draggable","style","top","Tile","forwardRef","props","useImperativeHandle","addPiece","piece","setPlayedPiece","removePiece","hasPiece","playedPiece","undefined","getPiece","tileType","type","prevTileID","thisTile","player","playedTiles","usedTiles","setPlayedTiles","includes","setRequestChoosePiece","pieceID","status","newPiece","emit","roomID","turn","removeEventListener","fill","strokeWidth","Modal","bag","modal","mode","Object","values","pieces","filter","map","index","onClick","modalHandler","show","axios","defaults","baseURL","headers","post","common","interceptors","request","use","error","console","log","Promise","reject","response","makeServerRequest","opts","requestType","url","payload","then","r","catch","useStateRef","defaultValue","state","setState","useCallback","val","tilePerRow","GameBoard","rows","tileRefs","requestChoosePiece","playFlag","setPlayFlag","setPlayedWords","recallFlag","setRecallFlag","toRackMove","removePieceFromTile","tID","addPieceToTile","getPlayedWords","Array","length","_","i","tileRows","tileRow","tile","el","push","getTile","refIndex","isBoardEdge","position","wv","wh","words","tileIndex","wordsTop","getPiecesInPosition","wordsLeft","wordsDown","wordsRight","v","a","findIndex","t","ind","loopLength","unshift","height","transformedBlankPiece","Connection","icon","iconStatus","ping","setPing","setStatus","pingIntervalID","setPingIntervalID","iID","setInterval","pingServer","clearInterval","startTime","Date","endTime","pingDuration","getTime","color","ScoreBoard","setBoard","board","players","tableRows","entries","p","tableRow","isSpeaking","score","Notification","notifications","setTimeoutNotifications","timeoutNotifications","notification","iconType","newNotification","message","SwapModal","checkBoxRefs","setShowConfirm","showConfirm","handleOnChange","checkBox","checked","onChange","swapCancelHandler","swapConfirmHandler","checkedBoxes","getCheckedBoxesIDs","descriptions","ControlButton","handler","Audio","useReactMediaRecorder","audio","askPermissionOnMount","mediaBlobUrl","clearBlobUrl","stopRecording","startRecording","setIsMuted","isMuted","setAudioBlob","audioBlob","setSpeakerName","speakerName","setPlayer","setPlayers","updatedPlayers","src","autoPlay","Controls","gameStarted","allowAudio","setControlButtons","controlButtons","buttons","isHost","draw","Bag","setShowContents","showContents","Rack","thisRack","setTryCount","tryCount","setPieces","currPieces","setStartSwap","startSwap","setCountDownID","countDownID","setPlayedPieces","currPlayedPieces","setNotifications","timeToPlay","playedWords","gameEnded","setCountDown","countDown","getFromBag","getPieces","actualTurnSkip","playedWordsStr","word","join","validatePlayedWords","bagIsEmpty","rackIsEmpty","playedWord","getPlayedWord","computeScore","refillRack","intervalID","playedPieces","wordWeight","isBingo","totalScore","mul","charWeight","charTileID","charTileType","amount","returnedPieces","addToPieces","findPiece","removePieceFromPieces","addToPlayedPieces","remainingPieces","getTileRow","Math","ceil","checkedIDs","piecesSwapped","pieceToSwap","findPieceByID","isTurnSwapped","validateNeighbors","boardIsEmpty","playDirection","valid","linkCount","tiles","allTiles","source","getTileColumn","first","indexOf","last","getNeigbouringTiles","tileUp","tileDown","tileLeft","tileRight","linkedTiles","forEach","tileTC","initiatePlayPipeline","firstTile","sort","b","firstTileRow","numPlayedTiles","every","tt","getPlayDirection","neighborsAreValid","recall","overwrite","timeout","isBoardEmpty","isTurnSkipped","find","removePieceFromPlayedPieces","seconds","width","shuffle","arr","j","floor","random","temp","inPlaceShuffle","skip","confirm","play","swap","toISOString","substr","GameLogModal","logs","close","time","event","GameLog","setShowModal","showModal","setLogs","GamePanel","GameChooser","setGameChoice","href","target","referrerPolicy","ResumeGame","WaitingRoom","setConnectedPlayers","connectedPlayers","setPrepText","prepText","setGameCreated","setAllowAudio","setTimeToPlay","enableAudio","numPlayers","welcomeMessage","allPlayers","setTimeout","handleDestroyGameSession","JoinGame","setNumPlayers","gameJoined","setGameJoined","sessionID","setSessionID","sessionName","setSessionName","getGameRoomData","gameRoomID","handleJoinGameSession","gameRoomData","room","joinable","currentPlayer","limit","minLength","maxLength","value","trim","placeholder","NewGame","gameCreated","setEnableAudio","disabled","parseInt","LandingPage","newGame","setNewGame","joinGame","setJoinGame","resumeGame","setResumeGame","choice","WinnerModal","setShow","endMessage","setEndMessage","finalMessage","winner","Game","setGameEnded","setGameStarted","setUsedTiles","setBag","gameContext","playerToPlayMessage","playerToPlay","playOrderMessage","updatedPlayerTurns","updatedScore","getUpdatedPlayers","announcePlayResult","Set","announceBagState","turnSkips","bagLength","emptyMessage","turnPlayer","gameSpace","Provider","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gMAEMA,EAAwB,aAAlBC,OAAOC,OAAwB,4BAA8BD,OAAOC,OAC1EC,EAAgC,gBAAjBF,OAAOG,MAA0B,mBAAqBH,OAAOG,MAE5EC,EAAO,UAAML,EAAN,WAMPM,EAAa,CACfC,OAAQ,WACRC,WAAY,aACZC,UAAW,cACXC,aAAc,cACdC,aAAc,cACdC,WAAY,iBAKhBC,OAAOC,UAAUC,WAAa,WAC1B,OAAOC,KAAKC,OAAO,GAAGC,cAAgBF,KAAKG,MAAM,GAAGC,eClBxD,IAAMC,EAASC,aAAGtB,EDEI,CAClBuB,WAAY,CAAC,YAAa,aCDxBC,EAAcC,IAAMC,gBACpBC,EAAkBF,IAAMC,gBACxBE,EAAmBH,IAAMC,gBACzBG,EAAsBJ,IAAMC,gB,wBCQ5BI,EAAmB,SAACC,GACtB,OAAO9B,OAAO+B,OACTC,gBAAgB,IAAIC,YAAY,IAAI,GACpCC,WACAhB,MAAM,EAAGY,IAGZK,EAAiB,SAACC,GAAD,OAASA,EAAIC,MAAM,mBAEpCC,EAAU,SAACC,GACb,OAAO,cAAC,IAAD,CAASC,MAAOD,EAAQE,IAAKF,EAAQG,SAAU,OAOpDC,EAAoB,SAACC,EAAKC,EAAWC,EAAQC,GAC/CH,EAAII,GAAGH,GAAW,SAACI,GACXA,EAAKC,OAASJ,GAAQC,EAASE,OAKrCE,EAAc,SAACC,GAAD,OAAOC,KAAKC,MAAMF,EAAEG,aAAaC,QAAQ,kBCvB9CC,EAfA,WAEX,OACI,qBAAKC,UAAU,QAAf,SACI,sBAAKA,UAAU,OAAf,UACI,sBAAKC,MAAM,mEAAmED,UAAU,SAAxF,UAAiG,sBAAMA,UAAS,UAAKrD,EAAU,UAAf,yCAA0E,sBAAMqD,UAAU,OAAhB,4BAC1L,sBAAKC,MAAM,wDAAwDD,UAAU,SAA7E,UAAsF,sBAAMA,UAAS,UAAKrD,EAAU,aAAf,yCAA6E,sBAAMqD,UAAU,OAAhB,8BAClL,sBAAKC,MAAM,wDAAwDD,UAAU,SAA7E,UAAsF,sBAAMA,UAAS,UAAKrD,EAAU,aAAf,yCAA6E,sBAAMqD,UAAU,OAAhB,8BAClL,sBAAKC,MAAM,6EAA6ED,UAAU,SAAlG,UAA2G,sBAAMA,UAAS,UAAKrD,EAAU,WAAf,yCAA2E,sBAAMqD,UAAU,OAAhB,4BACrM,sBAAKC,MAAM,6EAA6ED,UAAU,SAAlG,UAA2G,sBAAMA,UAAS,UAAKrD,EAAU,WAAf,yCAA2E,sBAAMqD,UAAU,OAAhB,kCC6EtME,EAnFD,SAAC,GAUR,IATHC,EASE,EATFA,GACAC,EAQE,EARFA,OACAC,EAOE,EAPFA,KACAC,EAME,EANFA,OACAC,EAKE,EALFA,QACAC,EAIE,EAJFA,SACAC,EAGE,EAHFA,SACAC,EAEE,EAFFA,cACAC,EACE,EADFA,eAGMC,EAAYC,mBAElB,EAAoCC,qBAAW7C,GAAvC8C,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,aACnB,EAAkCC,mBAAS,CAAEd,KAAIC,SAAQC,OAAMC,SAAQC,UAASG,gBAAeD,WAAUD,aAAzG,mBAAOU,EAAP,KAKMC,GALN,KAKsB,SAACzB,GACnBA,EAAE0B,2BACET,GACGI,EAAUM,UFWH,SAAC3B,GAAD,MAAqC,SAA9BA,EAAEG,aAAayB,WEV5BC,CAAc7B,IAClBiB,EAAeO,KAIjBM,EAAkB,SAAC9B,GAErBA,EAAE+B,kBACF/B,EAAE0B,2BAEFJ,GAAa,GFED,SAACtB,EAAGH,GAASG,EAAEG,aAAa6B,QAAQ,eAAgB/B,KAAKgC,UAAUpC,IED/EqC,CAAYlC,EAAGwB,IAKbW,EAAiB,SAACnC,GAEpBA,EAAEoC,iBACFpC,EAAE+B,kBACF/B,EAAE0B,2BACFJ,GAAa,IAIXe,EAAiB,SAACrC,GAAD,OAAOA,EAAEoC,kBAC1BE,EAAkB,SAACtC,GAAD,OAAOA,EAAEoC,kBAC3BG,EAAkB,SAACvC,GAAD,OAAOA,EAAEoC,kBAIjCI,qBAAU,kBAAMtB,EAAUS,QAAQc,iBAAiB,OAAQN,MAC3DK,qBAAU,kBAAMtB,EAAUS,QAAQc,iBAAiB,UAAWhB,MAC9De,qBAAU,kBAAMtB,EAAUS,QAAQc,iBAAiB,WAAYJ,MAC/DG,qBAAU,kBAAMtB,EAAUS,QAAQc,iBAAiB,YAAaF,MAChEC,qBAAU,kBAAMtB,EAAUS,QAAQc,iBAAiB,YAAaX,MAChEU,qBAAU,kBAAMtB,EAAUS,QAAQc,iBAAiB,YAAaH,MAIhE,IAAII,EAAmBlB,EAAUZ,OAAS,GAAK,yCAA2C,yCACtF+B,EAAU,UAAM5B,EAAW,QAAU,SAA3B,YAAuCC,EAAgB,gBAAkB,GAAzE,YAAkG,MAAnBQ,EAAUb,KAAe,mBAAqB,GAA7H,6DAAoLE,EAAU,SAAW,cAAzM,0CAEd,OACI,sBAAK+B,IAAK1B,EAAW2B,WAAY/B,EAAUR,UAAWqC,EAAtD,UACI,qBAAKrC,UAAU,6CAAf,SACI,sBAAMwC,MAAO,CAAEC,IAAK,UAAYzC,UAAS,mBAAcU,EAAgB,cAAgB,GAA9C,aAAzC,SACKQ,EAAUb,SAGnB,qBAAKL,UAAU,+BAAf,SACI,sBAAMA,UAAWoC,EAAjB,SACKlB,EAAUZ,e,SC0EhBoC,EAtJFC,sBAAW,SAACC,EAAON,GAK5BO,8BAAoBP,GAAK,iBAAO,CAE5BQ,SAF4B,SAEnBC,GACLC,EAAeD,IAGnBE,YAN4B,WAOxBD,EAAe,OAGnBE,SAV4B,WAWxB,OAAuB,OAAhBC,QAAwCC,IAAhBD,GAGnCE,SAd4B,WAexB,OAAO,2BAAKF,EAAYP,OAAxB,IAA+BU,SAAUV,EAAMW,YAKvD,IAAIC,EAAa,GACXD,EAAOX,EAAMW,KACbnD,EAASwC,EAAMzC,GAEfsD,EAAW5C,mBACX3B,EAAM4B,qBAAW9C,GACvB,EAAsCiD,mBAAS2B,EAAMO,aAArD,mBAAOA,EAAP,KAAoBH,EAApB,KACA,EAA2DlC,qBAAWjD,GAA9D6F,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,YAAaC,EAA7B,EAA6BA,UAAWC,EAAxC,EAAwCA,eAOlClD,EAAiB,SAACO,GAEf0C,EAAUvC,QAAQyC,SAAS5C,EAAUd,SAClCoD,IAAepD,GACf4C,EAAe,OAMrBnB,EAAiB,SAACnC,GAEpB,IAAMwB,EAAYzB,EAAYC,GAG9B,IAAKkE,EAAUvC,QAAQyC,SAAS5C,EAAUd,QAAS,CAC/CV,EAAEoC,iBACFpC,EAAE+B,kBACF/B,EAAE0B,2BAEF,IAAIjB,EAAKe,EAAS,GACdb,EAAOa,EAAS,KAChBZ,EAASY,EAAS,OAClBR,EAAgBQ,EAAS,cAK7B,GAFAsC,EAAatC,EAAS,OAET,MAATb,EAEAuC,EAAMmB,sBAAsB,CAAE3D,OAAQA,EAAQ4D,QAAS7D,EAAI8D,QAAQ,QAElE,CAEDrB,EAAMmB,sBAAsB,CAAE3D,OAAQ,GAAI4D,QAAS7D,EAAI8D,QAAQ,IAE/D,IAAIC,EAAW,cAAC,EAAD,CACX/D,GAAIA,EACJE,KAAMA,EACNE,SAAS,EACTD,OAAQA,EACRF,OAAQA,EACRM,cAAeA,EACfC,eAAgBA,IAIpBzB,EAAIiF,KAAK,cAAe,CACpBC,OAAQV,EAAOrC,QAAQ+C,OACvBlD,UAAW,CACPf,KACAE,OACAC,SACAF,SACAoD,aACA9C,gBACAH,SAAS,KAIjBsD,EAAe,GAAD,mBAAKF,EAAYtC,SAAjB,CAA0BjB,KACxC4C,EAAekB,MAKrBnC,EAAiB,SAACrC,GAAD,OAAOA,EAAEoC,kBAC1BE,EAAkB,SAACtC,GAAD,OAAOA,EAAEoC,kBAC3BG,EAAkB,SAACvC,GAAD,OAAOA,EAAEoC,kBAgCjC,OAzBAI,qBAAU,WAGN,OAFIwB,EAAOrC,QAAQgD,KAAMZ,EAASpC,QAAQc,iBAAiB,OAAQN,GAC9D4B,EAASpC,QAAQiD,oBAAoB,OAAQzC,GAC3C,kBAAM4B,EAASpC,QAAQiD,oBAAoB,OAAQzC,MAC3D,CAAC6B,EAAOrC,QAAQgD,OAEnBnC,qBAAU,WAGN,OAFIwB,EAAOrC,QAAQgD,KAAMZ,EAASpC,QAAQc,iBAAiB,WAAYJ,GAClE0B,EAASpC,QAAQiD,oBAAoB,WAAYvC,GAC/C,kBAAM0B,EAASpC,QAAQiD,oBAAoB,WAAYvC,MAC/D,CAAC2B,EAAOrC,QAAQgD,OAEnBnC,qBAAU,WAGN,OAFIwB,EAAOrC,QAAQgD,KAAMZ,EAASpC,QAAQc,iBAAiB,YAAaF,GACnEwB,EAASpC,QAAQiD,oBAAoB,YAAarC,GAChD,kBAAMwB,EAASpC,QAAQiD,oBAAoB,YAAarC,MAChE,CAACyB,EAAOrC,QAAQgD,OAEnBnC,qBAAU,WAGN,OAFIwB,EAAOrC,QAAQgD,KAAMZ,EAASpC,QAAQc,iBAAiB,YAAaH,GACnEyB,EAASpC,QAAQiD,oBAAoB,YAAatC,GAChD,kBAAMyB,EAASpC,QAAQiD,oBAAoB,YAAatC,MAChE,CAAC0B,EAAOrC,QAAQgD,OAIf,sBAAKlE,GAAIC,EAAQkC,IAAKmB,EAAUzD,UAAS,UAAKrD,EAAW4G,GAAhB,8FAAzC,UACqB,cAAfX,EAAMW,MAA0BJ,EAGrB,KAFT,qBAAKnD,UAAU,8BAAf,SACI,cAAC,IAAD,CAAMuE,KAAK,QAAQC,YAAY,IAAIpG,KAAM,OAEhD+E,QCpJE,SAASsB,EAAM7B,GAC1B,IAAQ8B,EAAQ5D,qBAAWjD,GAAnB6G,IAEJC,EACe,iBAAf/B,EAAMgC,KACA,qCACE,qBAAK5E,UAAU,wHAAf,SACI,qBAAKA,UAAU,yCAAf,SACI,sBAAKA,UAAU,uGAAf,UACI,sBAAKA,UAAU,4FAAf,UACI,oBAAIA,UAAU,yBAAd,qCAGA,qBAAKA,UAAU,6BAAf,4DAEJ,qBAAKA,UAAU,mDAAf,SAEQ6E,OAAOC,OAAOJ,EAAIrD,QAAQ0D,QAAQC,QAAO,SAACjC,GAAD,MAA2B,MAAhBA,EAAMA,SAAekC,KAAI,SAAClC,EAAOmC,GACjF,OACI,qBAAiBC,QAAS,kBAAMvC,EAAMwC,aAAarC,EAAMA,QAAQ/C,UAAU,YAA3E,SACI,cAAC,EAAD,CAAOK,KAAM0C,EAAMA,MAAOzC,OAAQ,KAD5B4E,eAUtC,qBAAKlF,UAAU,8CAGnB,qCACI,qBAAKA,UAAU,wHAAf,SACI,qBAAKA,UAAU,yCAAf,SACI,sBAAKA,UAAU,uGAAf,UACI,qBAAKA,UAAU,+FAAf,SACI,oBAAIA,UAAU,yBAAd,4CAIJ,qBAAKA,UAAU,mDAAf,SAEQ6E,OAAOC,OAAOJ,EAAIrD,QAAQ0D,QAAQE,KAAI,SAAClC,EAAOmC,GAC1C,OACI,sBAAiBlF,UAAU,YAA3B,UACI,cAAC,EAAD,CAAOS,UAAU,EAAMJ,KAAM0C,EAAMA,MAAOzC,OAAQyC,EAAMzC,SACxD,sBAAKN,UAAU,yCAAf,UACK+C,EAAMlE,OADX,aAFMqG,eAatC,qBAAKlF,UAAU,8CAG3B,OAAQ4C,EAAMyC,KAAOV,EAAQ,K,4CC9DjCW,IAAMC,SAASC,QAAU9I,EACzB4I,IAAMC,SAASE,QAAQC,KAAK,gBAAkB,mBAC9CJ,IAAMC,SAASE,QAAQE,OAAvB,+BAA2DnJ,GAE3D8I,IAAMM,aAAaC,QAAQC,KAAI,SAAAD,GAG3B,OAAOA,KACR,SAAAE,GAEC,OADAC,QAAQC,IAAIF,GACLG,QAAQC,OAAOJ,MAG1BT,IAAMM,aAAaQ,SAASN,KAAI,SAAAM,GAG5B,OAAOA,KACR,SAAAL,GAEC,OADAC,QAAQC,IAAIF,GACLG,QAAQC,OAAOJ,MAG1B,IAOeM,EAPW,SAACC,GAEvB,OAAOhB,IAAMgB,EAAKC,aAAaD,EAAKE,IAAKF,EAAKG,SACzCC,MAAK,SAAAC,GAAC,OAAIA,EAAEpH,QACZqH,OAAM,SAAAlH,GAAC,OAAIsG,QAAQC,IAAIvG,EAAEH,UCXlC,SAASsH,EAAYC,GACjB,MAAwB7F,mBAAS6F,GAAjC,mBAAKC,EAAL,KAAYC,EAAZ,KACI1E,EAAMzB,iBAAOkG,GASjB,MAAO,CAACA,EAPOE,uBAAY,SAAUC,GACjC5E,EAAIjB,QAAyB,oBAAR6F,EACjBA,EAAI5E,EAAIjB,SAAW6F,EAEvBF,EAAS1E,EAAIjB,WACd,IAEsBiB,GClB7B,IAAM6E,EAAa,GAkWJC,EAjWG,SAACxE,GAEf,IAAIyE,EAAO,GACLC,EAAWzG,iBAAO,IAElB3B,EAAM4B,qBAAW9C,GACvB,EAAuD6I,EAAY,CAAEzG,OAAQ,GAAI4D,QAAS,GAAIC,QAAQ,IAAtG,mBAAUF,GAAV,WAAiCwD,EAAjC,KACA,EAA6HzG,qBAAWjD,GAAhI6F,EAAR,EAAQA,OAAQ8D,EAAhB,EAAgBA,SAAU5D,EAA1B,EAA0BA,UAAW6D,EAArC,EAAqCA,YAAa9D,EAAlD,EAAkDA,YAAa+D,EAA/D,EAA+DA,eAAgB7D,EAA/E,EAA+EA,eAAgB8D,EAA/F,EAA+FA,WAAYC,EAA3G,EAA2GA,cAI3G1F,qBAAU,WAqCNjD,EAAkBC,EAAK,SAAUwE,EAAOrC,QAAQ7B,MApC/B,SAAC,GAAmB,IAAjB0B,EAAgB,EAAhBA,UACZgD,EAAW,cAAC,EAAD,CACX1D,UAAU,EACVL,GAAIe,EAAUf,GACdE,KAAMa,EAAUb,KAChBC,OAAQY,EAAUZ,OAClBF,OAAQc,EAAUd,OAClBG,QAASW,EAAUX,QACnBG,cAAeQ,EAAUR,gBAIzBQ,EAAU2G,WACN3G,EAAUd,SAAWwD,EAAUvC,QAAQyC,SAAS5C,EAAUd,UAE1D0H,EAAoB5G,EAAUd,QAC9ByD,EAAeF,EAAYtC,QAAQ2D,QAAO,SAAC+C,GAAD,OAASA,IAAQ7G,EAAUd,aAOrEc,EAAUsC,aACVsE,EAAoB5G,EAAUsC,YAC9BK,EAAeF,EAAYtC,QAAQ2D,QAAO,SAAC+C,GAAD,OAASA,IAAQ7G,EAAUsC,gBAGzEwE,EAAe9G,EAAUd,OAAQ8D,GAG5BR,EAAOrC,QAAQgD,MAAMR,EAAe,GAAD,mBAAKF,EAAYtC,SAAjB,CAA0BH,EAAUd,gBAMrF,CAACsD,EAAOrC,UAIXa,qBAAU,WAGNjD,EAAkBC,EAAK,eAAgBwE,EAAOrC,QAAQ7B,MADrC,SAACD,GAAD,OAAUqI,GAAc,QAE1C,CAAClE,EAAOrC,UAIXa,qBAAU,WACN,GAAIyF,EAAWtG,QAAS,CAAC,IAAD,gBACCsC,EAAYtC,SADb,IACpB,2BAA0C,CAAC,IAAhCjB,EAA+B,QACtC0H,EAAoB1H,IAFJ,8BAIpBwH,GAAc,GACd/D,EAAe,OAEpB,CAAC8D,EAAWtG,UAIfa,qBAAU,WACFsF,EAASnG,UACTqG,EAAeO,KACfR,GAAY,MAEjB,CAACD,EAASnG,UAIba,qBAAU,WACNoF,EAASjG,QAAU6G,MAAMb,EAAKc,OAAShB,GAClC5C,OAAOU,KAAI,SAACmD,EAAGC,GAAJ,OAAUf,EAASjG,QAAQgH,QAC5C,CAAChB,EAAKc,SAIT,IAzFyB,eAyFhBjD,GACL,IAAIoD,EAAW,GACXC,EAAWrD,EAAQiC,EAEvB,GAAc,IAAVjC,GAAyB,KAAVA,EACf,IAD8B,IAAD,WACpBmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,GAAiB,KAANA,IAAU/E,EAAW,gBAC1B,IAAN+E,GAAiB,IAANA,GAAiB,KAANA,IAAU/E,EAAW,cAC/C,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EACdtE,sBAAuBA,EAEvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IADtCF,EAAUF,GAGnBC,EAASI,KAAKF,IAXTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAcb,GAAc,IAAVnD,GAAyB,KAAVA,EACf,IAD8B,IAAD,WACpBmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,GAAiB,KAANA,IAAU/E,EAAW,cAC1B,IAAN+E,GAAiB,IAANA,IAAS/E,EAAW,gBACnC,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EACdtE,sBAAuBA,EAEvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IADtCF,EAAUF,GAGnBC,EAASI,KAAKF,IAXTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAcb,GAAc,IAAVnD,GAAyB,KAAVA,EACf,IAD8B,IAAD,WACpBmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,GAAiB,KAANA,IAAU/E,EAAW,cAC1B,IAAN+E,GAAiB,IAANA,IAAS/E,EAAW,gBACnC,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EACdtE,sBAAuBA,EAEvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IADtCF,EAAUF,GAGnBC,EAASI,KAAKF,IAXTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAcb,GAAc,IAAVnD,GAAyB,KAAVA,EACf,IAD8B,IAAD,WACpBmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,GAAiB,KAANA,IAAU/E,EAAW,cAC1B,IAAN+E,GAAiB,IAANA,GAAiB,KAANA,IAAU/E,EAAW,gBAC/C,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EACdtE,sBAAuBA,EAEvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IADtCF,EAAUF,GAGnBC,EAASI,KAAKF,IAXTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAcb,GAAc,IAAVnD,GAAyB,KAAVA,EACf,IAD8B,IAAD,WACpBmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,GAAiB,KAANA,IAAU/E,EAAW,cACpC,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EACdtE,sBAAuBA,EAEvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IADtCF,EAAUF,GAGnBC,EAASI,KAAKF,IAVTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAab,GAAc,IAAVnD,GAAyB,IAAVA,EACf,IAD6B,IAAD,WACnBmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,GAAiB,IAANA,GAAiB,IAANA,GAAiB,KAANA,IAAU/E,EAAW,gBAC1D,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EACdtE,sBAAuBA,EAEvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IADtCF,EAAUF,GAGnBC,EAASI,KAAKF,IAVTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAab,GAAc,IAAVnD,GAAyB,IAAVA,EACf,IAD6B,IAAD,WACnBmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,GAAiB,IAANA,GAAiB,IAANA,GAAiB,KAANA,IAAU/E,EAAW,gBAC1D,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EACdtE,sBAAuBA,EAEvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IADtCF,EAAUF,GAGnBC,EAASI,KAAKF,IAVTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAab,GAAc,IAAVnD,EACA,IADc,IAAD,WACJmD,GACL,IAAI/E,EAAW,SACL,IAAN+E,IAAS/E,EAAW,aACd,IAAN+E,GAAiB,KAANA,IAAU/E,EAAW,cAC1B,IAAN+E,GAAiB,KAANA,IAAU/E,EAAW,gBACpC,IAAIkF,EAAO,cAAC,EAAD,CACPjF,KAAMD,EACNnD,GAAIoI,EAAUF,EAEdtE,sBAAuBA,EACvBzB,IAAK,SAAAmG,GAAE,OAAInB,EAASjG,QAAQkH,EAAUF,GAAKI,IAFtCF,EAAUF,GAInBC,EAASI,KAAKF,IAZTH,EAAI,EAAGA,EAAIlB,EAAYkB,IAAM,EAA7BA,GAiBbhB,EAAKqB,KAAK,sBAAK1I,UAAU,0BAAf,cAAuDsI,EAAvD,MAA8CpD,KA5HnDA,EAAQ,EAAGA,EAAQiC,EAAYjC,IAAU,EAAzCA,GAgIT,IAAMyD,EAAU,SAACC,GAAD,OAActB,EAASjG,QAAQuH,IACzCd,EAAsB,SAACc,GAAD,OAAcD,EAAQC,GAAU3F,eACtD+E,EAAiB,SAACY,EAAU7F,GAAX,OAAqB4F,EAAQC,GAAU9F,SAASC,IAKjE8F,EAAc,SAACC,EAAU5D,GAC3B,MAAiB,QAAb4D,EACO5D,GAAS,GAAKA,EAAQ,GAEX,WAAb4D,EACE5D,EAAQ,KAAOA,EAAQ,IAEZ,SAAb4D,EACG5D,EAAQ,KAAQ,EAGhBA,EAAQ,KAAQ,IAM1B+C,EAAiB,WACnB,IAAIc,EAAIC,EADiB,EACbC,EAAQ,GADK,cAGDtF,EAAYtC,SAHX,IAGzB,2BAA6C,CAAC,IAAnC6H,EAAkC,QACrCzF,EAAWkF,EAAQO,GAAW7F,WAG9B8F,EAAWC,EAAoBF,EAAW,OAC1CG,EAAYD,EAAoBF,EAAW,QAC3CI,EAAYF,EAAoBF,EAAW,UAC3CK,EAAaH,EAAoBF,EAAW,SAIhDH,EAAE,sBAAOI,GAAP,CAAiB1F,GAAjB,YAA8B6F,IAChCN,EAAE,sBAAOK,GAAP,CAAkB5F,GAAlB,YAA+B8F,IAG7BR,EAAGZ,OAAS,GAAGc,EAAMP,KAAKK,GAC1BC,EAAGb,OAAS,GAAGc,EAAMP,KAAKM,IAnBT,8BAuBzB,OAAOC,EAAMjE,QAAO,SAACwE,EAAGnB,EAAGoB,GAAP,OAAaA,EAAEC,WAAU,SAAAC,GAAC,OAAKhK,KAAKgC,UAAUgI,KAAOhK,KAAKgC,UAAU6H,QAASnB,MAK/Fe,EAAsB,SAAClE,EAAO4D,GAChC,IAAIc,EAAKC,EAAYZ,EAAQ,GAK7B,GAHiDY,EAAhC,UAAbf,GAAqC,SAAbA,EAAkC,EAC5C,GAEdD,EAAYC,EAAU5D,GAAQ,OAAO+D,EAEzC,OAAa,CAKT,IAAIT,EAAOG,EAHwCiB,EAAlC,UAAbd,GAAqC,WAAbA,EAA6B5D,EAAQ2E,EACtD3E,EAAQ2E,GAInB,IAAIrB,EAAKtF,WAcJ,MAFD,GATiB,UAAb4F,GAAqC,WAAbA,EAAuBG,EAAMP,KAAKF,EAAKnF,YAC9D4F,EAAMa,QAAQtB,EAAKnF,YAEyBwG,GAAhC,UAAbf,GAAqC,SAAbA,EAAmC,EAC5C,GAKfD,EAAYC,EAAUc,GAAM,MAKxC,OAAOX,GA2CX,OACI,sBAAKjJ,UAAU,aAAf,UACI,sBAAKwC,MAAO,CAAEuH,OAAQ,eAAiB/J,UAAU,yCAAjD,cAA4FqH,EAA5F,OACA,cAAC,EAAD,IACA,cAAC5C,EAAD,CAAOW,aA1CM,SAACrC,GAGlB,IAAIiH,EAAwB,cAAC,EAAD,CAExB1J,OAAQ,EACRD,KAAM0C,EACNxC,SAAS,EACTG,eAAe,EACfP,GAAIoH,EAAmBlG,QAAQ2C,QAC/B5D,OAAQmH,EAAmBlG,QAAQjB,SAIvC4H,EAAeT,EAAmBlG,QAAQjB,OAAQ4J,GAGlDnG,EAAe,GAAD,mBAAKF,EAAYtC,SAAjB,CAA0BkG,EAAmBlG,QAAQjB,UAGnElB,EAAIiF,KAAK,cAAe,CACpBC,OAAQV,EAAOrC,QAAQ+C,OACvBlD,UAAW,CACPZ,OAAQ,EACRD,KAAM0C,EACNxC,SAAS,EACTG,eAAe,EACfP,GAAIoH,EAAmBlG,QAAQ2C,QAC/B5D,OAAQmH,EAAmBlG,QAAQjB,UAK3C2D,EAAsB,CAAE3D,OAAQ,GAAI4D,QAAS,GAAIC,QAAQ,KASlBW,KAAK,eAAeS,KAAMkC,EAAmBlG,QAAQ4C,a,kBC5RrFgG,EArEI,SAACrH,GAChB,IAAIsH,EAAMC,EAGV,EAAwBlJ,mBAAS,GAAjC,mBAAOmJ,EAAP,KAAaC,EAAb,KACA,EAA4BpJ,mBAAS,MAArC,mBAAOgD,EAAP,KAAeqG,EAAf,KACA,EAA4CrJ,qBAA5C,mBAAOsJ,EAAP,KAAuBC,EAAvB,KAIAtI,qBAAU,WACN,IAAIuI,EAAMC,aAAY,WAClBC,MAdM,KAkBV,OADAH,EAAkBC,GACX,kBAAMG,cAAcL,MAE5B,IAIH,IAAMI,EAAU,uCAAG,kCAAAlB,EAAA,6DACXoB,EAAY,IAAIC,KADL,SAIMzE,EAAkB,CAAEE,YAAa,MAAOC,IAAI,QAAUC,QAAS,KAJrE,QAIXL,EAJW,SAOqB,gBAApBA,EAASnC,QACjB8G,EAAU,IAAID,KAEdE,EAAeD,EAAQE,UAAYJ,EAAUI,UACjDZ,EAAQW,GAGgBV,EAApBU,EAAe,IAAe,KACzBA,EAAe,IAAe,UACxB,QAEdV,EAAU,OAlBA,2CAAH,qDAoChB,MAbe,OAAXrG,GACAkG,EAAa,qBACbD,EAAO,cAAC,IAAD,CAAM9L,KAlDJ,GAkDoB8M,MAAM,aAEnB,QAAXjH,GACLkG,EAAa,2CACbD,EAAO,cAAC,IAAD,CAAS9L,KAtDP,GAsDuB8M,MAAM,cAGtChB,EAAO,cAAC,IAAD,CAAM9L,KAzDJ,GAyDoB8M,MAAM,YACnCf,EAAa,wCAIb,qBAAKnK,UAAU,gCAAf,SACI,sBAAKA,UAAU,iBAAf,UACI,qBAAKC,MAAOkK,EAAYnK,UAAU,wBAAlC,SAA2DkK,IAC3D,sBAAKjK,MAAM,cAAcD,UAAU,sCAAnC,UAA0EoK,EAA1E,c,kBCxBDe,EAtCI,WAEf,MAA6BtE,EAAY,IAAzC,mBAAUuE,GAAV,WAAoBC,EAApB,KACA,EAA4BvK,qBAAWjD,GAA/B6F,EAAR,EAAQA,OAAQ4H,EAAhB,EAAgBA,QAkBhB,OAhBApJ,qBAAU,WACN,IADY,EACRqJ,EAAY,GADJ,cAEaD,EAAQjK,QAAQmK,WAF7B,IAEZ,2BAAoD,CAAC,IAAD,yBAAxCtG,EAAwC,KAAjCuG,EAAiC,KAC5CC,EAAW,+BACX,qBAAI1L,UAAS,sCAAiCyL,EAAEpH,KAAO,YAAc,GAAxD,yDAAb,UACKoH,EAAEjM,KACH,sBAAMQ,UAAU,cAAhB,SAA+B0D,EAAOrC,QAAQ7B,OAASiM,EAAEjM,KAAO,uBAAMS,MAAK,qBAAgBwL,EAAEpH,KAAO,gCAAkC,IAAtE,UAA4E,cAAC,IAAD,CAAMpE,MAAM,MAAM7B,KAAM,GAAI4B,UAAU,cAAcuE,KAAK,QAAQC,YAAa,IAA1J,OAA0K,OAC1O,sBAAMxE,UAAU,SAAhB,SAA0ByL,EAAEE,WAAa,uBAAM1L,MAAM,qCAAZ,cAAkD,cAAC,IAAD,CAAO7B,KAAM,GAAI4B,UAAU,mBAA0B,UAEpJ,oBAAIA,UAAU,8DAAd,SAA6EpB,EAAQ6M,EAAEG,WANnE1G,GAQxBqG,EAAU7C,KAAKgD,IAXP,8BAaZN,EAASG,KACV,CAAC7H,EAAOrC,QAASiK,EAAQjK,UAGxB,qBAAKrB,UAAU,mBAAf,SACI,wBAAOA,UAAU,kBAAjB,UACI,gCACI,qBAAIA,UAAU,cAAd,UACI,oBAAIA,UAAU,4DAAd,oBACA,oBAAIA,UAAU,kDAAd,wBAGR,gCACKqL,EAAMhK,gB,kBCeZwK,EAhDM,SAACjJ,GAGlB,IAAQkJ,EAAkBhL,qBAAW5C,GAA7B4N,cACR,EAA2DjF,EAAY,IAAvE,mBAAUkF,GAAV,WAAmCC,EAAnC,KAyCA,OAvCA9J,qBAAU,WAAO,IAAD,gBACwB4J,EAAczK,QAAQmK,WAD9C,IACZ,2BAAqE,CAAC,IAAD,yBAAzDtG,EAAyD,KAAlD+G,EAAkD,KAE7D5J,OAAU,EAAE6J,OAAQ,EAEE,SAAtBD,EAAa1I,MACb2I,EAAW,cAAC,IAAD,CAAa9N,KAAM,KAC9BiE,EAAa,iGAEc,YAAtB4J,EAAa1I,MAClB2I,EAAW,cAAC,IAAD,CAAM9N,KAAM,KACvBiE,EAAa,oGAEc,UAAtB4J,EAAa1I,MAClB2I,EAAW,cAAC,IAAD,CAAa9N,KAAM,KAC9BiE,EAAa,8FAEc,YAAtB4J,EAAa1I,MAClB2I,EAAW,cAAC,IAAD,CAAa9N,KAAM,KAC9BiE,EAAa,wGAGb6J,EAAW,cAAC,IAAD,CAAM9N,KAAM,KACvBiE,EAAa,oGAGjB,IAAI8J,EAAkB,gCAClB,sBAAKnM,UAAWqC,EAAhB,UACI,sBAAMrC,UAAU,cAAhB,SAA+BkM,IAC/B,sBAAMlM,UAAU,mBAAhB,SAAoCiM,EAAaG,aAErD,qBAAKpM,UAAU,WALakF,GAShC6G,EAAwB,CAACI,KAnCjB,iCAqCb,CAACL,EAAczK,UAEV2K,EAAqB3K,S,4BC7ClB,SAASgL,GAAUzJ,GAE9B,IAAM0J,EAAezL,iBAAO,IAC5B,EAAyCgG,GAAY,GAArD,mBAAU0F,GAAV,WAA0BC,EAA1B,KAGAtK,qBAAU,WACNoK,EAAajL,QAAU6G,MAAMtF,EAAMmC,OAAOoD,QACrC5D,OAAOU,KAAI,SAACmD,EAAGC,GAAJ,OAAUiE,EAAajL,QAAQgH,QAChD,CAACzF,EAAMmC,OAAOoD,SAGjB,IAAMsE,EAAiB,SAAC/M,GACD4M,EAAajL,QAAQ2D,QAAO,SAAC0H,GAAD,OAAmC,IAArBA,EAASC,WACrDxE,OAAS,EAAGoE,GAAe,GACvCA,GAAe,IAYxB,OAAO3J,EAAMyC,KAAO,qCAChB,qBAAKrF,UAAU,wHAAf,SACI,qBAAKA,UAAU,yCAAf,SACI,sBAAKA,UAAU,uGAAf,UACI,sBAAKA,UAAU,4FAAf,UACI,oBAAIA,UAAU,yBAAd,wCAGA,qBAAKA,UAAU,6BAAf,gEAEJ,sBAAKA,UAAU,sEAAf,UACI,qBAAKA,UAAU,4BAAf,SACI4C,EAAMmC,OAAOE,KAAI,SAAClC,EAAOmC,GACrB,OACI,sBAAiBlF,UAAU,iBAA3B,UACI,cAAC,EAAD,CAAOS,UAAU,EAAMJ,KAAM0C,EAAMA,MAAOzC,OAAQyC,EAAMzC,SACxD,qBAAKN,UAAU,yCAAf,SACI,uBAAOA,UAAU,2BAAjB,SACI,uBAAO4M,SAAUH,EAAgBtM,GAAI4C,EAAM5C,GAAImC,IAAK,SAAAmG,GAAE,OAAI6D,EAAajL,QAAQ6D,GAASuD,GAAIlF,KAAK,mBAJnG2B,QAYtB,sBAAKlF,UAAU,4BAAf,UACI,yBAAQmF,QAAS,WAAQoH,GAAe,GAAQ3J,EAAMiK,qBAAuB7M,UAAU,uGAAvF,UACI,cAAC,IAAD,CAAGA,UAAU,SAASwE,YAAa,EAAGpG,KAAM,KAC5C,sBAAM4B,UAAU,oBAAhB,uBAEHwM,EAAYnL,QAAU,yBAAQ8D,QAAS,WAAQvC,EAAMkK,mBAvCnD,WACvB,IAD6B,EACzBC,EAAe,GADU,cAENT,EAAajL,SAFP,IAE7B,2BAA6C,CAAC,IAAnCqL,EAAkC,SAChB,IAArBA,EAASC,SAAkBI,EAAarE,KAAKgE,EAASvM,KAHjC,8BAK7B,OAAO4M,EAkCsFC,KAAyBhN,UAAU,sGAArF,UACnB,cAAC,KAAD,CAAOA,UAAU,SAASwE,YAAa,EAAGpG,KAAM,KAChD,sBAAM4B,UAAU,oBAAhB,wBACQ,kBAMhC,qBAAKA,UAAU,8CACb,K,gECtEJiN,GAAe,CACjB,KAAQ,eACR,QAAW,yBACX,OAAU,uBACV,KAAQ,+BACR,KAAQ,YACR,KAAQ,kBAoCGC,GAjCO,SAAC,GAA6B,IAC5ChD,EAAMlK,EADWuD,EAA0B,EAA1BA,KAAMnF,EAAoB,EAApBA,KAAM+O,EAAc,EAAdA,QAK7BnN,EADS,SAATuD,EACY,kLAEE,SAATA,EACO,wMAGA,kKAIH,WAATA,EAAmB2G,EAAO,cAAC,KAAD,CAAW1F,YAAY,MAAMpG,KAAMA,IAC/C,SAATmF,EAAiB2G,EAAO,cAAC,KAAD,CAAM3F,KAAK,QAAQC,YAAY,MAAMpG,KAAMA,IAC1D,YAATmF,EAAoB2G,EAAO,cAAC,KAAD,CAAS1F,YAAY,MAAMpG,KAAMA,IACnD,SAATmF,EAAiB2G,EAAO,cAAC,KAAD,CAAQ1F,YAAY,MAAMpG,KAAMA,IAC/C,SAATmF,EAAiB2G,EAAO,cAAC,KAAD,CAAa1F,YAAY,MAAMpG,KAAMA,IACpD,SAATmF,IAAiB2G,EAAO,QAED,UAAKlK,GAChC,KAGL,OACI,wBAAQC,MAAOgN,GAAa1J,GAAOvD,UAAS,UAAKA,GAAamF,QAASgI,EAAvE,SACKjD,K,6BCsDEkD,GAtFD,WACV,MAKIC,iCAAsB,CAAEC,MAAO,CAAE/J,KAAM,aAAegK,sBAAsB,IAJ5EC,EADJ,EACIA,aACAC,EAFJ,EAEIA,aACAC,EAHJ,EAGIA,cACAC,EAJJ,EAIIA,eAIEzO,EAAM4B,qBAAW9C,GACvB,EAAiC6I,GAAY,GAA7C,mBAAU+G,GAAV,WAAsBC,EAAtB,KACA,EAAsChH,EAAY,MAAlD,mBAAWiH,GAAX,WAAyBC,EAAzB,KACA,EAA2ClH,EAAY,IAAvD,mBAAYmH,GAAZ,WAA4BC,EAA5B,KACA,EAAmDnN,qBAAWjD,GAAtD6F,EAAR,EAAQA,OAAQwK,EAAhB,EAAgBA,UAAW5C,EAA3B,EAA2BA,QAAS6C,EAApC,EAAoCA,WAqDpC,OAxCAjM,qBAAU,WACD2L,EAAQxM,SAKTqM,IACAQ,EAAU,2BAAKxK,EAAOrC,SAAb,IAAsBsK,YAAY,OAZ/C8B,IACAE,IACAD,IAMIQ,EAAU,2BAAKxK,EAAOrC,SAAb,IAAsBsK,YAAY,MAO/CzM,EAAIiF,KAAK,aAAc,CACnB4J,UAAWP,EACXpJ,OAAQV,EAAOrC,QAAQ+C,OACvB6J,YAAavK,EAAOrC,QAAQ7B,KAC5BmM,WAAYjI,EAAOrC,QAAQsK,eAGhC,CAAC6B,EAAcK,EAAQxM,UAG1Ba,qBAAU,WACNhD,EAAII,GAAG,qBAAqB,SAACC,GAEzB,IAFkC,EAE9B6O,EAAiB,GAFa,cAGlB9C,EAAQjK,SAHU,IAGlC,2BAAiC,CAAC,IAAvBoK,EAAsB,QACzBlM,EAAK0O,cAAgBxC,EAAEjM,OACnBD,EAAKoM,WAAYF,EAAC,YAAiB,EAClCA,EAAC,YAAiB,GAE3B2C,EAAe1F,KAAK+C,IARU,8BAWlCqC,EAAa,MACbK,EAAWC,GACXN,EAAavO,EAAKwO,WAClBC,EAAezO,EAAK0O,kBAEzB,IAIC,gCACI,wBACIhO,MAAO4N,EAAQxM,QAAU,6BAA+B,oCACxD8D,QAtDY,YACA,IAApB0I,EAAQxM,QAAoBuM,GAAW,GAAQA,GAAW,IAsDlD5N,UAAU,kKAHd,SAIK6N,EAAQxM,QAAU,cAAC,KAAD,CAAQ6J,MAAM,QAAQ1G,YAAY,MAAMpG,KAAM,KAAS,cAAC,KAAD,CAAK8M,MAAM,QAAQ1G,YAAY,MAAMpG,KAAM,QAIvHsF,EAAOrC,QAAQsK,YACVoC,EAAU1M,SACV4M,EAAY5M,UAAYqC,EAAOrC,QAAQ7B,KACxC,uBAAOQ,UAAU,SAASqO,IAAKN,EAAU1M,QAASiN,UAAQ,IAC1D,SCtDHC,GAzBE,SAAC3L,GACd,MAA4C9B,qBAAWjD,GAA/C6F,EAAR,EAAQA,OAAQ8K,EAAhB,EAAgBA,YAAaC,EAA7B,EAA6BA,WAC7B,EAA+C5H,EAAY,IAA3D,mBAAU6H,GAAV,WAA6BC,EAA7B,KAeA,OAbAzM,qBAAU,WACN,IADY,EACR0M,EAAU,GADF,cAGgB,CAAC,SAAU,UAAW,OAAQ,OAAQ,QAAQpD,WAH9D,IAGZ,2BAAqF,CAAC,IAAD,yBAAzEtG,EAAyE,KAAlE3B,EAAkE,KACjFqL,EAAQlG,KAAK,cAAC,GAAD,CAAeyE,QAASvK,EAAMW,GAAmBA,KAAMA,EAAMnF,KAXrE,IAWkD8G,KAJ/C,8BAORxB,EAAOrC,QAAQwN,SAAWL,EAAYnN,SACtCuN,EAAQlG,KAAK,cAAC,GAAD,CAAeyE,QAASvK,EAAMkM,KAAcvL,KAAM,OAAQnF,KAflE,IAeiD,IAE1DsQ,EAAkBE,KACnB,CAACJ,EAAYnN,QAASqC,EAAOrC,UAG5B,sBAAKrB,UAAU,yDAAf,UACKyO,EAAWpN,QAAU,cAAC,GAAD,IAAY,KACjCsN,EAAetN,Y,UCVb0N,GAbH,SAAC,GAAa,IfyBPlQ,EezBJ6F,EAAU,EAAVA,IAEX,EAA2CmC,GAAY,GAAvD,mBAAUmI,GAAV,WAA2BC,EAA3B,KAEA,OACI,sBAAKhP,MAAK,UAAKyE,EAAIyD,OAAT,qBAAoChD,QAAS,kBAAM6J,GAAiBC,EAAa5N,UAAUrB,UAAU,2BAA/G,UACI,qBAAKA,UAAU,YAAf,SAA2B,cAAC,KAAD,CAAaA,UAAU,iBAAiBuE,KAAK,OAAOnG,KAAM,OACrF,qBAAK4B,UAAU,iDAAf,UfkBOnB,EelBoE6F,EAAIyD,OfmBhF,cAAC,IAAD,CAASrJ,MAAOD,EAAS,EAAGE,IAAKF,EAAQG,SAAU,SelBlD,cAACyF,EAAD,CAAOY,KAAM4J,EAAa5N,cCitBvB6N,GAltBF,SAACtM,GAEV,IAAMuM,EAAWtO,mBACjB,EAAoCgG,EAAY,GAAhD,mBAAWuI,GAAX,WAAwBC,EAAxB,KACA,EAAmCxI,EAAY,IAA/C,mBAAUyI,GAAV,WAAqBC,EAArB,KACA,EAAsC1I,GAAY,GAAlD,mBAAW2I,GAAX,WAAyBC,EAAzB,KACA,EAA2C5I,EAAY,IAAvD,mBAAY6I,GAAZ,WAA4BC,EAA5B,KACA,EAAiD9I,EAAY,IAA7D,mBAAY+I,GAAZ,WAA6BC,EAA7B,KAEM3Q,EAAM4B,qBAAW9C,GACfgD,EAAiBF,qBAAW7C,GAA5B+C,aACR,EAA4CF,qBAAW5C,GAA/C4N,EAAR,EAAQA,cAAegE,EAAvB,EAAuBA,iBACvB,EAAwJhP,qBAAWjD,GAA3J6F,EAAR,EAAQA,OAAQwK,EAAhB,EAAgBA,UAAWxJ,EAA3B,EAA2BA,IAAKgD,EAAhC,EAAgCA,eAAgBD,EAAhD,EAAgDA,YAAa+G,EAA7D,EAA6DA,YAAauB,EAA1E,EAA0EA,WAAYpM,EAAtF,EAAsFA,YAAaqM,EAAnG,EAAmGA,YAAapM,GAAhH,EAAgHA,UAAWqM,GAA3H,EAA2HA,UAAWrI,GAAtI,EAAsIA,cACtI,GAAuCf,EAAYkJ,EAAW1O,SAA9D,qBAAY6O,IAAZ,aAA0BC,GAA1B,MAIAjO,qBAAU,WAAM,4CACZ,sBAAAuH,EAAA,yDACsC,IAA9B8F,EAAWlO,QAAQ8G,OAD3B,4BAEQmH,EAFR,SAEwBc,GAAW,GAFnC,8EADY,uBAAC,WAAD,wBAMZC,KACD,IAIHnO,oBAAS,sBAAC,kCAAAuH,EAAA,0DACFwG,GAAU5O,QADR,gBAEEuK,EAAQlI,EAAOrC,QAAQuK,MAFzB,cAKkB2D,EAAWlO,SAL7B,IAKF,2BAAW0B,EAAX,QAAwC6I,GAAS7I,EAAMzC,OALrD,8CAOmB+F,EAAkB,CACnCE,YAAa,OACbC,IAAK,UACLC,QAAS,CACLmF,MAAOA,EACPpM,KAAMkE,EAAOrC,QAAQ7B,KACrB4E,OAAQV,EAAOrC,QAAQ+C,UAb7B,OAgBsB,YAhBtB,OAgBWH,QAAsBiK,EAAU,2BAAKxK,EAAOrC,SAAb,IAAsBgD,MAAM,KAhBtE,2CAkBP,CAAC4L,GAAU5O,UAIda,oBAAS,sBAAC,sCAAAuH,EAAA,2DACFuG,EAAY3O,QAAQ8G,OAAS,GAD3B,sBAKEkH,EAAShO,SAAW,GALtB,uBAMEiP,KACAlB,EAAY,GAPd,iCAYEmB,EAAiBP,EAAY3O,QAAQ4D,KAAI,SAAAuL,GAAI,OAAIA,EAAKvL,KAAI,SAAA5E,GAAI,OAAIA,EAAKA,QAAMoQ,KAAK,OAZpF,SAemBC,GAAoBH,GAfvC,UAiBsB,WAFpBnK,EAfF,QAiBWnC,OAjBX,iBAmBEmL,EAAYC,EAAShO,QAAU,GAE/ByO,EAAiB,CAAC,CACdvM,KAAM,QACN6I,QAAShG,EAASgG,WAvBxB,+BA4BMuE,EAAoC,IAAvBjM,EAAIrD,QAAQ8G,OAGzByI,EAA4C,IAA9BrB,EAAWlO,QAAQ8G,OAGjC0I,EAAaC,GAAcP,EAAgBV,EAAiBxO,SAC5DuK,EAAQmF,GAAaf,EAAY3O,QAA6C,IAApCwO,EAAiBxO,QAAQ8G,QAnCzE,UAsCQ6I,GAAWnB,EAAiBxO,QAAQ8G,QAtC5C,QAyCEyH,EAAgB,IAGhB1Q,EAAIiF,KAAK,YAAa,CAClByH,MAAOA,EACP4E,KAAMK,EACNF,WAAYA,EACZC,YAAaA,EACbpR,KAAMkE,EAAOrC,QAAQ7B,KACrB4E,OAAQV,EAAOrC,QAAQ+C,SAI3BwG,cAAc+E,EAAYtO,SAE1BqG,EAAe,IACf0H,EAAY,GAzDd,4CA4DP,CAACY,EAAY3O,UAIhBa,qBAAU,WAKN,GAHAgO,GAAaH,EAAW1O,SAGpB0O,EAAW1O,SAAWqC,EAAOrC,QAAQgD,KAAM,CAC3C,IAAI4M,EAAavG,aAAY,WAEC,IAAtByF,GAAU9O,QAAeiP,KACxBJ,GAAaC,GAAU9O,QAAU,KACvC,KAGH,OADAqO,EAAeuB,GACR,kBAAMrG,cAAc+E,EAAYtO,aAE5C,CAACqC,EAAOrC,QAAQgD,OAMnB,IAAMyM,GAAgB,SAACd,EAAakB,GAChC,IAAIL,EAD6C,EACjCM,EAAa,EADoB,cAG9BnB,GAH8B,IAGjD,2BAAgC,CAAC,IAAD,EAArBQ,EAAqB,QACxBlQ,EAAS,EADe,cAER4Q,GAFQ,IAE5B,2BAAkC,CAAC,IAAxBnO,EAAuB,QAC1ByN,EAAK1M,SAASf,EAAMA,SAAQzC,GAAU,IAHlB,8BAMxBA,EAAS6Q,IACTN,EAAaL,EACbW,EAAa7Q,IAX4B,8BAcjD,OAAOuQ,GAKLE,GAAe,SAACf,EAAaoB,GAE/B,IAF2C,EAEvCC,EAAa,EAF0B,cAKxBrB,GALwB,IAK3C,2BAAgC,CAAC,IAAD,EAArBQ,EAAqB,QAExB5E,EAAQ,EAAG0F,EAAM,EAFO,cAKTd,GALS,IAK5B,2BAAyB,CAAC,IAAfnQ,EAAc,QACjBkR,EAAa,EACbC,EAAanR,EAAKD,OAClBqR,EAAepR,EAAKiD,SAGpBM,GAAUvC,QAAQyC,SAAS0N,GAC3BD,EAAalR,EAAKC,OAIG,iBAAjBmR,EACAF,EAA2B,EAAdlR,EAAKC,OAEI,eAAjBmR,GAAkD,cAAjBA,GACtCH,GAAO,EACPC,EAAalR,EAAKC,QAEI,eAAjBmR,GACLH,GAAO,EACPC,EAAalR,EAAKC,QAGlBiR,EADsB,iBAAjBE,EACsB,EAAdpR,EAAKC,OAGJD,EAAKC,OAG3BsL,GAAS2F,GAlCe,8BAwC5BF,GAHAzF,GAAS0F,GA1C8B,8BAmD3C,OAFAD,EAAaD,EAAUC,EAAa,GAAKA,GAOvCX,GAAmB,uCAAG,WAAOH,GAAP,eAAA9G,EAAA,sEACHpD,EAAkB,CACnCG,IAAK,YACLD,YAAa,OACbE,QAAS,CAAEwC,MAAOsH,KAJE,cACpBnK,EADoB,yBAOjBA,GAPiB,2CAAH,sDAYnBgK,GAAU,uCAAG,WAAOsB,GAAP,2BAAAjI,EAAA,sEACMpD,EAAkB,CACnCI,QAAS,GACTF,YAAa,MACbC,IAAI,QAAD,OAAUkL,EAAV,mBAA2BhO,EAAOrC,QAAQ+C,UAJlC,OAOf,IANIgC,EADW,OAMXuL,EAAiBvL,EAAQ,OAC7B,MAA6BvB,OAAO2G,QAAQmG,GAA5C,eAA8D,EAAD,oBAAjDzM,EAAiD,MAA1CnC,EAA0C,MACpD,GAAL,UAAiBmC,EAAjB,YAA0BnC,EAAM5C,IARrB,yBAURwR,GAVQ,2CAAH,sDAcVX,GAAU,uCAAG,WAAOU,GAAP,qBAAAjI,EAAA,sEACI2G,GAAWsB,GADf,OACX3M,EADW,qBAEKA,GAFL,IAEf,2BAAWhC,EAAX,QAA4B6O,GAAY7O,GAFzB,yEAAH,sDAOVpC,GAAiB,SAACO,GACpB,IAAIiC,EAAc0O,GAAU3Q,EAAWqO,EAAWlO,SAClDyQ,GAAsB3O,GACtB4O,GAAkB5O,IAGhB2O,GAAwB,SAAC3O,GAC3B,IAAI6O,EAAkBzC,EAAWlO,QAAQ2D,QAAO,SAAAjC,GAAK,OAAIA,EAAM5C,KAAOgD,EAAYhD,MAClFmP,EAAU,YAAI0C,KAYZC,GAAa,SAACzJ,GAEhB,OADAA,GAAQ,EACD0J,KAAKC,KAAK3J,EAAO,KAkDtBsE,GAAkB,uCAAG,WAAOsF,GAAP,uBAAA3I,EAAA,2DACnB2I,EAAWjK,OAAS,GADD,gBAEfkK,EAAgB,GAFD,cAKFD,GALE,IAKnB,2BAAWjS,EAAkB,QACrBmS,EAAcC,GAAcpS,EAAIoP,EAAWlO,SAC/CyQ,GAAsBQ,GACtBD,EAAc3J,KAAK4J,GARJ,qCAYnB1H,cAAc+E,EAAYtO,SAE1BmO,GAAa,GAdM,SAiBbwB,GAAWoB,EAAWjK,QAjBT,OAoBnBjJ,EAAIiF,KAAK,YAAa,CAClBkO,gBACAG,eAAe,EACfhT,KAAMkE,EAAOrC,QAAQ7B,KACrB4E,OAAQV,EAAOrC,QAAQ+C,SAxBR,2CAAH,sDA4DlBqO,GAAoB,SAAC9O,EAAa+O,EAAcC,GAClD,IADoE,EAChEC,GAAQ,EACRC,EAAY,EAGZC,EAlCoB,SAACtK,EAAMmK,EAAehP,GAS9C,IARA,IAAImP,EAAQ,GAAIC,EAAW,GACvBC,EAA2B,eAAlBL,EAAiCV,GAAWzJ,GAhFvC,SAACA,GAEnB,OADAA,GAAQ,GACM,GA8EmDyK,CAAczK,GAE3EqB,EAA+B,eAAlB8I,EAAiC,EAAI,GAClD7V,EAA8B,eAAlB6V,EAAgD,IAAdK,EAAS,GAAUA,EAAS,EAIrE3K,EAAI,EAAGA,EAAI,GAAIA,IAEhB1E,EAAYG,SAAShH,IAAYgW,EAAMpK,KAAK5L,GAGhDiW,EAASrK,KAAK5L,GACdA,GAAa+M,EAGjB,IAAIqJ,EAAQH,EAASI,QAAQL,EAAM,IAC/BM,EAAOL,EAASI,QAAQL,EAAMA,EAAM3K,OAAS,IAIjD,OAAO4K,EAASvV,MAAM0V,EAAOE,EAAO,GAWxBC,CAFG1P,EAAYA,EAAYwE,OAAS,GAENwK,EAAehP,GALW,cASjDmP,GATiD,IASpE,2BAA0B,CAAC,IAAhBtK,EAAe,QACtB,IAAK5E,GAAUvC,QAAQyC,SAAS0E,KAAU7E,EAAYG,SAAS0E,GAE3D,OADAoK,GAAQ,GAXoD,kDAiBjDjP,GAjBiD,IAiBpE,2BAAgC,CAAC,IAEzB2P,EAAQC,EAAUC,EAAUC,EAFzBjL,EAAqB,QACxBkL,EAAc,GAIlBF,EAAWhL,EAAO,EAClB+K,EAAW/K,EAAO,GAClBiL,EAAYjL,EAAO,GAHnB8K,EAAS9K,EAAO,KAKF,GAAGkL,EAAYhL,KAAK4K,GAC9BE,GAAY,GAAGE,EAAYhL,KAAK8K,GAEhCD,GAAY,KAAKG,EAAYhL,KAAK6K,GAClCE,GAAa,KAAMC,EAAYhL,KAAK+K,GAGxCC,EAAYC,SAAQ,SAACC,IAEZlB,GAAgB9O,GAAUvC,QAAQyC,SAAS8P,KAASf,GAAa,OAnCV,8BA0CpE,OAFKH,GAAgBG,EAAY,IAAGD,GAAQ,GAErCA,GAKLiB,GAAuB,SAAClQ,EAAa+O,GACvC,IAAIC,EAtJiB,SAAChP,GAKtB,IAAIgP,EACAmB,GAHJnQ,EAAcA,EAAYoQ,MAAK,SAACtK,EAAGuK,GAAJ,OAAUvK,EAAIuK,MAGjB,GACxBC,EAAehC,GAAW6B,GACxBI,EAAiBvQ,EAAYwE,OAGnC,GAAIxE,EAAYwQ,OAAM,SAACxK,GAAD,OAAOsI,GAAWtI,KAAOsK,KAC3CtB,EAAgB,kBAMhB,IAAK,IAAItK,EAAI,EAAGA,EAAI6L,EAAgB7L,IAChC,GAAKA,EAAI,EAAK6L,EAAgB,CAC1B,IAAIE,EAAKzQ,EAAY0E,GAMrB,IALS1E,EAAY0E,EAAI,GAKf+L,GAAM,KAAO,EAAG,CACtBzB,EAAgB,OAChB,MAGJA,EAAgB,WAK5B,OAAOA,EAkHa0B,CAAiB1Q,GACjC2Q,EAAoB7B,GAAkB9O,EAAa+O,EAAcC,GAG/C,SAAlBA,GAA6B2B,EAQ5B7M,GAAY,GAPbqI,EAAiB,CAAC,CACdvM,KAAM,QACN6I,QAAS,oCA+FfmI,GAAS,WAEPtE,GAAU5O,QACVyO,EAAiB,CAAC,CACdvM,KAAM,OACN6I,QAAS,uDAKb1I,EAAOrC,QAAQgD,MAAQmK,EAAYnN,SAEnCiO,EAAU,GAAD,mBAAKC,EAAWlO,SAAhB,YAA4BwO,EAAiBxO,WAGtDuO,EAAgB,IAGhBhI,IAAc,GAGd1I,EAAIiF,KAAK,cAAe,CACpBC,OAAQV,EAAOrC,QAAQ+C,OACvB5E,KAAMkE,EAAOrC,QAAQ7B,QAKzBsQ,EAAiB,GAAD,mBACThE,EAAczK,SADL,CAEZ,CACI+K,QAAQ,gFACRoI,WAAW,EACXjR,KAAM,UACNkR,QAAS,OAOnBC,GAAe,kBAAmC,IAA7B9Q,GAAUvC,QAAQ8G,QASvCmI,GAAiB,WACnBiE,KAGArV,EAAIiF,KAAK,YAAa,CAClBwQ,eAAe,EACfnV,KAAMkE,EAAOrC,QAAQ7B,KACrB4E,OAAQV,EAAOrC,QAAQ+C,SAI3BwG,cAAc+E,EAAYtO,UAgCxBuQ,GAAc,SAAC7O,GAAD,OAAWuM,EAAU,GAAD,mBAAKC,EAAWlO,SAAhB,CAAyB0B,MAC3DwP,GAAgB,SAACvO,EAASgP,GAAV,OAAqBA,EAAO4B,MAAK,SAAA7R,GAAK,OAAIA,EAAM5C,KAAO6D,MACvE6N,GAAY,SAAC3Q,EAAW8R,GAAZ,OAAuBA,EAAO4B,MAAK,SAAA7R,GAAK,OAAIA,EAAM5C,KAAOe,EAAUf,OAC/E4R,GAAoB,SAAC5O,GAAD,OAAiByM,EAAgB,GAAD,mBAAKC,EAAiBxO,SAAtB,CAA+B8B,MAInFtB,GAAiB,SAACnC,GACpB,GAAIgE,EAAOrC,QAAQgD,KAAM,CAErB3E,EAAEoC,iBACFpC,EAAE+B,kBACF/B,EAAE0B,2BAGF,IAAMF,EAAYzB,EAAYC,GAG9B,IAAKkE,GAAUvC,QAAQyC,SAAS5C,EAAUd,QAAS,CAE/C,IAAI2C,EAAQ8O,GAAU3Q,EAAW2O,EAAiBxO,SAGlDnC,EAAIiF,KAAK,cAAe,CACpBC,OAAQV,EAAOrC,QAAQ+C,OACvBlD,UAAU,2BAAMA,GAAP,IAAkB2G,YAAY,MAGvC3G,EAAUX,UAxYU,SAAC4C,GACjC,IAAI6O,EAAkB,YAAInC,EAAiBxO,SAAS2D,QAAO,SAAAjC,GAAK,OAAIA,EAAM5C,KAAOgD,EAAYhD,MAC7FyP,EAAgB,YAAIoC,IAuYR6C,CAA4B9R,GAC5B6O,GAAY7O,IAEX/B,GAAa,MAKxBe,GAAiB,SAACrC,GAAD,OAAOA,EAAEoC,kBAC1BE,GAAkB,SAACtC,GAAD,OAAOA,EAAEoC,kBAC3BG,GAAkB,SAACvC,GAAD,OAAOA,EAAEoC,kBAGjCI,qBAAU,kBAAMiN,EAAS9N,QAAQc,iBAAiB,OAAQN,OAC1DK,qBAAU,kBAAMiN,EAAS9N,QAAQc,iBAAiB,WAAYJ,OAC9DG,qBAAU,kBAAMiN,EAAS9N,QAAQc,iBAAiB,YAAaF,OAC/DC,qBAAU,kBAAMiN,EAAS9N,QAAQc,iBAAiB,YAAaH,OAE/D,IhBtpBmB8S,GgBspBbzS,GAAamM,EAAYnN,QAAU,iCAAmC,6BAG5E,OACI,sBAAKrB,UAAU,QAAf,UACI,qBAAKsC,IAAK6M,EAAUnP,UAAU,mBAA9B,SACI,qBAAKwC,MAAO,CAAEuS,MAAO,SAAW/U,UAAU,4DAA1C,SACKuP,EAAWlO,QAAUkO,EAAWlO,QAAQ4D,KAAI,SAAClC,EAAOmC,GACjD,GAAInC,EAAO,OAAO,cAAC,EAAD,CACd5C,GAAI4C,EAAM5C,GAEVI,SAAS,EACTF,KAAM0C,EAAMA,MACZzC,OAAQyC,EAAMzC,OACdK,eAAgBA,IANF,UAENoC,EAAM5C,GAFA,YAEM+E,OAOvB,SAGb,qBAAKlF,UAAU,SACf,sBAAKA,UAAWqC,GAAhB,UAGKmM,EAAYnN,QAAU,cAAC,GAAD,CAAKqD,IAAKA,EAAIrD,UAAc,KAEnD,cAAC,GAAD,CACImN,YAAaA,EACbwG,QA5HA,kBAAM1F,EAAU,YhBlkBb,SAAC2F,GAEpB,IAAK,IAAI5M,EAAI4M,EAAI9M,OAAS,EAAGE,EAAI,EAAGA,IAAK,CACrC,IAAI6M,EAAIhD,KAAKiD,MAAMjD,KAAKkD,UAAY/M,EAAI,IACpCgN,EAAOJ,EAAI5M,GACf4M,EAAI5M,GAAK4M,EAAIC,GACbD,EAAIC,GAAKG,EAGb,OAAOJ,EgByjB6BK,CAAe/F,EAAWlO,YA6H9CkT,OAAQA,GACRgB,KAzGH,WACLtF,GAAU5O,QACVyO,EAAiB,CAAC,CACdvM,KAAM,OACN6I,QAAS,uDAKb1I,EAAOrC,QAAQgD,MAAQmK,EAAYnN,QACd/E,OAAOkZ,QAAQ,6CAChBlF,KAGpBR,EAAiB,GAAD,mBACThE,EAAczK,SADL,CAEZ,CACI+K,QAAQ,6EACRoI,WAAW,EACXjR,KAAM,UACNkR,QAAS,OAsFTgB,KAhQH,WACT,GAAIxF,GAAU5O,QACVyO,EAAiB,CAAC,CACdvM,KAAM,OACN6I,QAAS,4DAMjB,GAAI1I,EAAOrC,QAAQgD,MAAQmK,EAAYnN,QAGnC,GAAwC,IAApCwO,EAAiBxO,QAAQ8G,OACzB2H,EAAiB,CAAC,CACdvM,KAAM,UACN6I,QAAS,2EAKZ,CACD,IAAIsG,EAAegC,KAGnB,GAAIhC,IAGK/O,EAAYtC,QAAQyC,SAAS,KAM9B,YALAgM,EAAiB,CAAC,CACdvM,KAAM,QACN6I,QAAS,2DASrByH,GAAqBlQ,EAAYtC,QAASqR,KAyNtC5D,KA7HH,kBAAM5P,EAAIiF,KAAK,YAAa,CAAEC,OAAQV,EAAOrC,QAAQ+C,UA8HlDsR,KAnNH,WACLzF,GAAU5O,QACVyO,EAAiB,CAAC,CACdvM,KAAM,OACN6I,QAAS,uDAKb1I,EAAOrC,QAAQgD,MAAQmK,EAAYnN,QAE/BqD,EAAIrD,QAAQ8G,QAAU,EACtB2H,EAAiB,CACb,CACI1D,QAAQ,yDAAD,OAA2D1H,EAAIrD,QAAQ8G,OAAvE,kBACP5E,KAAM,WAKdgR,KACA/E,GAAa,IAIjBM,EAAiB,CACb,CACI1D,QAAQ,+EACRoI,WAAW,EACXjR,KAAM,UACNkR,QAAS,WAwLjB,qBAAKzU,UAAU,SACd0D,EAAOrC,QAAQgD,MAAQ0L,EAAW1O,QAE/B,sBAAKpB,MAAM,oBAAoBD,UAAS,UAAKmQ,GAAU9O,QAAU,GAAK,QAAU,GAAxC,4DAAxC,UACI,cAAC,IAAD,CAAOjD,KAAM,GAAI4B,UAAU,WAC3B,sBAAMA,UAAU,OAAhB,UhB/rBG8U,GgB+rBmC3E,GAAU9O,QhB/rBjC,IAAIyJ,KAAe,IAAVgK,IAAgBa,cAAcC,OAAO,GAAI,SgBksBrE,KAEJ,cAACvJ,GAAD,CACIhH,KAAMoK,EAAUpO,QAChB0D,OAAQwK,EAAWlO,QACnBwL,kBArcc,kBAAM2C,GAAa,IAscjC1C,mBAAoBA,S,oBCttBrB,SAAS+I,GAAT,GAA8C,IAAtBC,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,MAAO1Q,EAAQ,EAARA,KAE5CV,EAAQ,qCACR,qBAAKQ,QAAS,kBAAM4Q,KAAS/V,UAAU,wHAAvC,SACI,qBAAKA,UAAU,2CAAf,SACI,sBAAKA,UAAU,4GAAf,UACI,sBAAKA,UAAU,4FAAf,UACI,oBAAIA,UAAU,yBAAd,kBAGA,qBAAKA,UAAU,6BAAf,yCAEJ,qBAAKA,UAAU,oCAAf,SACK8V,EAAK3N,OAAS,EACX,wBAAOnI,UAAU,yBAAjB,UACI,gCACI,qBAAIA,UAAU,cAAd,UACI,oBAAIA,UAAU,kDAAd,kBACA,oBAAIA,UAAU,kDAAd,wBAGR,gCACK8V,EAAK7Q,KAAI,SAACgB,EAAKf,GACZ,OAAO,+BACH,oBAAIlF,UAAU,6FAAd,SACKiG,EAAI+P,OAET,oBAAIhW,UAAU,8DAAd,SAA6EiG,EAAIgQ,UAJrE/Q,WAU1B,qBAAKlF,UAAU,0CAAf,yCAKtB,qBAAKA,UAAU,8CAGnB,OAAQqF,EAAKhE,QAAUsD,EAAQ,KCnCnC,IAuCeuR,GAvCC,SAACtT,GACb,MAAqCiE,GAAY,GAAjD,mBAAUsP,GAAV,WAAwBC,EAAxB,KACA,EAA4BvP,EAAY,IAAxC,mBAAWwP,GAAX,WAAoBP,EAApB,KACQpS,EAAW5C,qBAAWjD,GAAtB6F,OAkBR,OAZAxB,oBAAS,sBAAC,4BAAAuH,EAAA,0DACF2M,EAAU/U,QADR,gCAEmBgF,EAAkB,CACnCE,YAAa,MACbC,IAAI,SAAD,OAAW9C,EAAOrC,QAAQ+C,UAJ/B,OAOsB,aALpBgC,EAFF,QAOWnC,QAAsBoS,EAAQ,YAAIjQ,EAAS0P,OAPtD,2CASP,CAACM,EAAU/U,UAIV,qCACI,sBAAKrB,UAAU,oCAAf,UACI,sBAAKmF,QAAS,kBAAMgR,GAAa,IAAOnW,UAAU,oEAAlD,UACI,qBAAKA,UAAU,YAAf,SAA4B,cAAC,KAAD,CAAU5B,KAAM,OAC5C,qBAAK4B,UAAU,oBAAf,0BAEJ,qBAAKA,UAAU,uCAAf,SACI,sBAAKA,UAAU,uCAAf,UAAsD,cAAC,KAAD,CAAQ5B,KAAM,GAAI4B,UAAU,qBAAsB0D,EAAOrC,QAAQ+C,eAI/H,cAACyR,GAAD,CAAcC,KAAMA,EAAKzU,QAAS0U,MA3BvB,kBAAMI,GAAa,IA2BuB9Q,KAAM+Q,QCPxDE,GA1BG,SAAC1T,GACf,OACI,sBAAK5C,UAAU,gDAAf,UACI,qBAAKA,UAAU,QAAf,SACI,cAAC,EAAD,MAEJ,qBAAKA,UAAU,aAAf,SACI,cAAC,EAAD,CAAYiE,OAAO,UAEvB,qBAAKjE,UAAU,aAAf,SACI,cAAC,EAAD,MAEJ,qBAAKA,UAAU,aAAf,SACI,qBAAKA,UAAU,mBAAf,SACI,cAAC,GAAD,QAGR,qBAAKA,UAAU,QAAf,SACI,qBAAKA,UAAU,OAAf,SACI,cAAC,GAAD,Y,oBCSLuW,GAjCK,SAAC3T,GAEjB,OACI,sBAAK5C,UAAU,0DAAf,UACI,sBAAKA,UAAU,uEAAf,UACI,qBAAKA,UAAU,WAAf,sBAGA,qBAAKA,UAAU,kFAAf,qBAIJ,sBAAKA,UAAU,gDAAf,UACI,yBAAQC,MAAM,4BAA4BkF,QAAS,kBAAMvC,EAAM4T,cAAc,QAAQxW,UAAU,8IAA/F,UACI,cAAC,KAAD,CAAMwE,YAAa,EAAGpG,KAAM,KAC5B,sBAAM4B,UAAU,oBAAhB,qBAEJ,yBAAQmF,QAAS,kBAAMvC,EAAM4T,cAAc,SAASxW,UAAU,2IAA9D,UACI,cAAC,KAAD,CAAewE,YAAa,EAAGpG,KAAM,KACrC,sBAAM6B,MAAM,sBAAuBD,UAAU,oBAA7C,wBAOR,qBAAKA,UAAU,gDAAf,SACI,sBAAKA,UAAU,gBAAf,2CAA6D,mBAAGA,UAAU,gBAAgByW,KAAK,yCAAyCC,OAAO,SAASC,eAAe,cAA1G,wBAA7D,6BCrBDC,GAPI,SAAChU,GAEhB,OACG,mD,oBC6GQiU,GA3GK,SAACjU,GACjB,IAAM1D,EAAM4B,qBAAW9C,GACf8R,EAAqBhP,qBAAW5C,GAAhC4R,iBACR,EAAmDjJ,EAAY,IAA/D,mBAAUiQ,GAAV,WAA+BC,EAA/B,KACA,EAAoClQ,EAAY,0BAAhD,mBAAWmQ,GAAX,WAAwBC,EAAxB,KACA,EAA6EnW,qBAAWjD,GAAhF6F,EAAR,EAAQA,OAAQwT,EAAhB,EAAgBA,eAAgBC,EAAhC,EAAgCA,cAAehJ,EAA/C,EAA+CA,WAAYiJ,EAA3D,EAA2DA,cA2D3D,OAxDAlV,qBAAU,WAEN4U,EAAoB,CAACpT,EAAOrC,UAG5BnC,EAAII,GAAG,cAAc,SAACC,GAGlB6X,EAAc7X,EAAKwQ,YACnBoH,EAAc5X,EAAK8X,aAInBP,EAAoBvX,EAAKwX,kBAGrBxX,EAAKmE,OAAOlE,OAASkE,EAAOrC,QAAQ7B,MAEhCuX,EAAiB1V,QAAQ8G,SAAWvF,EAAM0U,YAAc5T,EAAOrC,QAAQwN,QACvE3P,EAAIiF,KAAK,kBAAmB,CAAEC,OAAQxB,EAAMwB,YAQxDlF,EAAII,GAAG,cAAc,SAACC,GAElB,IAAIgY,EAAiB7T,EAAOrC,QAAQwN,OAC9B,kEACA,wCAENiB,EAAiB,CACb,CACI1D,QAAQ,YAAD,OAAc1I,EAAOrC,QAAQ7B,KAA7B,aAAsC+X,EAAtC,oFACP/C,WAAW,EACXjR,KAAM,aAId4K,EAAW5O,EAAKiY,YAGhBC,YAAW,WACPT,EAAY,0BACb,MAEHS,YAAW,WACPP,GAAe,KAChB,QAEJ,MACJ,IAIC,qBAAKlX,UAAU,0DAAf,SACI,sBAAKA,UAAU,wDAAf,UACI,sBAAKA,UAAU,qDAAf,UAEI,qBAAKA,UAAU,+BAAf,0BAEA,sBAAKC,MAAM,gEAAgED,UAAU,mDAArF,UAAwI,cAAC,KAAD,CAAQ5B,KAAM,GAAI4B,UAAU,qBAAsB4C,EAAMwB,aAIpM,sBAAKpE,UAAU,4BAAf,UACI,cAAC,KAAD,CAAO5B,KAAM,GAAI4B,UAAU,WAD/B,uBAC+DpB,EAAQmY,EAAiB1V,QAAQ8G,QADhG,IACyG,sBAAMnI,UAAU,YAAhB,SAA6B4C,EAAM0U,gBAE3IP,EAAiB1V,QAAQ8G,SAAWvF,EAAM0U,WAEvC,qBAAKtX,UAAU,uBAAf,SACI,qBAAKA,UAAU,+BAAf,SAA+CiX,EAAS5V,YAG5D,KACJ,qBAAKrB,UAAU,uBAAf,SACK+W,EAAiB1V,QAAQ4D,KAAI,SAACwG,EAAGvG,GAC9B,OAAO,sBAAiBlF,UAAU,wBAA3B,UAAoDyL,EAAEjM,OAASkE,EAAOrC,QAAQ7B,KAA1B,eAAyCiM,EAAEjM,KAA3C,KAAqDiM,EAAEjM,KAA3G,0BAAU0F,QAIxBxB,EAAOrC,QAAQwN,OAEZ,qBAAK7O,UAAU,uBAAf,SACI,yBAAQmF,QAASvC,EAAM8U,yBAA0B1X,UAAU,+HAA3D,UACI,cAAC,KAAD,CAAQ5B,KAAM,KACd,sBAAM4B,UAAU,oBAAhB,iCAIR,WCgDL2X,GApJE,SAAC/U,GAEd,MAAoC3B,mBAAS,GAA7C,mBAAOqW,EAAP,KAAmBM,EAAnB,KACA,EAAoC3W,oBAAS,GAA7C,mBAAO4W,EAAP,KAAmBC,EAAnB,KACA,EAAkC7W,mBAAS,CAAE2R,OAAO,EAAMxG,QAAS,GAAIhI,OAAQ,KAA/E,mBAAO2T,EAAP,KAAkBC,EAAlB,KACA,EAAsC/W,mBAAS,CAAE2R,OAAO,EAAMxG,QAAS,GAAI5M,KAAM,KAAjF,mBAAOyY,EAAP,KAAoBC,EAApB,KAEMhZ,EAAM4B,qBAAW9C,GACfkQ,EAAcpN,qBAAWjD,GAAzBqQ,UAWFiK,EAAe,uCAAG,WAAOC,GAAP,SAAA3O,EAAA,sEAA4BpD,EAAkB,CAAEE,YAAa,MAAOC,IAAI,SAAD,OAAW4R,EAAX,iBAA8BH,EAAYzY,MAAQiH,QAAS,KAAlI,mFAAH,sDAEf4R,EAAqB,uCAAG,8BAAA5O,EAAA,2DAGtBwO,EAAYzY,KAAK2I,OAAS,GAAK8P,EAAYzY,KAAK2I,OAAS,IAHnC,uBAItB+P,EAAe,2BAAKD,GAAN,IAAmBrF,OAAO,EAAOxG,QAAS,8CAJlC,6BASrB3N,EAAewZ,EAAYzY,MATN,uBAUtB0Y,EAAe,2BAAKD,GAAN,IAAmBrF,OAAO,EAAOxG,QAAS,+BAVlC,+BAetB2L,EAAU3T,OAAO+D,OAAS,IAfJ,uBAgBtB6P,EAAa,2BAAKD,GAAN,IAAiBnF,OAAO,EAAOxG,QAAS,sCAhB9B,2CAoBC+L,EAAgBJ,EAAU3T,QApB3B,QAuBE,WAHtBkU,EApBoB,QAuBTrU,OACb+T,EAAa,2BAAKD,GAAN,IAAiBnF,OAAO,EAAOxG,QAASkM,EAAalM,WAGpC,cAAxBkM,EAAarU,OAClBiU,EAAe,2BAAKD,GAAN,IAAmBrF,OAAO,EAAOxG,QAASkM,EAAalM,WAIjEkM,EAAaC,KAAKC,UACZC,EAAgB,CAClB7M,MAAO,EACPvH,MAAM,EACNwK,QAAQ,EACRlD,YAAY,EACZvH,OAAQ2T,EAAU3T,OAClB5E,KAAMyY,EAAYzY,KAAKpC,cAG3B8B,EAAIiF,KAAK,OAAQ,CAAEC,OAAQ2T,EAAU3T,OAAQV,OAAQ+U,IACrDb,EAAcU,EAAaC,KAAKG,OAChCxK,EAAUuK,GACVX,GAAc,IAGdE,EAAa,CAAEpF,OAAO,EAAOxG,QAAS,kDAhDpB,4CAAH,qDAqDvB/J,EAAU,UAAM4V,EAAYrF,MAAQ,OAAS,OAAnC,wKAEd,OACIiF,EAEI,cAAC,GAAD,CAAazT,OAAQ2T,EAAU3T,OAAQkT,WAAYA,IAEnD,sBAAKtX,UAAU,0DAAf,UACI,qBAAKA,UAAU,2BAAf,iCAEA,sBAAKA,UAAU,4EAAf,UACI,qBAAKA,UAAU,kCAAf,SACI,sBAAKA,UAAU,OAAf,UACI,uBAAOA,UAAU,+EAAjB,uBAGA,uBAAO2Y,UAAW,EAAGC,UAAW,GAAIhM,SA/EnC,SAAClN,GACtBwY,EAAe,2BAAKD,GAAN,IAAmBrF,OAAO,EAAMpT,KAAME,EAAEgX,OAAOmC,MAAMC,WA8EiB7Y,MAAM,YAAYD,UAAWqC,EAAYkB,KAAK,OAAOwV,YAAY,mBAGzI,qBAAK/Y,UAAU,6BAAf,SACMiY,EAAYrF,MAUV,KARA,qBAAK5S,UAAU,cAAf,SACI,qBAAKA,UAAU,+BAAf,SACI,sBAAMA,UAAU,4BAAhB,SACKiY,EAAY7L,gBAQjC,qBAAKpM,UAAU,6BAAf,SACI,sBAAKA,UAAU,OAAf,UACI,uBAAOA,UAAU,+EAAjB,wBAGA,uBAAO4M,SAjGJ,SAAClN,GACxBsY,EAAa,2BAAKD,GAAN,IAAiBnF,OAAO,EAAMxO,OAAQ1E,EAAEgX,OAAOmC,MAAMC,WAgGRF,UAAW,GAAI5Y,UAAU,2KAA2KuD,KAAK,OAAOwV,YAAY,0BAGzQ,qBAAK/Y,UAAU,kCAAf,SACM+X,EAAUnF,MAUR,KARA,qBAAK5S,UAAU,cAAf,SACI,qBAAKA,UAAU,gCAAf,SACI,sBAAMA,UAAU,4BAAhB,SACK+X,EAAU3L,gBAQ/B,sBAAKpM,UAAU,4BAAf,UACI,qBAAKA,UAAU,cAAf,SACI,yBAAQmF,QAAS,kBAAMvC,EAAM4T,cAAc,WAAWxW,UAAU,+HAAhE,UACI,cAAC,IAAD,CAAG5B,KAAM,KACT,sBAAM4B,UAAU,oBAAhB,yBAGR,qBAAKA,UAAU,cAAf,SACI,yBAAQmF,QAASkT,EAAuBrY,UAAU,qIAAlD,UACI,cAAC,KAAD,CAAeA,UAAU,KAAKwE,YAAa,EAAGpG,KAAM,KACpD,sBAAM4B,UAAU,oBAAhB,iC,UC1I5BoE,GAAM,UAAMjG,EAAiB,GAAvB,YAA6BA,EAAiB,IA4LzC6a,GA1LC,SAACpW,GAEb,MAAoC3B,mBAAS,GAA7C,mBAAOqW,EAAP,KAAmBM,EAAnB,KACA,EAAoC3W,mBAAS,MAA7C,mBAAO8O,EAAP,KAAmBqH,EAAnB,KACA,EAAsCnW,oBAAS,GAA/C,mBAAOgY,EAAP,KAAoB/B,EAApB,KACA,EAAsCjW,oBAAS,GAA/C,mBAAOoW,EAAP,KAAoB6B,EAApB,KACA,EAAsCjY,mBAAS,CAAE2R,OAAO,EAAMxG,QAAS,GAAI5M,KAAM,KAAjF,mBAAOyY,EAAP,KAAoBC,EAApB,KAEMhZ,EAAM4B,qBAAW9C,GACfkQ,EAAcpN,qBAAWjD,GAAzBqQ,UA8DJ7L,EAAU,UAAM4V,EAAYrF,MAAQ,OAAS,OAAnC,wKAEd,OACIqG,EAEI,cAAC,GAAD,CACI7U,OAAQA,GACRkT,WAAYA,EACZI,yBAnDqB,WACzBpb,OAAOkZ,QAAQ,wDACfoC,EAAc,GACdsB,GAAe,GACfhC,GAAe,GACftU,EAAM4T,cAAc,UACpB0B,EAAe,CAAE9L,QAAS,GAAIwG,OAAO,EAAMpT,KAAM,KAGjDN,EAAIiF,KAAK,QAAS,CAAEC,YAGpBA,GAAM,UAAMjG,EAAiB,GAAvB,YAA6BA,EAAiB,QA0CpD,sBAAK6B,UAAU,0DAAf,UACI,qBAAKA,UAAU,2BAAf,iCAEA,sBAAKA,UAAU,4EAAf,UACI,qBAAKA,UAAU,kCAAf,SACI,sBAAKA,UAAU,OAAf,UACI,uBAAOA,UAAU,+EAAjB,6BAGA,uBAAOC,MAAM,qCAAqCkZ,UAAQ,EAACN,MAAOzU,GAAQpE,UAAU,8LAA8LuD,KAAK,OAAOwV,YAAY,mBAGlT,qBAAK/Y,UAAU,6BAAf,SACI,sBAAKA,UAAU,OAAf,UACI,uBAAOA,UAAU,+EAAjB,uBAGA,uBAAO2Y,UAAW,EAAGC,UAAW,GAAIhM,SAxFnC,SAAClN,GACtBwY,EAAe,2BAAKD,GAAN,IAAmBrF,OAAO,EAAMpT,KAAME,EAAEgX,OAAOmC,MAAMC,WAuFiB7Y,MAAM,YAAYD,UAAWqC,EAAYkB,KAAK,OAAOwV,YAAY,qBAGzI,qBAAK/Y,UAAU,6BAAf,SACMiY,EAAYrF,MAUV,KARA,qBAAK5S,UAAU,cAAf,SACI,qBAAKA,UAAU,+BAAf,SACI,sBAAMA,UAAU,4BAAhB,SACKiY,EAAY7L,gBAQjC,qBAAKpM,UAAU,6CAAf,SACI,sBAAKA,UAAU,cAAf,UACI,uBAAOA,UAAU,+EAAjB,+BAGA,sBAAKA,UAAU,WAAf,UACI,yBAAQ4M,SA3GL,SAAClN,GAC5BkY,EAAcwB,SAAS1Z,EAAEgX,OAAOmC,SA0GkC7Y,UAAU,0LAApD,UACI,wBAAQ8G,cAAY,EAAC+R,MAAO,EAA5B,iBACA,wBAAQA,MAAO,EAAf,mBACA,wBAAQA,MAAO,EAAf,qBAEJ,qBAAK7Y,UAAU,sFAAf,SACI,cAAC,KAAD,CAAa5B,KAAM,eAMnC,qBAAK4B,UAAU,6CAAf,SACI,sBAAKA,UAAU,cAAf,UACI,uBAAOC,MAAM,6DAA6DD,UAAU,2FAApF,0BAGA,sBAAKA,UAAU,WAAf,UACI,yBAAQ4M,SAzHL,SAAClN,GACL,aAAnBA,EAAEgX,OAAOmC,MAAsBzB,EAAcgC,SAAS1Z,EAAEgX,OAAOmC,QAC9DzB,EAAc,OAuH+CpX,UAAU,0LAApD,UACI,wBAAQ8G,cAAY,EAAC+R,MAAO,KAA5B,sBACA,wBAAQA,MAAO,IAAf,0BACA,wBAAQA,MAAO,IAAf,0BACA,wBAAQA,MAAO,IAAf,2BACA,wBAAQA,MAAO,IAAf,yBACA,wBAAQA,MAAO,GAAf,2BAEJ,qBAAK7Y,UAAU,sFAAf,SACI,cAAC,KAAD,CAAa5B,KAAM,eAMnC,qBAAK4B,UAAU,kCAAf,SACI,qBAAKA,UAAU,cAAf,SACI,sBAAKC,MAAM,8GAA8GD,UAAU,gDAAnI,UACI,uBAAOA,UAAU,qCAAjB,SACI,uBAAO4M,SAvIP,SAAClN,GAC7BwZ,EAAexZ,EAAEgX,OAAO/J,UAsI8C3M,UAAU,6BAA6BuD,KAAK,eAE1F,sBAAMvD,UAAU,eAAhB,qDAMZ,sBAAKA,UAAU,4BAAf,UACI,qBAAKA,UAAU,cAAf,SACI,yBAAQmF,QAAS,kBAAMvC,EAAM4T,cAAc,WAAWxW,UAAU,+HAAhE,UACI,cAAC,IAAD,CAAG5B,KAAM,KACT,sBAAM4B,UAAU,oBAAhB,yBAGR,qBAAKA,UAAU,cAAf,SACI,yBAAQmF,QAnIA,WAE5B,GAAI8S,EAAYzY,KAAK2I,OAAS,GAAK8P,EAAYzY,KAAK2I,OAAS,GACzD+P,EAAe,2BAAKD,GAAN,IAAmBrF,OAAO,EAAOxG,QAAS,mDAK5D,GAAK3N,EAAewZ,EAAYzY,MAAhC,CAKA,IAAIiZ,EAAgB,CAChBrU,UACAwH,MAAO,EACPvH,MAAM,EACNwK,QAAQ,EACRlD,YAAY,EACZnM,KAAMyY,EAAYzY,KAAKpC,cAG3B8B,EAAIiF,KAAK,OAAQ,CAAEC,UAAQiT,cAAatH,aAAYrM,OAAQ+U,EAAeC,MAAOpB,IAClFpJ,EAAUuK,GACVvB,GAAe,QAfXgB,EAAe,2BAAKD,GAAN,IAAmBrF,OAAO,EAAOxG,QAAS,gCA0HEpM,UAAU,qIAApD,UACI,cAAC,KAAD,CAAMA,UAAU,KAAKwE,YAAa,EAAGpG,KAAM,KAC3C,sBAAM4B,UAAU,oBAAhB,iCCpIjBqZ,GAjDK,SAACzW,GAGjB,MAA8B3B,oBAAS,GAAvC,mBAAOqY,EAAP,KAAgBC,EAAhB,KACA,EAAgCtY,oBAAS,GAAzC,mBAAOuY,EAAP,KAAiBC,EAAjB,KACA,EAAoCxY,oBAAS,GAA7C,mBAAOyY,EAAP,KAAmBC,EAAnB,KAEMnD,EAAgB,SAACoD,GACJ,QAAXA,GACAL,GAAW,GACXE,GAAY,GACZE,GAAc,IAEE,SAAXC,GACLH,GAAY,GACZF,GAAW,GACXI,GAAc,IAEE,WAAXC,GACLL,GAAW,GACXE,GAAY,GACZE,GAAc,KAGdJ,GAAW,GACXE,GAAY,GACZE,GAAc,KAoBtB,OAbIL,EACO,cAAC,GAAD,CAAS9C,cAAeA,IAE1BgD,EACE,cAAC,GAAD,CAAUhD,cAAeA,IAE3BkD,EACE,cAAC,GAAD,CAAYlD,cAAeA,IAG3B,cAAC,GAAD,CAAaA,cAAeA,K,UC3C5B,SAASqD,GAAYjX,GAChC,MAA2BiE,GAAY,GAAvC,mBAAUiT,GAAV,WAAmBzU,EAAnB,KACA,EAAoCpE,mBAAS,IAA7C,mBAAO8Y,EAAP,KAAmBC,EAAnB,KAEM9a,EAAM4B,qBAAW9C,GACvB,EAA+B8C,qBAAWjD,GAAlC6F,EAAR,EAAQA,OAAQyK,EAAhB,EAAgBA,WAEhBjM,qBAAU,WAENhD,EAAII,GAAG,WAAW,SAACC,GACf,IAAI0a,EADoB,EAEpBC,EAAS,CAAE1a,KAAM,GAAIoM,MAAO,GAFR,cAKRrM,GALQ,IAKxB,2BAAsB,CAAC,IAAZkM,EAAW,QACdA,EAAEG,MAAQsO,EAAOtO,QACjBsO,EAAO1a,KAAOiM,EAAEjM,KAChB0a,EAAOtO,MAAQH,EAAEG,QARD,8BAcpBqO,EADAvW,EAAOrC,QAAQ7B,OAAS0a,EAAO1a,KACnB,2BAAuB0a,EAAO1a,KAA9B,qCAA+D0a,EAAOtO,MAAtE,sCAEA,UAAMsO,EAAO1a,KAAb,+BAAwC0a,EAAOtO,MAA/C,+BAA2ElI,EAAOrC,QAAQ7B,KAA1F,yCAhBQ,oBAoBRD,GApBQ,IAoBxB,2BAAsB,CAAC,IAAZkM,EAAW,QACdA,EAAEjM,OAAS0a,EAAO1a,KAClBiM,EAAEjM,KAAF,UAAYiM,EAAEjM,KAAd,iBAECiM,EAAEjM,KAAF,UAAYiM,EAAEjM,KAAd,kBAxBe,8BA2BxBwa,EAAcC,GACd9L,EAAW5O,GACXua,GAAQ,QAEb,IAGH,IAAInV,EAAQ,qCACR,qBAAK3E,UAAU,wHAAf,SACI,qBAAKA,UAAU,2CAAf,SACI,sBAAKA,UAAU,uGAAf,UACI,qBAAKA,UAAU,4FAAf,SACI,oBAAIA,UAAU,yBAAd,4DAIJ,sBAAKA,UAAU,oEAAf,UACI,qBAAKA,UAAU,OAAf,SAAuB+Z,IACvB,yBAAQ5U,QAAS,WAAQ2U,GAAQ,IAAU9Z,UAAU,0GAArD,UACI,cAAC,KAAD,CAAUA,UAAU,cAAcwE,YAAa,EAAGpG,KAAM,KACxD,sBAAM4B,UAAU,OAAhB,uCAMpB,qBAAKA,UAAU,8CAGnB,OAAQqF,EAAKhE,QAAUsD,EAAQ,KCxDnC,IAgOewV,GAhOF,WAET,MAA6CtT,GAAY,GAAzD,mBAAkBuT,GAAlB,WAAgCnK,EAAhC,KACA,EAAgDpJ,GAAY,GAA5D,mBAAiBqQ,GAAjB,WAAiC+B,EAAjC,KACA,EAAgDpS,GAAY,GAA5D,mBAAiBwT,GAAjB,WAAiC7L,EAAjC,KACA,EAAqC3H,GAAY,GAAjD,mBAAYY,GAAZ,WAAyBD,EAAzB,KACA,EAAuCX,GAAY,GAAnD,mBAAUe,GAAV,WAAyBD,EAAzB,KACA,EAAwCd,GAAY,GAApD,mBAAWsQ,GAAX,WAA0B1I,EAA1B,KACA,EAAwC5H,EAAY,MAApD,mBAAWuQ,GAAX,WAA0BrH,EAA1B,KACA,EAA0ClJ,EAAY,IAAtD,mBAAWhD,GAAX,WAA2BF,EAA3B,KACA,EAA4CkD,EAAY,IAAxD,mBAAaa,GAAb,WAA6BsI,EAA7B,KACA,EAAuCnJ,EAAY,IAAnD,mBAAYyT,GAAZ,WAA0B1W,EAA1B,KACA,EAAuCiD,GAAY,GAAnD,mBAAY7F,IAAZ,WAA0BD,GAA1B,KACA,GAAoC8F,EAAY,IAAhD,qBAAasH,IAAb,aAAyB7C,GAAzB,MACA,GAAmCzE,EAAY,IAA/C,qBAAcqH,IAAd,aAAyBxK,GAAzB,MACA,GAA8BmD,EAAY,CAAEsB,OAAQ,EAAGpD,OAAQ,KAA/D,qBAAewV,IAAf,aAAuB7V,GAAvB,MACA,GAAmDmC,EAAY,IAA/D,qBAAgBiJ,IAAhB,aAAkChE,GAAlC,MAEM5M,GAAM4B,qBAAW9C,GACjBwc,GAAc,CAChB9V,OAAK6V,UACL7W,UAAQwK,aACR5C,WAAS6C,cACT3G,WAAUC,cACVwI,YAAWmK,eACXxW,YAAW0W,eACX7L,aAAY0I,gBACZxP,aAAYC,gBACZmI,aAAYqH,gBACZ5I,cAAa6L,iBACbpB,cAAa/B,iBACbvT,cAAaE,iBACbmM,cAAatI,kBAKjBxF,qBAAU,WACNhD,GAAII,GAAG,YAAY,SAACC,GAEhBgb,GAAOhb,EAAKmF,KACZ2V,GAAe,GAEf,IAEII,EAPqB,EAKnBrM,EAAiB,GACjBsM,EAAenb,EAAK+L,QAAQ,GACTqP,EAAmB,GAPnB,cAUTrP,GAAQjK,SAVC,IAUzB,2BAAiC,CAAC,IAAvBoK,EAAsB,QACzBA,EAAEjM,OAASkb,IACXjP,EAAC,MAAW,GAEhB2C,EAAe1F,KAAK+C,IAdC,8BAkBzB0C,GAAWC,GAGPsM,IAAiBhX,GAAOrC,QAAQ7B,MAChCib,EAAmB,wBACnBvM,GAAU,2BAAKxK,GAAOrC,SAAb,IAAsBgD,MAAM,MAErCoW,EAAmB,UAAMC,EAAN,uBAIvBnb,EAAK+L,QAAQqI,SAAQ,SAAClI,EAAGvG,GACjBuG,IAAM/H,GAAOrC,QAAQ7B,OACrBiM,EAAC,UAAMA,EAAN,WAEDvG,EAAQ,IAAM3F,EAAK+L,QAAQnD,OAC3BwS,GAAoBlP,EAEpBkP,GAAgB,UAAOlP,EAAP,cAKxBqE,GAAiB,CACb,CACI1D,QAAQ,GAAD,OAAKqO,EAAL,+CAA+DE,GACtEnG,WAAW,EACXjR,KAAM,OACNkR,QAAS,QAMrBvV,GAAII,GAAG,aAAa,SAACC,GAGjBqb,GAAmBrb,EAAKmb,aAAalb,MAEjCD,EAAKC,OAASkE,GAAOrC,QAAQ7B,MAC7B0O,GAAU,2BAAKxK,GAAOrC,SAAb,IAAsBuK,MAAOrM,EAAKsb,gBAI/C1M,GAAW2M,GAAkBvb,IAG7Bwb,GAAmBxb,GAGnB+a,EAAa,YAAI,IAAIU,IAAJ,sBAAYpX,EAAUvC,SAAtB,YAAkCsC,EAAYtC,aAG/DkZ,GAAOhb,EAAKmF,KAGZuW,GAAiB1b,EAAKmF,IAAIyD,QAG1BtE,EAAe,KAGQ,IAAnBtE,EAAK2b,WAAoB3b,EAAKoR,YAAcpR,EAAKqR,cAAcwJ,GAAa,QAErF,IAIH,IAAMQ,GAAqB,SAACF,GACpBA,IAAiBhX,GAAOrC,QAAQ7B,KAChC0O,GAAU,2BAAKxK,GAAOrC,SAAb,IAAsBgD,MAAM,KACpC6J,GAAU,2BAAKxK,GAAOrC,SAAb,IAAsBgD,MAAM,MAIxCyW,GAAoB,SAACvb,GACvB,IADgC,EAC5B6O,EAAiB,GADW,cAEhB9C,GAAQjK,SAFQ,IAEhC,2BAAiC,CAAC,IAAvBoK,EAAsB,QACzBA,EAAEjM,OAASD,EAAKmb,aAAalb,KAAMiM,EAAEpH,MAAO,EAC3CoH,EAAEpH,MAAO,EAGVoH,EAAEjM,OAASD,EAAKC,OAAMiM,EAAEG,MAAQrM,EAAKsb,cACzCzM,EAAe1F,KAAK+C,IARQ,8BAWhC,OAAO2C,GAIL6M,GAAmB,SAACE,GAElB,IAAIC,EADJD,GAAa,IAITC,EADc,IAAdD,EACe,gCACM,IAAdA,EACQ,oCAEH,eAAWA,EAAX,gCAGhB1D,YAAW,WACP3H,GAAiB,CACb,CACI1D,QAAQ,aAAD,OAAegP,GACtB7X,KAAM,eAGf,OAMLwX,GAAqB,SAACxb,GACxB,IAAI6M,EACAiP,EAAU,eAAW9b,EAAKmb,aAAalb,OAASkE,GAAOrC,QAAQ7B,KAAO,OAAjD,UAA6DD,EAAKmb,aAAalb,KAA/E,OAGrBD,EAAKoV,eACLvI,EAAU7M,EAAKC,OAASkE,GAAOrC,QAAQ7B,KACjC,yBADI,0BAEeD,EAAKC,KAFpB,KAGV4M,GAAO,WAAQiP,EAAR,kBAIF9b,EAAKiT,eACVpG,EAAU7M,EAAKC,OAASkE,GAAOrC,QAAQ7B,KACjC,oCADI,UAEDD,EAAKC,KAFJ,6BAGV4M,GAAO,WAAQiP,EAAR,mBAKPjP,EAAU7M,EAAKC,OAASkE,GAAOrC,QAAQ7B,KAA7B,sBACWD,EAAKiR,KADhB,mBAC+BjR,EAAKqM,MADpC,sBAEDrM,EAAKC,KAFJ,oBAEoBD,EAAKiR,KAFzB,mBAEwCjR,EAAKqM,MAF7C,YAGVQ,GAAO,WAAQiP,EAAR,kBAGXvL,GAAiB,CAAC,CAAEvM,KAAM,OAAQ6I,cAIhCkP,GACF,sBAAKtb,UAAU,kBAAf,UACI,cAAC,EAAD,IACA,qBAAKA,UAAU,UACf,cAAC,GAAD,OAGR,OACI,qBAAKA,UAAU,sDAAf,SACI,cAAC9B,EAAoBqd,SAArB,CAA8B1C,MAAO,CAAE/M,iBAAegE,qBAAtD,SACI,cAACjS,EAAY0d,SAAb,CAAsB1C,MAAO2B,GAA7B,SACI,eAACvc,EAAiBsd,SAAlB,CAA2B1C,MAAO,CAAE9X,aAAWC,iBAA/C,UACKiY,EAAY5X,QAAUia,GAAY,cAAC,GAAD,IACnC,cAACzB,GAAD,cCvNT2B,OAVf,WACE,OACE,cAACxd,EAAgBud,SAAjB,CAA0B1C,MAAOnb,EAAjC,SACE,qBAAKsC,UAAU,MAAf,SACE,cAAC,GAAD,SCEOyb,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBjV,MAAK,YAAkD,IAA/CkV,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.27f71494.chunk.js","sourcesContent":["\n// In PROD, Jinja would pass the host url to the window object as apiURL\nconst URL = window.apiURL === '{{ ip }}' ? 'http://192.168.0.166:5005' : window.apiURL;\nconst SERVER_TOKEN = window.b2ctk === '{{ b2ctk }}' ? 'ScrabbleDevToken' : window.b2ctk;\n\nconst API_URL = `${URL}/api/v1`;\n\nconst IO_TRANSPORTS = {\n    transports: [\"websocket\", \"polling\"],\n}\n\nconst tileColors = {\n    normal: \"bg-white\",\n    tripleWord: \"bg-red-700\",\n    startTile: \"bg-gray-500\",\n    doubleLetter: \"bg-blue-400\",\n    tripleLetter: \"bg-blue-800\",\n    doubleWord: \"bg-yellow-500\",\n}\n\n\n// Allow string capitalization (\"\".capitalize())\nString.prototype.capitalize = function() {\n    return this.charAt(0).toUpperCase() + this.slice(1).toLowerCase();\n}\n\nexport { URL };\nexport { API_URL };\nexport { tileColors };\nexport { SERVER_TOKEN };\nexport { IO_TRANSPORTS };","import React from 'react';\nimport { io } from 'socket.io-client';\nimport { URL, IO_TRANSPORTS } from './constants';\n\n\nconst socket = io(URL, IO_TRANSPORTS);\n\nconst GameContext = React.createContext();\nconst SocketIOContext = React.createContext();\nconst ValidDragContext = React.createContext();\nconst NotificationContext = React.createContext();\n\nexport { socket };\nexport { GameContext };\nexport { SocketIOContext };\nexport { ValidDragContext };\nexport { NotificationContext };\n","// Helper functions\nimport CountUp from 'react-countup';\n\n\nconst inPlaceShuffle = (arr) => {\n\n    for (let i = arr.length - 1; i > 0; i--) {\n        let j = Math.floor(Math.random() * (i + 1));\n        let temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n    }\n\n    return arr;\n}\n\nconst secondsToMMSS = (seconds) => new Date(seconds * 1000).toISOString().substr(14, 5);\n\nconst generateRandomID = (size) => {\n    return window.crypto\n        .getRandomValues(new Uint32Array(1))[0]\n        .toString()\n        .slice(0, size);\n}\n\nconst isAlphanumeric = (str) => str.match(/^[0-9a-zA-Z]+$/);\n\nconst countUp = (number) => {\n    return <CountUp start={number} end={number} duration={1.5} />\n}\n\nconst countDown = (number) => {\n    return <CountUp start={number + 7} end={number} duration={1.5} />\n}\n\nconst excludeMeSioEvent = (sio, eventName, myName, dispatch) => {\n    sio.on(eventName, (data) => {\n        if (data.name !== myName) dispatch(data);\n    });\n};\n\nconst dragCancelled = (e) => e.dataTransfer.dropEffect === \"none\";\nconst getDragData = (e) => JSON.parse(e.dataTransfer.getData(\"draggedPiece\"));\nconst setDragData = (e, data) => e.dataTransfer.setData(\"draggedPiece\", JSON.stringify(data));\n\nexport { countUp };\nexport { countDown };\nexport { setDragData };\nexport { getDragData };\nexport { dragCancelled };\nexport { secondsToMMSS };\nexport { inPlaceShuffle };\nexport { isAlphanumeric };\nexport { generateRandomID };\nexport { excludeMeSioEvent };","import React from 'react';\nimport { tileColors } from '../constants';\n\n\nconst Legend = () => {\n\n    return (\n        <div className=\"block\">\n            <div className=\"flex\">\n                <div title=\"A piece must be played on this tile at the beginning of the game\" className=\"flex-1\"><span className={`${tileColors[\"startTile\"]} pr-5 h-6 w-8 border-2 border-black`}></span><span className=\"pl-2\">Start Point</span></div>\n                <div title=\"The total score of the letter on this tile is doubled\" className=\"flex-1\"><span className={`${tileColors[\"doubleLetter\"]} pr-5 h-6 w-8 border-2 border-black`}></span><span className=\"pl-2\">Double Letter</span></div>\n                <div title=\"The total score of the letter on this tile is tripled\" className=\"flex-1\"><span className={`${tileColors[\"tripleLetter\"]} pr-5 h-6 w-8 border-2 border-black`}></span><span className=\"pl-2\">Triple Letter</span></div>\n                <div title=\"The total score of the word played is doubled when a piece is on this tile\" className=\"flex-1\"><span className={`${tileColors[\"doubleWord\"]} pr-5 h-6 w-8 border-2 border-black`}></span><span className=\"pl-2\">Double Word</span></div>\n                <div title=\"The total score of the word played is tripled when a piece is on this tile\" className=\"flex-1\"><span className={`${tileColors[\"tripleWord\"]} pr-5 h-6 w-8 border-2 border-black`}></span><span className=\"pl-2\">Triple Word</span></div>\n            </div>\n        </div>\n    )\n};\n\nexport default Legend;","// A scrabble piece\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport { setDragData, dragCancelled } from '../utils';\nimport { ValidDragContext } from '../context';\n\n\nconst Piece = ({\n    id,\n    tileID,\n    char,\n    weight,\n    onBoard,\n    isPlayed,\n    isStatic,\n    isTransformed,\n    dragEndHandler,\n}) => {\n\n    const thisPiece = useRef();\n\n    const { validDrag, setValidDrag } = useContext(ValidDragContext);\n    const [pieceData, setPieceData] = useState({ id, tileID, char, weight, onBoard, isTransformed, isStatic, isPlayed });\n\n    // Event listeners handlers\n\n    // Call handler function on drag end\n    const handleDragEnd = (e) => {\n        e.stopImmediatePropagation();\n        if (dragEndHandler // Associated handling function\n            && validDrag.current // Drag is valid\n            && !dragCancelled(e)) //  Drag wasn't cancelled\n            dragEndHandler(pieceData)\n    };\n\n    // Save piece metadata on drag start\n    const handleDragStart = (e) => {\n        // Prevent bubble\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n\n        setValidDrag(true) // Reset prev drag context\n        setDragData(e, pieceData); // Save piece data\n    };\n\n\n    // Pieces should not be dropped on pieces\n    const handleDragDrop = (e) => {\n        // Prevent bubble\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        setValidDrag(false); // Prevent drag end update\n    }\n\n    // [Naturally], prevent default\n    const handleDragOver = (e) => e.preventDefault();\n    const handleDragEnter = (e) => e.preventDefault();\n    const handleDragLeave = (e) => e.preventDefault();\n\n\n    // Effect Listeners\n    useEffect(() => thisPiece.current.addEventListener(\"drop\", handleDragDrop));\n    useEffect(() => thisPiece.current.addEventListener(\"dragend\", handleDragEnd));\n    useEffect(() => thisPiece.current.addEventListener(\"dragover\", handleDragOver));\n    useEffect(() => thisPiece.current.addEventListener(\"dragleave\", handleDragLeave));\n    useEffect(() => thisPiece.current.addEventListener(\"dragstart\", handleDragStart));\n    useEffect(() => thisPiece.current.addEventListener(\"dragenter\", handleDragEnter));\n\n\n    // Custom class names depending on piece\n    let weightClassNames = pieceData.weight < 10 ? \"absolute relative right-0.5 bottom-0.5\" : \"absolute relative right-1.5 bottom-0.5\"\n    let classNames = `${isStatic ? \"h-3/4\" : \"h-full\"} ${isTransformed ? \"bg-yellow-300\" : \"\"} ${pieceData.char === \" \" ? \"flex-col-reverse\" : \"\"} cursor-pointer hover:text-gray-700 flex flex-col ${onBoard ? \"w-full\" : \"w-14 border\"} text-black bg-yellow-200 border-black`;\n\n    return (\n        <div ref={thisPiece} draggable={!isPlayed} className={classNames}>\n            <div className=\"block self-center w-4/5 text-4xl font-bold\">\n                <span style={{ top: \"0.4rem\" }} className={`absolute ${isTransformed ? \"italic pr-2\" : \"\"} relative`}>\n                    {pieceData.char}\n                </span>\n            </div>\n            <div className=\"block self-end w-1/5 text-xs\">\n                <span className={weightClassNames}>\n                    {pieceData.weight}\n                </span>\n            </div>\n        </div>\n    )\n};\n\nexport default Piece;","import React, { useState, useEffect, useRef, forwardRef, useImperativeHandle, useContext } from 'react';\nimport { GameContext, SocketIOContext } from '../context';\nimport { tileColors } from '../constants';\nimport { getDragData } from '../utils';\nimport { Star } from 'react-feather';\nimport Piece from './Piece';\n\nconst Tile = forwardRef((props, ref) => {\n\n    // The component instance will be extended\n    // with whatever you return from the callback passed\n    // as the second argument\n    useImperativeHandle(ref, () => ({\n\n        addPiece(piece) {\n            setPlayedPiece(piece);\n        },\n\n        removePiece() {\n            setPlayedPiece(null);\n        },\n\n        hasPiece() {\n            return playedPiece !== null && playedPiece !== undefined;\n        },\n\n        getPiece() {\n            return { ...playedPiece.props, tileType: props.type };\n        },\n\n    }));\n\n    let prevTileID = \"\";\n    const type = props.type;\n    const tileID = props.id;\n\n    const thisTile = useRef();\n    const sio = useContext(SocketIOContext);\n    const [playedPiece, setPlayedPiece] = useState(props.playedPiece);\n    const { player, playedTiles, usedTiles, setPlayedTiles } = useContext(GameContext);\n\n\n    // Helper functions \n\n    // On drag end, remove piece if necessary\n    // New tile will have newly-created piece\n    const dragEndHandler = (pieceData) => {\n        // If it isn't a cemented tile\n        if (!usedTiles.current.includes(pieceData.tileID)) {\n            if (prevTileID !== tileID) {\n                setPlayedPiece(null);\n            }\n        }\n    }\n\n    // Event listeners\n    const handleDragDrop = (e) => {\n        // Data of piece dragged on this tile      \n        const pieceData = getDragData(e);\n\n        // If it isn't a cemented tile\n        if (!usedTiles.current.includes(pieceData.tileID)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n\n            let id = pieceData['id'];\n            let char = pieceData['char'];\n            let weight = pieceData['weight'];\n            let isTransformed = pieceData['isTransformed'];\n\n            // Keep the previous tile id\n            prevTileID = pieceData['tileID'];\n\n            if (char === \" \") {\n                // Initiate Show modal. Also save the original pieceID and this tileID\n                props.setRequestChoosePiece({ tileID: tileID, pieceID: id, status: true });\n            }\n            else {\n                // Off modal/Reset modal pipeline\n                props.setRequestChoosePiece({ tileID: \"\", pieceID: id, status: false });\n\n                let newPiece = <Piece\n                    id={id}\n                    char={char}\n                    onBoard={true}\n                    weight={weight}\n                    tileID={tileID}\n                    isTransformed={isTransformed}\n                    dragEndHandler={dragEndHandler}\n                />;\n\n                // Tell other players\n                sio.emit('inPlayEvent', {\n                    roomID: player.current.roomID,\n                    pieceData: {\n                        id,\n                        char,\n                        weight,\n                        tileID,\n                        prevTileID,\n                        isTransformed,\n                        onBoard: true,\n                    }\n                });\n                // Update parent with new tile-piece association\n                setPlayedTiles([...playedTiles.current, tileID]);\n                setPlayedPiece(newPiece); // Associate piece with Tile\n            }\n        }\n    }\n\n    const handleDragOver = (e) => e.preventDefault();\n    const handleDragEnter = (e) => e.preventDefault();\n    const handleDragLeave = (e) => e.preventDefault();\n\n\n    // Effects\n    // Use turn of player to register and unregister event handlers\n    // Essentially, turn off tile-listening ability if it's not player's\n    // turn; and, of course, turn it back on if it's his/her turn?\n    useEffect(() => {\n        if (player.current.turn) thisTile.current.addEventListener(\"drop\", handleDragDrop);\n        else thisTile.current.removeEventListener(\"drop\", handleDragDrop);\n        return () => thisTile.current.removeEventListener(\"drop\", handleDragDrop);\n    }, [player.current.turn]);\n\n    useEffect(() => {\n        if (player.current.turn) thisTile.current.addEventListener(\"dragover\", handleDragOver);\n        else thisTile.current.removeEventListener(\"dragover\", handleDragOver);\n        return () => thisTile.current.removeEventListener(\"dragover\", handleDragOver);\n    }, [player.current.turn]);\n\n    useEffect(() => {\n        if (player.current.turn) thisTile.current.addEventListener(\"dragleave\", handleDragLeave);\n        else thisTile.current.removeEventListener(\"dragleave\", handleDragLeave);\n        return () => thisTile.current.removeEventListener(\"dragleave\", handleDragLeave);\n    }, [player.current.turn]);\n\n    useEffect(() => {\n        if (player.current.turn) thisTile.current.addEventListener(\"dragenter\", handleDragEnter);\n        else thisTile.current.removeEventListener(\"dragenter\", handleDragEnter);\n        return () => thisTile.current.removeEventListener(\"dragenter\", handleDragEnter)\n    }, [player.current.turn]);\n\n\n    return (\n        <div id={tileID} ref={thisTile} className={`${tileColors[type]} flex flex-col justify-around items-center h-14 w-14 border border-black border-opacity-70`}>\n            {(props.type === \"startTile\") && !playedPiece ?\n                <div className=\"justify-center items-center\">\n                    <Star fill=\"white\" strokeWidth=\"0\" size={24} />\n                </div> : null}\n            {playedPiece}\n        </div>\n    )\n});\n\nexport default Tile;","import React, { useContext } from \"react\";\nimport { GameContext } from \"../context\";\nimport Piece from \"./Piece\";\n\nexport default function Modal(props) {\n    const { bag } = useContext(GameContext);\n\n    let modal =\n        props.mode === \"chooseLetter\" // Choose a letter\n            ? <>\n                <div className=\"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n                    <div className=\"relative w-auto my-6 mx-auto max-w-3xl\">\n                        <div className=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\n                            <div className=\"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t\">\n                                <h3 className=\"text-2xl font-semibold\">\n                                    Wildcard Transformation\n                                </h3>\n                                <div className=\"text-md pt-1 text-gray-500\">Choose a piece to replace the wildcard with</div>\n                            </div>\n                            <div className=\"relative pt-7 p-10 flex justify-center flex-wrap\">\n                                {\n                                    Object.values(bag.current.pieces).filter((piece) => piece.piece !== \" \").map((piece, index) => {\n                                        return (\n                                            <div key={index} onClick={() => props.modalHandler(piece.piece)} className=\"mx-4 my-4\">\n                                                <Piece char={piece.piece} weight={0} />\n                                            </div>\n                                        );\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"opacity-75 fixed inset-0 z-40 bg-black\"></div>\n            </>\n            : // Normal showing on bag click\n            <>\n                <div className=\"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n                    <div className=\"relative w-auto my-6 mx-auto max-w-3xl\">\n                        <div className=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\n                            <div className=\"flex items-start justify-center pt-5 p-4 border-b border-solid border-blueGray-200 rounded-t\">\n                                <h3 className=\"text-2xl font-semibold\">\n                                    Contents of the Scrabble Bag\n                                </h3>\n                            </div>\n                            <div className=\"relative pt-7 p-10 flex justify-center flex-wrap\">\n                                {\n                                    Object.values(bag.current.pieces).map((piece, index) => {\n                                        return (\n                                            <div key={index} className=\"mx-4 my-4\">\n                                                <Piece isStatic={true} char={piece.piece} weight={piece.weight} />\n                                                <div className=\"self-center mt-1 text-xs text-gray-900\">\n                                                    {piece.number} left\n                                                </div>\n                                            </div>\n                                        );\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"opacity-75 fixed inset-0 z-40 bg-black\"></div>\n            </>\n\n    return (props.show ? modal : null);\n}","import axios from 'axios';\nimport { API_URL, SERVER_TOKEN } from './constants'\n\naxios.defaults.baseURL = API_URL;\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.headers.common['Authorization'] = `Bearer ${SERVER_TOKEN}`;\n\naxios.interceptors.request.use(request => {\n    // console.log(request);\n    // Edit request config\n    return request;\n}, error => {\n    console.log(error);\n    return Promise.reject(error);\n});\n\naxios.interceptors.response.use(response => {\n    // console.log(response);\n    // Edit response config\n    return response;\n}, error => {\n    console.log(error);\n    return Promise.reject(error);\n});\n\nconst makeServerRequest = (opts) => {\n    // Payload is params for GET and same for POST\n    return axios[opts.requestType](opts.url, opts.payload)\n        .then(r => r.data)\n        .catch(e => console.log(e.data));\n}\n\nexport default makeServerRequest;","import { useEffect, useRef, useState, useCallback } from 'react';\nimport makeServerRequest from './xhr';\n\n\nfunction useFetch(requestParams) {\n    const [data, setData] = useState();\n\n    useEffect(() => {\n        const goGet = async () => {\n            const response = await makeServerRequest(requestParams);\n            setData(response);\n        }\n        goGet();\n    }, [requestParams.url]);\n    return data;\n}\n\n\nfunction useStateRef(defaultValue) {\n    let [state, setState] = useState(defaultValue)\n    let ref = useRef(state)\n\n    let dispatch = useCallback(function (val) {\n        ref.current = typeof val === \"function\" ?\n            val(ref.current) : val\n\n        setState(ref.current)\n    }, []);\n\n    return [state, dispatch, ref]\n}\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n      case true: return true \n      default: return false\n     }\n  }\n\nfunction useEventListener(eventName, handler, element = window) {\n    const savedHandler = useRef();\n\n    useEffect(() => {\n        savedHandler.current = handler;\n    }, [handler]);\n\n    useEffect(\n        () => {\n            // Make sure element supports addEventListener\n            const isSupported = element && element.addEventListener;\n            if (!isSupported) return;\n            // Create event listener that calls handler function stored in ref\n            const eventListener = (event) => savedHandler.current(event);\n            // Add event listener\n            element.addEventListener(eventName, eventListener);\n            // Remove event listener on cleanup\n            return () => {\n                element.removeEventListener(eventName, eventListener);\n            };\n        },\n        [eventName, element] // Re-run if eventName or element changes\n    );\n}\n\nexport { reducer };\nexport { useFetch };\nexport { useStateRef };\nexport { useEventListener };","import React, { useContext, useEffect, useRef } from 'react';\nimport { GameContext, SocketIOContext } from '../context';\nimport { excludeMeSioEvent } from '../utils';\nimport Legend from './Legend';\nimport Piece from './Piece';\nimport Tile from './Tile';\nimport Modal from './Modal';\nimport { useStateRef } from '../hooks';\n\n\n// 15 tiles per row\nconst tilePerRow = 15;\nconst GameBoard = (props) => {\n\n    let rows = [];\n    const tileRefs = useRef([]);\n\n    const sio = useContext(SocketIOContext);\n    const [_, setRequestChoosePiece, requestChoosePiece] = useStateRef({ tileID: \"\", pieceID: \"\", status: false });\n    const { player, playFlag, usedTiles, setPlayFlag, playedTiles, setPlayedWords, setPlayedTiles, recallFlag, setRecallFlag } = useContext(GameContext);\n\n\n    // Register Event Listeners\n    useEffect(() => {\n        const dispatch = ({ pieceData }) => {\n            let newPiece = <Piece\n                isPlayed={false}\n                id={pieceData.id}\n                char={pieceData.char}\n                weight={pieceData.weight}\n                tileID={pieceData.tileID}\n                onBoard={pieceData.onBoard}\n                isTransformed={pieceData.isTransformed}\n            />;\n\n            // [Board/Rack]-Rack. Piece diasppears. Ensure other player's played tiles cannot be dragged to own rack\n            if (pieceData.toRackMove) {\n                if (pieceData.tileID && !usedTiles.current.includes(pieceData.tileID)) {\n                    // Board-Rack. Remove from board\n                    removePieceFromTile(pieceData.tileID);\n                    setPlayedTiles(playedTiles.current.filter((tID) => tID !== pieceData.tileID));\n                    // Rack-Rack. Do nothing.\n                }\n            }\n            // [Rack/Board]-Board. Piece appears\n            else {\n                // If previous piece, remove it. (Board-Board)\n                if (pieceData.prevTileID) {\n                    removePieceFromTile(pieceData.prevTileID);\n                    setPlayedTiles(playedTiles.current.filter((tID) => tID !== pieceData.prevTileID))\n                }\n                // Eventually add new piece ([Rack/Board]-Board)\n                addPieceToTile(pieceData.tileID, newPiece);\n\n                // Save played tiles if it's not me that played. Incase the player calls a recall\n                if (!player.current.turn) setPlayedTiles([...playedTiles.current, pieceData.tileID]);\n            }\n        }\n\n        // Add played piece to board for every player\n        excludeMeSioEvent(sio, \"inPlay\", player.current.name, dispatch)\n    }, [player.current]);\n\n\n    // Register Event Listeners\n    useEffect(() => {\n        // Recall pieces for every player except me\n        const dispatch = (data) => setRecallFlag(true);\n        excludeMeSioEvent(sio, \"recallPieces\", player.current.name, dispatch)\n    }, [player.current]);\n\n\n    // Remove tile pieces if recall is pressed on Rack\n    useEffect(() => {\n        if (recallFlag.current) {\n            for (const tileID of playedTiles.current) {\n                removePieceFromTile(tileID);\n            }\n            setRecallFlag(false);\n            setPlayedTiles([]);\n        }\n    }, [recallFlag.current]);\n\n\n    // Remove tile pieces if recall is pressed on Rack\n    useEffect(() => {\n        if (playFlag.current) {\n            setPlayedWords(getPlayedWords());\n            setPlayFlag(false);\n        }\n    }, [playFlag.current]);\n\n\n    // Create new ref to each tile until all tiles have been referenced\n    useEffect(() => {\n        tileRefs.current = Array(rows.length * tilePerRow)\n            .fill().map((_, i) => tileRefs.current[i]);\n    }, [rows.length]);\n\n\n    // Create all tiles\n    for (let index = 0; index < tilePerRow; index++) {\n        let tileRows = [];\n        let tileRow = (index * tilePerRow);\n\n        if (index === 0 || index === 14) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 3 || i === 11) tileType = \"doubleLetter\";\n                if (i === 0 || i === 7 || i === 14) tileType = \"tripleWord\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    key={tileRow + i}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n        if (index === 1 || index === 13) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 1 || i === 13) tileType = \"doubleWord\";\n                if (i === 5 || i === 9) tileType = \"tripleLetter\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    key={tileRow + i}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n        if (index === 2 || index === 12) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 2 || i === 12) tileType = \"doubleWord\";\n                if (i === 6 || i === 8) tileType = \"doubleLetter\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    key={tileRow + i}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n        if (index === 3 || index === 11) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 3 || i === 11) tileType = \"doubleWord\";\n                if (i === 0 || i === 7 || i === 14) tileType = \"doubleLetter\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    key={tileRow + i}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n        if (index === 4 || index === 10) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 4 || i === 10) tileType = \"doubleWord\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    key={tileRow + i}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n        if (index === 5 || index === 9) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 5 || i === 9 || i === 1 || i === 13) tileType = \"tripleLetter\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    key={tileRow + i}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n        if (index === 6 || index === 8) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 2 || i === 6 || i === 8 || i === 12) tileType = \"doubleLetter\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    key={tileRow + i}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n        if (index === 7) {\n            for (let i = 0; i < tilePerRow; i++) {\n                let tileType = \"normal\";\n                if (i === 7) tileType = \"startTile\";\n                if (i === 0 || i === 14) tileType = \"tripleWord\";\n                if (i === 3 || i === 11) tileType = \"doubleLetter\";\n                let tile = <Tile\n                    type={tileType}\n                    id={tileRow + i}\n                    key={tileRow + i}\n                    setRequestChoosePiece={setRequestChoosePiece}\n                    ref={el => tileRefs.current[tileRow + i] = el}\n                />;\n                tileRows.push(tile);\n            }\n        }\n\n        // Push the entire tile row\n        rows.push(<div className=\"flex border-opacity-100\" key={index}> {tileRows} </div>);\n    }\n\n\n    const getTile = (refIndex) => tileRefs.current[refIndex];\n    const removePieceFromTile = (refIndex) => getTile(refIndex).removePiece();\n    const addPieceToTile = (refIndex, piece) => getTile(refIndex).addPiece(piece);\n\n\n    // Returns if a passed in tile and position is at\n    // the edge of the board in said position\n    const isBoardEdge = (position, index) => {\n        if (position === 'top') {\n            return index >= 0 && index < 15;\n        }\n        else if (position === 'bottom') {\n            return index > 209 && index < 225;\n        }\n        else if (position === 'left') {\n            return (index % 15) === 0;\n        }\n        else { // Implicit right\n            return (index % 15) === 14;\n        }\n    }\n\n\n    // Get words that were played\n    const getPlayedWords = () => {\n        let wv, wh, words = [];\n\n        for (const tileIndex of playedTiles.current) {\n            let thisTile = getTile(tileIndex).getPiece();\n\n            // Get words at the left, right, top, and bottom\n            let wordsTop = getPiecesInPosition(tileIndex, \"top\");\n            let wordsLeft = getPiecesInPosition(tileIndex, \"left\");\n            let wordsDown = getPiecesInPosition(tileIndex, \"bottom\");\n            let wordsRight = getPiecesInPosition(tileIndex, \"right\");\n\n            // English words are read left-right/top-bottom. \n            // Extract in same manner\n            wv = [...wordsTop, thisTile, ...wordsDown];\n            wh = [...wordsLeft, thisTile, ...wordsRight];\n\n            // Skip the empty and single words\n            if (wv.length > 1) words.push(wv);\n            if (wh.length > 1) words.push(wh);\n        }\n\n        // Return non-duplicates\n        return words.filter((v, i, a) => a.findIndex(t => (JSON.stringify(t) === JSON.stringify(v))) === i);\n    }\n\n\n    // Returns the word(s) at the position of the piece at index\n    const getPiecesInPosition = (index, position) => {\n        let ind, loopLength, words = [];\n\n        if (position === \"right\" || position === \"left\") loopLength = 1;\n        else loopLength = 15; // Implicit top or down\n\n        if (isBoardEdge(position, index)) return words;\n\n        while (true) {\n            // Go forward for right and down. Go backwards, otherwise\n            if (position === \"right\" || position === \"bottom\") ind = index + loopLength\n            else ind = index - loopLength;\n\n            let tile = getTile(ind); // Get the tile at said index on board\n\n            if (tile.hasPiece()) {\n                // Right and below should be appended to the end of th word list.\n                // Left and above should be prepended.\n                if (position === \"right\" || position === \"bottom\") words.push(tile.getPiece())\n                else words.unshift(tile.getPiece());\n\n                if (position === \"right\" || position === \"left\") loopLength += 1\n                else loopLength += 15;\n\n                // After getting the piece, check if the piece is at\n                // the edge of the board. If it is, then exit, as there\n                // will be nothing in the next position.\n                if (isBoardEdge(position, ind)) break;\n            }\n            else break;\n        }\n\n        return words\n    }\n\n\n    // Handle modal for choosing letter\n    const modalHandler = (piece) => {\n\n        // Create a transformed blank piece\n        let transformedBlankPiece = <Piece\n            // isPlayed={true}\n            weight={0}\n            char={piece}\n            onBoard={true}\n            isTransformed={true}\n            id={requestChoosePiece.current.pieceID}\n            tileID={requestChoosePiece.current.tileID}\n        />;\n\n        // Add piece to tile\n        addPieceToTile(requestChoosePiece.current.tileID, transformedBlankPiece);\n\n        // Tell parent for possible removal\n        setPlayedTiles([...playedTiles.current, requestChoosePiece.current.tileID]);\n\n        // Tell other players\n        sio.emit('inPlayEvent', {\n            roomID: player.current.roomID,\n            pieceData: {\n                weight: 0,\n                char: piece,\n                onBoard: true,\n                isTransformed: true,\n                id: requestChoosePiece.current.pieceID,\n                tileID: requestChoosePiece.current.tileID,\n            }\n        });\n\n        // Switch Off modal\n        setRequestChoosePiece({ tileID: \"\", pieceID: \"\", status: false });\n    }\n\n\n\n    return (\n        <div className=\"space-y-4 \">\n            <div style={{ height: \"fit-content\" }} className=\"block border-8 border-black rounded-md\"> {rows} </div>\n            <Legend />\n            <Modal modalHandler={modalHandler} mode=\"chooseLetter\" show={requestChoosePiece.current.status} />\n        </div>\n    )\n};\n\nexport default GameBoard;","import React, { useState, useEffect, useContext } from 'react';\nimport { Wifi, WifiOff, Share2 } from 'react-feather';\nimport makeServerRequest from '../xhr';\n\nconst iconSize = 26;\nconst pingDelay = 10000;\n\nconst Connection = (props) => {\n    let icon, iconStatus;\n\n    // State\n    const [ping, setPing] = useState(1);\n    const [status, setStatus] = useState(\"on\");\n    const [pingIntervalID, setPingIntervalID] = useState();\n\n\n    // Server ping\n    useEffect(() => {\n        let iID = setInterval(() => {\n            pingServer();\n        }, pingDelay);\n\n        setPingIntervalID(iID);\n        return () => clearInterval(pingIntervalID);\n\n    }, []); // [] ensures only on first render\n\n\n    // Server ping duration\n    const pingServer = async () => {\n        let startTime = new Date(); // Record start time\n\n        // Make request\n        let response = await makeServerRequest({ requestType: 'get', url: `/ping`, payload: {} });\n\n        // If successful\n        if (response && response.status === \"pingSuccess\") {\n            let endTime = new Date(); // Record end time\n\n            let pingDuration = endTime.getTime() - startTime.getTime();\n            setPing(pingDuration); // Save difference\n\n            // Set Icon\n            if (pingDuration < 120) setStatus(\"on\");\n            else if (pingDuration < 500) setStatus(\"warning\");\n            else setStatus(\"off\");\n        }\n        else setStatus(\"off\");\n    }\n\n\n    // Determine icon\n    if (status === \"on\") {\n        iconStatus = \"Connection is good\";\n        icon = <Wifi size={iconSize} color=\"#1fe03d\" />;\n    }\n    else if (status === \"off\") {\n        iconStatus = \"Server disconnected. Trying to reconnect\";\n        icon = <WifiOff size={iconSize} color=\"#f32b0c\" />;\n    }\n    else {\n        icon = <Wifi size={iconSize} color=\"#ffd100\" />\n        iconStatus = \"Connection is poor. Delays may occur\";\n    }\n\n    return (\n        <div className=\"flex justify-end items-center\">\n            <div className=\"flex space-x-1\">\n                <div title={iconStatus} className=\"cursor-help flex-none\">{icon}</div>\n                <div title=\"Server ping\" className=\"cursor-help flex-none text-gray-500\">{ping}ms</div>\n            </div>\n        </div>\n\n    );\n};\n\nexport default Connection;","import { Volume2, Radio, Mic, User } from 'react-feather';\nimport React, { useContext, useEffect } from 'react';\nimport { GameContext } from '../context';\nimport { useStateRef } from '../hooks';\nimport { countUp } from '../utils';\n\n\nconst ScoreBoard = () => {\n\n    const [_, setBoard, board] = useStateRef([]);\n    const { player, players } = useContext(GameContext);\n    \n    useEffect(() => {\n        let tableRows = [];\n        for (const [index, p] of players.current.entries()) {\n            let tableRow = <tr key={index}>\n                <td className={`text-left capitalize border ${p.turn ? \"font-bold\" : \"\"} border-gray-300 px-4 py-2 text-black-600 font-medium`}>\n                    {p.name}\n                    <span className=\"inline pl-1\">{player.current.name === p.name ? <span title={`This is You${p.turn ? \". It's also your turn to play\" : \"\"}`}><User title=\"You\" size={22} className=\"inline pb-1\" fill=\"black\" strokeWidth={1} /> </span> : null}</span>\n                    <span className=\"inline\">{p.isSpeaking ? <span title=\"This person is currently recording\"> <Radio size={22} className=\"inline pb-1\" /></span> : null}</span>\n                </td>\n                <td className=\"border border-gray-300 px-4 py-2 text-black-600 font-medium\">{countUp(p.score)}</td>\n            </tr>\n            tableRows.push(tableRow);\n        }\n        setBoard(tableRows);\n    }, [player.current, players.current]);\n\n    return (\n        <div className=\"flex justify-end\">\n            <table className=\"table-auto w-80\">\n                <thead>\n                    <tr className=\"bg-gray-100\">\n                        <th className=\"text-left border border-gray-300 px-4 py-2 text-black-600\">Player</th>\n                        <th className=\"border border-gray-300 px-4 py-2 text-black-600\">Score</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {board.current}\n                </tbody>\n            </table>\n        </div>\n    )\n};\n\nexport default ScoreBoard;","import React, { useContext, useEffect } from 'react';\nimport { AlertCircle, Bell, } from 'react-feather';\nimport { NotificationContext } from '../context';\nimport { useStateRef } from '../hooks';\n\nconst Notification = (props) => {\n\n    // let ns = [];\n    const { notifications } = useContext(NotificationContext);\n    const [_, setTimeoutNotifications, timeoutNotifications] = useStateRef([]);\n\n    useEffect(() => {\n        for (const [index, notification] of notifications.current.entries()) {\n\n            let classNames, iconType;\n\n            if (notification.type === \"info\") {\n                iconType = <AlertCircle size={22} />;\n                classNames = \"bg-blue-100 flex items-center border border-blue-300 text-blue-900 px-4 py-4 rounded relative\";\n            }\n            else if (notification.type === \"success\") {\n                iconType = <Bell size={22} />;\n                classNames = \"bg-green-100 flex items-center border border-green-300 text-green-800 px-4 py-4 rounded relative\";\n            }\n            else if (notification.type === \"error\") {\n                iconType = <AlertCircle size={22} />;\n                classNames = \"bg-red-100 flex items-center border border-red-300 text-red-800 px-4 py-4 rounded relative\";\n            }\n            else if (notification.type === \"warning\") {\n                iconType = <AlertCircle size={22} />;\n                classNames = \"bg-yellow-100 flex items-center border border-yellow-300 text-yellow-800 px-4 py-4 rounded relative\";\n            }\n            else {\n                iconType = <Bell size={22} />;\n                classNames = \"bg-center-100 flex items-center text-white center-500 text-center-800 px-4 py-4 rounded relative\";\n            }\n\n            let newNotification = <div key={index}>\n                <div className={classNames}>\n                    <span className=\"inline pr-4\">{iconType}</span>\n                    <span className=\"inline text-left\">{notification.message}</span>\n                </div>\n                <div className=\"pb-2\"></div>\n            </div>;\n\n            // Add to state\n            setTimeoutNotifications([newNotification]);\n        }\n    }, [notifications.current]);\n\n    return (timeoutNotifications.current)\n};\n\nexport default Notification;","import React, { useRef, useEffect } from \"react\";\nimport { useStateRef } from \"../hooks\";\nimport Piece from \"./Piece\";\nimport { Check, X } from \"react-feather\";\n\nexport default function SwapModal(props) {\n\n    const checkBoxRefs = useRef([]);\n    const [_, setShowConfirm, showConfirm] = useStateRef(false);\n\n    // Create new ref to each tile until all tiles have been referenced\n    useEffect(() => {\n        checkBoxRefs.current = Array(props.pieces.length)\n            .fill().map((_, i) => checkBoxRefs.current[i]);\n    }, [props.pieces.length]);\n\n\n    const handleOnChange = (e) => {\n        let checkedBoxes = checkBoxRefs.current.filter((checkBox) => checkBox.checked === true);\n        if (checkedBoxes.length > 0) setShowConfirm(true)\n        else setShowConfirm(false);\n    }\n\n    // Only need the IDs to swap pieces\n    const getCheckedBoxesIDs = () => {\n        let checkedBoxes = [];\n        for (const checkBox of checkBoxRefs.current) {\n            if (checkBox.checked === true) checkedBoxes.push(checkBox.id);\n        }\n        return checkedBoxes;\n    }\n\n    return props.show ? <>\n        <div className=\"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n            <div className=\"relative w-auto my-6 mx-auto max-w-3xl\">\n                <div className=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\n                    <div className=\"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t\">\n                        <h3 className=\"text-2xl font-semibold\">\n                            Exchange Pieces for a Turn\n                        </h3>\n                        <div className=\"text-md pt-1 text-gray-500\">Use the checkboxes to select the pieces to swap</div>\n                    </div>\n                    <div className=\"relative flex flex-col p-10 pb-9 pt-8 flex justify-center flex-wrap\">\n                        <div className=\"flex justify-center block\">{\n                            props.pieces.map((piece, index) => {\n                                return (\n                                    <div key={index} className=\"mx-4 my-4 mt-2\">\n                                        <Piece isStatic={true} char={piece.piece} weight={piece.weight} />\n                                        <div className=\"self-center mt-1 text-xs text-gray-900\">\n                                            <label className=\"inline-flex items-center\">\n                                                <input onChange={handleOnChange} id={piece.id} ref={el => checkBoxRefs.current[index] = el} type=\"checkbox\" />\n                                            </label>\n                                        </div>\n                                    </div>\n                                );\n                            })\n                        }\n                        </div>\n                        <div className=\"my-4 mb-2 space-x-6 block\">\n                            <button onClick={() => { setShowConfirm(false); props.swapCancelHandler() }} className=\"w-32 bg-red-600 hover:bg-red-700 text-white inline font-bold py-2 px-4 border border-red-700 rounded\">\n                                <X className=\"inline\" strokeWidth={3} size={22} />\n                                <span className=\"pl-1 pr-2 text-md\">Cancel</span>\n                            </button>\n                            {showConfirm.current ? <button onClick={() => { props.swapConfirmHandler(getCheckedBoxesIDs()) }} className=\"w-36 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 border border-green-700 rounded\">\n                                <Check className=\"inline\" strokeWidth={3} size={22} />\n                                <span className=\"pl-1 pr-2 text-md\">Confirm</span>\n                            </button> : null}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div className=\"opacity-75 fixed inset-0 z-40 bg-black\"></div>\n    </> : null\n}","import React from 'react';\nimport { RotateCcw, Play, Shuffle, Repeat, SkipForward, Loader } from 'react-feather';\n\nconst descriptions = {\n    \"play\": \"Play as turn\",\n    \"shuffle\": \"Shuffle pieces on Rack\",\n    \"recall\": \"Recall played pieces\",\n    \"swap\": \"Swap pieces in place of turn\",\n    \"skip\": \"Skip turn\",\n    \"draw\": \"Start the game\",\n}\n\nconst ControlButton = ({ type, size, handler }) => {\n    let icon, className;\n\n    // Set css class\n    if (type === \"play\") {\n        className = \"flex justify-center items-center hover:border-l-2 hover:border-green-600 bg-green-500 hover:bg-green-700 text-white font-bold w-12 h-12 border-green-600 hover:border-green-500\";\n    }\n    else if (type === \"draw\") {\n        className = \"flex justify-center items-center hover:border-l-2 hover:border-yellow-300 bg-yellow-200 hover:bg-yellow-300 text-black font-normal px-10 w-12 h-12 border-2 border-yellow-300 hover:border-yellow-300\";\n    }\n    else {\n        className = \"flex justify-center items-center bg-blue-600 border-r-2 border-blue-700  hover:bg-blue-700 text-white font-bold w-12 h-12 border-blue-600 hover:border-blue-700\";\n    }\n\n    // Set button icon\n    if (type === \"recall\") icon = <RotateCcw strokeWidth=\"2.5\" size={size} />\n    else if (type === \"play\") icon = <Play fill=\"white\" strokeWidth=\"2.5\" size={size} />\n    else if (type === \"shuffle\") icon = <Shuffle strokeWidth=\"2.5\" size={size} />\n    else if (type === \"swap\") icon = <Repeat strokeWidth=\"2.5\" size={size} />\n    else if (type === \"skip\") icon = <SkipForward strokeWidth=\"2.5\" size={size} />\n    else if (type === \"draw\") icon = \"Draw\"\n\n    const loader = <button className={`${className}`}>\n        <Loader strokeWidth={3} size={22} className=\"animate-spin\" />\n    </button>\n\n    return (\n        <button title={descriptions[type]} className={`${className}`} onClick={handler}>\n            {icon}\n        </button>\n    )\n}\n\nexport default ControlButton;","import { useContext, useEffect } from \"react\";\nimport { useReactMediaRecorder } from \"react-media-recorder\";\nimport { GameContext, SocketIOContext } from \"../context\";\nimport { Mic, MicOff } from \"react-feather\";\nimport { useStateRef } from \"../hooks\";\n\n\n\nconst Audio = () => {\n    const {\n        mediaBlobUrl,\n        clearBlobUrl,\n        stopRecording,\n        startRecording,\n    } = useReactMediaRecorder({ audio: { type: \"audio/ogg\" }, askPermissionOnMount: true });\n\n\n    const sio = useContext(SocketIOContext);\n    const [_, setIsMuted, isMuted] = useStateRef(true);\n    const [__, setAudioBlob, audioBlob] = useStateRef(null);\n    const [___, setSpeakerName, speakerName] = useStateRef(\"\");\n    const { player, setPlayer, players, setPlayers } = useContext(GameContext);\n\n\n    const toggleAudioMute = () => {\n        isMuted.current === false ? setIsMuted(true) : setIsMuted(false);\n    }\n\n    const transmitAudio = () => {\n        clearBlobUrl(); // Clear any blob\n        startRecording(); // Start audio\n        stopRecording(); // Stop audio\n    }\n\n    useEffect(() => {\n        if (!isMuted.current) {\n            transmitAudio();\n            setPlayer({ ...player.current, isSpeaking: true });\n        }\n        else {\n            stopRecording();\n            setPlayer({ ...player.current, isSpeaking: false });\n        }\n\n        sio.emit(\"radioEvent\", {\n            audioBlob: mediaBlobUrl,\n            roomID: player.current.roomID,\n            speakerName: player.current.name,\n            isSpeaking: player.current.isSpeaking,\n        });\n\n    }, [mediaBlobUrl, isMuted.current]);\n\n\n    useEffect(() => {\n        sio.on(\"audioTransmission\", (data) => {\n            // Update other players\n            let updatedPlayers = [];\n            for (const p of players.current) {\n                if (data.speakerName === p.name) {\n                    if (data.isSpeaking) p['isSpeaking'] = true;\n                    else p['isSpeaking'] = false;\n                }\n                updatedPlayers.push(p);\n            }\n\n            setAudioBlob(null);\n            setPlayers(updatedPlayers);\n            setAudioBlob(data.audioBlob);\n            setSpeakerName(data.speakerName);\n        });\n    }, []);\n\n\n    return (\n        <div>\n            <button\n                title={isMuted.current ? \"Audio off. Click to record\" : \"Audio is recording. Click to stop\"}\n                onClick={toggleAudioMute}\n                className=\"flex justify-center items-center hover:border bg-yellow-200 hover:bg-yellow-300 text-white font-bold w-12 h-12 border border-yellow-400 hover:border-yellow-200\">\n                {isMuted.current ? <MicOff color=\"black\" strokeWidth=\"2.5\" size={20} /> : <Mic color=\"black\" strokeWidth=\"2.5\" size={20} />}\n            </button>\n\n            {/* Only play audio that doesn't originate from me */}\n            {!player.current.isSpeaking // I'm not speaking\n                && audioBlob.current    // Theres' audio to play\n                && speakerName.current !== player.current.name // Audio isn't mine\n                ? <audio className=\"hidden\" src={audioBlob.current} autoPlay />  // Create element and play\n                : null\n            }\n        </div>\n    );\n};\n\nexport default Audio;","import React, { useContext, useEffect } from 'react';\nimport ControlButton from './ControlButton';\nimport Audio from './Audio';\nimport { GameContext } from '../context';\nimport { useStateRef } from '../hooks';\n\nconst iconSize = 20;\n\n\nconst Controls = (props) => {\n    const { player, gameStarted, allowAudio } = useContext(GameContext);\n    const [_, setControlButtons, controlButtons] = useStateRef([]);\n\n    useEffect(() => {\n        let buttons = [];\n        // Push global buttons\n        for (const [index, type] of [\"recall\", \"shuffle\", \"swap\", \"skip\", \"play\"].entries()) {\n            buttons.push(<ControlButton handler={props[type]} key={index} type={type} size={iconSize} />)\n        }\n        // If game hasn't started and player is host\n        if (player.current.isHost && !gameStarted.current) {\n            buttons.push(<ControlButton handler={props.draw} key={6} type={\"draw\"} size={iconSize} />)\n        }\n        setControlButtons(buttons);\n    }, [gameStarted.current, player.current]);\n\n    return (\n        <div className=\"flex items-center justify-center space-x-0 bg-blue-600\">\n            {allowAudio.current ? <Audio /> : null}\n            {controlButtons.current}\n        </div>\n    )\n}\n\nexport default Controls;","import React from 'react';\nimport { countDown } from '../utils';\nimport { ShoppingBag } from 'react-feather';\nimport Modal from './Modal';\nimport { useStateRef } from '../hooks';\n\nconst Bag = ({ bag }) => {\n\n    const [_, setShowContents, showContents] = useStateRef(false);\n\n    return (\n        <div title={`${bag.length} pieces remaining`} onClick={() => setShowContents(!showContents.current)} className=\"flex items-end space-x-0\">\n            <div className=\"flex-none\"><ShoppingBag className=\"cursor-pointer\" fill=\"gray\" size={36} /></div>\n            <div className=\"flex-none cursor-pointer text-gray-500 text-sm\">{countDown(bag.length)}</div>\n            <Modal show={showContents.current} />\n        </div>\n    )\n}\n\nexport default Bag;","import React, { useEffect, useRef, useContext } from 'react';\nimport { SocketIOContext, ValidDragContext, GameContext, NotificationContext } from '../context';\nimport { getDragData, inPlaceShuffle, secondsToMMSS } from '../utils';\nimport { useStateRef } from '../hooks';\nimport makeServerRequest from '../xhr';\nimport { Clock } from 'react-feather';\nimport SwapModal from './SwapModal';\nimport Controls from './Controls';\nimport Piece from './Piece';\nimport Bag from './Bag';\n\n\n\nconst Rack = (props) => {\n\n    const thisRack = useRef();\n    const [_c, setTryCount, tryCount] = useStateRef(0);\n    const [_, setPieces, currPieces] = useStateRef([]);\n    const [__, setStartSwap, startSwap] = useStateRef(false);\n    const [__d, setCountDownID, countDownID] = useStateRef(\"\");\n    const [___, setPlayedPieces, currPlayedPieces] = useStateRef([]);\n\n    const sio = useContext(SocketIOContext);\n    const { setValidDrag } = useContext(ValidDragContext);\n    const { notifications, setNotifications } = useContext(NotificationContext);\n    const { player, setPlayer, bag, setPlayedWords, setPlayFlag, gameStarted, timeToPlay, playedTiles, playedWords, usedTiles, gameEnded, setRecallFlag } = useContext(GameContext);\n    const [_a_, setCountDown, countDown] = useStateRef(timeToPlay.current);\n\n\n    // Get 7 pieces when game starts\n    useEffect(() => {\n        async function getPieces() {\n            if (currPieces.current.length === 0) {\n                setPieces(await getFromBag(7));\n            }\n        }\n        getPieces();\n    }, []); // [] ensures only on first render\n\n\n    // If game ends, recompute score and announce\n    useEffect(async () => {\n        if (gameEnded.current) {\n            let score = player.current.score;\n\n            // Decrement each piece's weight from score\n            for (const piece of currPieces.current) score -= piece.weight\n\n            let response = await makeServerRequest({\n                requestType: \"post\",\n                url: \"/scores\",\n                payload: {\n                    score: score,\n                    name: player.current.name,\n                    roomID: player.current.roomID,\n                },\n            });\n            if (response.status === \"success\") setPlayer({ ...player.current, turn: false })\n        }\n    }, [gameEnded.current]);\n\n\n    // Effect from Game board\n    useEffect(async () => {\n        if (playedWords.current.length > 0) {\n\n            // Have three chances to play validly\n            // After three, turn is auto skipped\n            if (tryCount.current >= 3) {\n                actualTurnSkip(); // Auto skip turn\n                setTryCount(0); // Reset play chances\n                return;\n            }\n\n            // Get the played words as a list of strings, instead of a list of object strings\n            let playedWordsStr = playedWords.current.map(word => word.map(char => char.char).join(\"\"));\n\n            // Validate the played words from the Scrabble DB\n            let response = await validatePlayedWords(playedWordsStr);\n\n            if (response.status === \"error\") {\n                // Increment play chances\n                setTryCount(tryCount.current + 1);\n\n                setNotifications([{\n                    type: \"error\",\n                    message: response.message,\n                }]);\n            }\n            else {\n                // Determine if bag is already empty when player played\n                let bagIsEmpty = bag.current.length === 0;\n\n                // Determine if rack is empty (all pieces were played)\n                let rackIsEmpty = currPieces.current.length === 0;\n\n                // Compute the score from played words and get the actual played word\n                let playedWord = getPlayedWord(playedWordsStr, currPlayedPieces.current)\n                let score = computeScore(playedWords.current, currPlayedPieces.current.length === 7)\n\n                // Refill rack\n                await refillRack(currPlayedPieces.current.length);\n\n                // Reset played pieces\n                setPlayedPieces([]);\n\n                // Tell everybody\n                sio.emit('playEvent', {\n                    score: score,\n                    word: playedWord,\n                    bagIsEmpty: bagIsEmpty,\n                    rackIsEmpty: rackIsEmpty,\n                    name: player.current.name,\n                    roomID: player.current.roomID,\n                });\n\n                // Remove timer when play happens\n                clearInterval(countDownID.current);\n\n                setPlayedWords([]); // Reset played words\n                setTryCount(0); // Reset play chances\n            }\n        }\n    }, [playedWords.current]);\n\n\n    // Play timer implementation\n    useEffect(() => {\n        // Set the default countdown\n        setCountDown(timeToPlay.current);\n\n        // If there's a count down and it's the player's turn\n        if (timeToPlay.current && player.current.turn) {\n            let intervalID = setInterval(() => {\n                // Countdown and auto skip turn\n                if (countDown.current === 0) actualTurnSkip(); // Skip\n                else setCountDown(countDown.current - 1); // Decrement \n            }, 1000);\n\n            setCountDownID(intervalID); // Store intervalID\n            return () => clearInterval(countDownID.current);\n        }\n    }, [player.current.turn]);\n\n\n    // Get actual played word\n    // Strategy is to weigh each played word by the\n    // pieces played from the rack and choose highest\n    const getPlayedWord = (playedWords, playedPieces) => {\n        let playedWord, wordWeight = 0;\n\n        for (const word of playedWords) {\n            let weight = 0;\n            for (const piece of playedPieces) {\n                if (word.includes(piece.piece)) weight += 1\n            }\n\n            if (weight > wordWeight) {\n                playedWord = word;\n                wordWeight = weight;\n            }\n        }\n        return playedWord;\n    }\n\n\n    // Compute total score of played words\n    const computeScore = (playedWords, isBingo) => {\n\n        let totalScore = 0;\n\n        // For each played word\n        for (const word of playedWords) {\n            // Word score and multiiplier\n            let score = 0, mul = 1;\n\n            // For each character...\n            for (const char of word) {\n                let charWeight = 0;\n                let charTileID = char.tileID;\n                let charTileType = char.tileType;\n\n                // Already cemented tiles? Skip special attrs\n                if (usedTiles.current.includes(charTileID)) {\n                    charWeight = char.weight;\n                }\n                else {\n                    // Update score per tile type\n                    if (charTileType === \"doubleLetter\") {\n                        charWeight = char.weight * 2;\n                    }\n                    else if (charTileType === \"doubleWord\" || charTileType === \"startTile\") {\n                        mul *= 2;\n                        charWeight = char.weight;\n                    }\n                    else if (charTileType === \"tripleWord\") {\n                        mul *= 3;\n                        charWeight = char.weight;\n                    }\n                    else if (charTileType === \"tripleLetter\") {\n                        charWeight = char.weight * 3;\n                    }\n                    // Normal tile\n                    else charWeight = char.weight;\n                }\n\n                score += charWeight; // Score based on weight\n            }\n\n            score *= mul; // Update with multiplier\n\n            // Update total score\n            totalScore += score;\n        }\n\n        // If Bingo, add 50 points\n        totalScore = isBingo ? totalScore + 50 : totalScore;\n\n        return totalScore;\n    }\n\n\n    // Validate words from the server\n    const validatePlayedWords = async (playedWordsStr) => {\n        let response = await makeServerRequest({\n            url: '/validate',\n            requestType: 'post',\n            payload: { words: playedWordsStr },\n        });\n\n        return response;\n    }\n\n\n    // Get passed amount from bag\n    const getFromBag = async (amount) => {\n        let response = await makeServerRequest({\n            payload: {},\n            requestType: 'get',\n            url: `/bag/${amount}?roomID=${player.current.roomID}`,\n        });\n        let returnedPieces = response['pieces'];\n        for (const [index, piece] of Object.entries(returnedPieces)) {\n            piece[\"id\"] = `${index}_${piece.id}`;\n        }\n        return returnedPieces\n    }\n\n    // Refill rack\n    const refillRack = async (amount) => {\n        let pieces = await getFromBag(amount);\n        for (const piece of pieces) addToPieces(piece);\n    }\n\n    // After drag ends, get equivalent piece\n    // on Rack. Done in case of removal\n    const dragEndHandler = (pieceData) => {\n        let playedPiece = findPiece(pieceData, currPieces.current);\n        removePieceFromPieces(playedPiece);\n        addToPlayedPieces(playedPiece);\n    }\n\n    const removePieceFromPieces = (playedPiece) => {\n        let remainingPieces = currPieces.current.filter(piece => piece.id !== playedPiece.id);\n        setPieces([...remainingPieces]);\n    }\n\n    const removePieceFromPlayedPieces = (playedPiece) => {\n        let remainingPieces = [...currPlayedPieces.current].filter(piece => piece.id !== playedPiece.id);\n        setPlayedPieces([...remainingPieces]);\n    }\n\n\n    // Turn off modal\n    const swapCancelHandler = () => setStartSwap(false);\n\n    const getTileRow = (tile) => {\n        tile += 1;\n        return Math.ceil(tile / 15);\n    }\n\n    const getTileColumn = (tile) => {\n        tile += 1;\n        return tile % 15;\n    }\n\n    const getPlayDirection = (playedTiles) => {\n\n        // Sort the tiles in ascending order for use\n        playedTiles = playedTiles.sort((a, b) => a - b);\n\n        let playDirection;\n        let firstTile = playedTiles[0];\n        let firstTileRow = getTileRow(firstTile);\n        const numPlayedTiles = playedTiles.length;\n\n        // If all played tiles are on the same row, then horizontal\n        if (playedTiles.every((t) => getTileRow(t) === firstTileRow)) {\n            playDirection = \"horizontal\";\n        }\n\n        // If not, check if they're all on the same column. If yes, \n        // then it's a vertical play. If not, then it's an invalid play\n        else {\n            for (let i = 0; i < numPlayedTiles; i++) {\n                if ((i + 1) < numPlayedTiles) {\n                    let tt = playedTiles[i]; // this tile\n                    let nt = playedTiles[i + 1]; // next tile\n\n                    // Difference between each\n                    // tile must be fifteen for\n                    // the play to be vertical.\n                    if ((nt - tt) % 15 !== 0) {\n                        playDirection = \"both\";\n                        break;\n                    }\n\n                    playDirection = \"vertical\";\n                }\n            }\n        }\n\n        return playDirection;\n    }\n\n    // If swap is confirmed, get pieces of checked boxes\n    // and remove them from rack. Replace them after and\n    // then disable the swap modal for later reswapping \n    const swapConfirmHandler = async (checkedIDs) => {\n        if (checkedIDs.length > 0) {\n            let piecesSwapped = [];\n\n            // Remove associated ids from rack\n            for (const id of checkedIDs) {\n                let pieceToSwap = findPieceByID(id, currPieces.current);\n                removePieceFromPieces(pieceToSwap);\n                piecesSwapped.push(pieceToSwap);\n            }\n\n            // Remove timer when play happens\n            clearInterval(countDownID.current);\n\n            setStartSwap(false); // Turn off modal\n\n            // Refill rack\n            await refillRack(checkedIDs.length);\n\n            // Announce to everybody\n            sio.emit('playEvent', {\n                piecesSwapped,\n                isTurnSwapped: true,\n                name: player.current.name,\n                roomID: player.current.roomID,\n            });\n        }\n    }\n\n    // Get tiles played on a row or column within the\n    // bounds of the first and last tile the player played\n    const getNeigbouringTiles = (tile, playDirection, playedTiles) => {\n        let tiles = [], allTiles = [];\n        let source = playDirection === \"horizontal\" ? getTileRow(tile) : getTileColumn(tile);\n\n        let loopLength = playDirection === \"horizontal\" ? 1 : 15;\n        let startTile = playDirection === \"horizontal\" ? (source - 1) * 15 : source - 1;\n\n        // Loop fifteen tiles, that is\n        // all tiles in row or column\n        for (let i = 0; i < 15; i++) {\n            // Get played tiles\n            if (playedTiles.includes(startTile)) tiles.push(startTile)\n\n            // Push irregardless\n            allTiles.push(startTile)\n            startTile += loopLength;\n        }\n\n        let first = allTiles.indexOf(tiles[0]);\n        let last = allTiles.indexOf(tiles[tiles.length - 1])\n\n        // Return tile range between \n        // played/cemented tiles\n        return allTiles.slice(first, last + 1);\n    }\n\n\n    // Validate that each played piece is linked\n    // (left, right, top, bottom) to another piece\n    const validateNeighbors = (playedTiles, boardIsEmpty, playDirection) => {\n        let valid = true;\n        let linkCount = 0;\n        let lastTile = playedTiles[playedTiles.length - 1];\n\n        let tiles = getNeigbouringTiles(lastTile, playDirection, playedTiles)\n\n        // Ensure no blanks in between played/cemented tiles\n        // AND logic heirarchy is cemented then played\n        for (const tile of tiles) {\n            if (!usedTiles.current.includes(tile) && !playedTiles.includes(tile)) {\n                valid = false;\n                return valid;   \n            }\n        }\n\n        // Ensure played tiles are linked to existing\n        for (const tile of playedTiles) {\n            let linkedTiles = [];\n            let tileUp, tileDown, tileLeft, tileRight;\n\n            tileUp = tile - 15;\n            tileLeft = tile - 1;\n            tileDown = tile + 15;\n            tileRight = tile + 1;\n\n            if (tileUp >= 0) linkedTiles.push(tileUp)\n            if (tileLeft >= 0) linkedTiles.push(tileLeft)\n\n            if (tileDown <= 224) linkedTiles.push(tileDown)\n            if (tileRight <= 224)  linkedTiles.push(tileRight)\n\n            // Check all linked tiles\n            linkedTiles.forEach((tileTC) => {\n                // If game has started, at least one tile must be linked to existing tiles\n                if (!boardIsEmpty && usedTiles.current.includes(tileTC)) linkCount += 1;\n            });\n        }\n\n        // Must be linked to at least one existing tile\n        if (!boardIsEmpty && linkCount < 1) valid = false\n\n        return valid\n    }\n\n\n    // Start the play pipeline. Validate neighbors, played words, etc.\n    const initiatePlayPipeline = (playedTiles, boardIsEmpty) => {\n        let playDirection = getPlayDirection(playedTiles);\n        let neighborsAreValid = validateNeighbors(playedTiles, boardIsEmpty, playDirection);\n        \n        // Must play in just one direction or weird play move\n        if (playDirection === \"both\" || !neighborsAreValid) {\n            setNotifications([{\n                type: \"error\",\n                message: \"Sorry, that's an invalid move\",\n            }]);\n        }\n        // Switch to gameboard to \n        // validate played words\n        else setPlayFlag(true);\n    }\n\n\n    // Play for turn\n    const play = () => {\n        if (gameEnded.current) {\n            setNotifications([{\n                type: \"info\",\n                message: \"The game has ended. No more actions are possible.\",\n            }]);\n            return;\n        }\n\n        // If it's the player's turn and the game has started\n        if (player.current.turn && gameStarted.current) {\n\n            // If nothing was played. Warn player...\n            if (currPlayedPieces.current.length === 0) {\n                setNotifications([{\n                    type: \"warning\",\n                    message: \"You haven't played anything. You can alternatively skip your turn\",\n                }]);\n            }\n\n            // If something was played\n            else {\n                let boardIsEmpty = isBoardEmpty();\n\n                // If the board is empty (Game literally just started)\n                if (boardIsEmpty) {\n\n                    // Ensure star tile is played on, on first play\n                    if (!playedTiles.current.includes(112)) {\n                        setNotifications([{\n                            type: \"error\",\n                            message: \"Invalid start move. You must play on the starred tile\",\n                        }]);\n\n                        return; // Exit\n                    }\n                }\n\n                // Star tile was played on. Continue play\n                // Game has been ongoing. Star tile is already used\n                initiatePlayPipeline(playedTiles.current, boardIsEmpty);\n            }\n        }\n    }\n\n\n    // Swap pieces for turn\n    const swap = () => {\n        if (gameEnded.current) {\n            setNotifications([{\n                type: \"info\",\n                message: \"The game has ended. No more actions are possible.\",\n            }]);\n            return;\n        }\n\n        if (player.current.turn && gameStarted.current) {\n            // Pieces in bag must be more than 7 to swap\n            if (bag.current.length <= 7) {\n                setNotifications([\n                    {\n                        message: `Swapping pieces is no longer possible, as the bag has ${bag.current.length} pieces left. `,\n                        type: \"info\",\n                    }\n                ]);\n            }\n            else {\n                recall();\n                setStartSwap(true);\n            }\n        }\n        else {\n            setNotifications([\n                {\n                    message: `You can not swap pieces until it is your turn to play. Kindly wait your turn`,\n                    overwrite: false,\n                    type: \"warning\",\n                    timeout: 5\n                }\n            ]);\n        }\n\n    }\n\n    // Recall pieces from board\n    const recall = () => {\n\n        if (gameEnded.current) {\n            setNotifications([{\n                type: \"info\",\n                message: \"The game has ended. No more actions are possible.\",\n            }]);\n            return;\n        }\n\n        if (player.current.turn && gameStarted.current) {\n            // Merge back played pieces to current pieces on rack\n            setPieces([...currPieces.current, ...currPlayedPieces.current]);\n\n            // Reset played pieces\n            setPlayedPieces([]);\n\n            // Signal a recall happened to empty board\n            setRecallFlag(true);\n\n            // Tell everybody\n            sio.emit('recallEvent', {\n                roomID: player.current.roomID,\n                name: player.current.name\n            }\n            );\n        }\n        else {\n            setNotifications([\n                ...notifications.current,\n                {\n                    message: `You can not recall pieces until it's your turn to play. Kindly wait your turn`,\n                    overwrite: false,\n                    type: \"warning\",\n                    timeout: 5\n                }\n            ]);\n        }\n    }\n\n    // Board is empty if there are no cemented tiles\n    const isBoardEmpty = () => usedTiles.current.length === 0;\n\n    // Shuffle pieces on Rack\n    const shuffle = () => setPieces([...inPlaceShuffle(currPieces.current)]);\n\n    // Make draw to determine player turns\n    const draw = () => sio.emit(\"drawEvent\", { roomID: player.current.roomID });\n\n    // Implementation of a turn skip\n    const actualTurnSkip = () => {\n        recall(); // Recall pieces, if any\n\n        // Tell everybody\n        sio.emit('playEvent', {\n            isTurnSkipped: true,\n            name: player.current.name,\n            roomID: player.current.roomID,\n        });\n\n        // Remove timer when play happens\n        clearInterval(countDownID.current);\n    }\n\n    // Skip one's turn\n    const skip = () => {\n        if (gameEnded.current) {\n            setNotifications([{\n                type: \"info\",\n                message: \"The game has ended. No more actions are possible.\",\n            }]);\n            return;\n        }\n\n        if (player.current.turn && gameStarted.current) {\n            let shouldSkipTurn = window.confirm(\"Are you sure you want to skip your turn?\");\n            if (shouldSkipTurn) actualTurnSkip();\n        }\n        else {\n            setNotifications([\n                ...notifications.current,\n                {\n                    message: `You can not skip turn until it is your turn to play. Kindly wait your turn`,\n                    overwrite: false,\n                    type: \"warning\",\n                    timeout: 5\n                }\n            ]);\n        }\n    }\n\n\n    // Helper functions\n    const addToPieces = (piece) => setPieces([...currPieces.current, piece])\n    const findPieceByID = (pieceID, source) => source.find(piece => piece.id === pieceID);\n    const findPiece = (pieceData, source) => source.find(piece => piece.id === pieceData.id);\n    const addToPlayedPieces = (playedPiece) => setPlayedPieces([...currPlayedPieces.current, playedPiece]);\n\n\n    // Event listeners\n    const handleDragDrop = (e) => {\n        if (player.current.turn) {\n            // Prevent bubble\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n\n            // Data of piece dragged on it          \n            const pieceData = getDragData(e);\n\n            // Don't allow drags of cemented tiles\n            if (!usedTiles.current.includes(pieceData.tileID)) {\n                // Get piece dragged back from the ones in raack state\n                let piece = findPiece(pieceData, currPlayedPieces.current);\n\n                // Tell other players\n                sio.emit('inPlayEvent', {\n                    roomID: player.current.roomID,\n                    pieceData: { ...pieceData, toRackMove: true }\n                });\n\n                if (pieceData.onBoard) { // If board-to-rack drag\n                    removePieceFromPlayedPieces(piece);\n                    addToPieces(piece);\n                }\n                else setValidDrag(false); // Rack-to-rack drag. Do nothing.\n            }\n        }\n    }\n\n    const handleDragOver = (e) => e.preventDefault();\n    const handleDragEnter = (e) => e.preventDefault();\n    const handleDragLeave = (e) => e.preventDefault();\n\n    // // Effects\n    useEffect(() => thisRack.current.addEventListener(\"drop\", handleDragDrop));\n    useEffect(() => thisRack.current.addEventListener(\"dragover\", handleDragOver));\n    useEffect(() => thisRack.current.addEventListener(\"dragleave\", handleDragLeave));\n    useEffect(() => thisRack.current.addEventListener(\"dragenter\", handleDragEnter));\n\n    const classNames = gameStarted.current ? \"flex justify-between items-end\" : \"flex justify-end items-end\";\n\n    // Render\n    return (\n        <div className=\"block\">\n            <div ref={thisRack} className=\"flex justify-end\">\n                <div style={{ width: \"25rem\" }} className=\"h-16 flex border-4 bg-gray-300 border-gray-500 rounded-md\">\n                    {currPieces.current ? currPieces.current.map((piece, index) => {\n                        if (piece) return <Piece\n                            id={piece.id}\n                            key={`${piece.id}_${index}`}\n                            onBoard={false}\n                            char={piece.piece}\n                            weight={piece.weight}\n                            dragEndHandler={dragEndHandler}\n                        />\n\n                    }) : null}\n                </div>\n            </div>\n            <div className=\"py-2\"></div>\n            <div className={classNames}>\n\n                {/* Show bag only when game has started */}\n                {gameStarted.current ? <Bag bag={bag.current} /> : null}\n\n                <Controls\n                    gameStarted={gameStarted}\n                    shuffle={shuffle}\n                    recall={recall}\n                    skip={skip}\n                    play={play}\n                    draw={draw}\n                    swap={swap}\n                />\n            </div>\n            <div className=\"py-2\"></div>\n            {player.current.turn && timeToPlay.current\n                ?\n                <div title=\"Time left to play\" className={`${countDown.current < 10 ? 'blink' : \"\"} cursor-help flex text-gray-400 justify-end items-center`}>\n                    <Clock size={19} className=\"inline\" />\n                    <span className=\"pl-1\">{secondsToMMSS(countDown.current)}</span>\n                </div>\n                :\n                null}\n\n            <SwapModal\n                show={startSwap.current}\n                pieces={currPieces.current}\n                swapCancelHandler={swapCancelHandler}\n                swapConfirmHandler={swapConfirmHandler}\n            />\n        </div>\n\n    )\n};\n\nexport default Rack;","import React from \"react\";\n\nexport default function GameLogModal({ logs, close, show }) {\n\n    let modal = <>\n        <div onClick={() => close()} className=\"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n            <div className=\"relative w-screen my-6 mx-auto max-w-3xl\">\n                <div className=\"h-96 border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\n                    <div className=\"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t\">\n                        <h3 className=\"text-2xl font-semibold\">\n                            Logs\n                        </h3>\n                        <div className=\"text-md pt-1 text-gray-500\">History of in-game plays</div>\n                    </div>\n                    <div className=\"overflow-auto py-0 justify-center\">\n                        {logs.length > 0 ?\n                            <table className=\"table-auto w-full mb-5\">\n                                <thead>\n                                    <tr className=\"bg-gray-100\">\n                                        <th className=\"border border-gray-300 px-4 py-2 text-black-600\">Time</th>\n                                        <th className=\"border border-gray-300 px-4 py-2 text-black-600\">Event</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {logs.map((log, index) => {\n                                        return <tr key={index}>\n                                            <td className='w-1/5 text-gray-500 capitalize border border-gray-300 px-4 py-2 text-black-600 font-medium'>\n                                                {log.time}\n                                            </td>\n                                            <td className=\"border border-gray-300 px-4 py-2 text-black-600 font-medium\">{log.event}</td>\n                                        </tr>\n                                    })}\n                                </tbody>\n                            </table>\n\n                            : <div className=\"flex pt-28 text-gray-500 justify-center\">Nothing to show :)</div>}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div className=\"opacity-75 fixed inset-0 z-40 bg-black\"></div>\n    </>\n\n    return (show.current ? modal : null);\n}","import React, { useContext, useEffect } from 'react';\nimport { FileText, Share2 } from 'react-feather';\nimport { GameContext } from '../context';\nimport { useStateRef } from '../hooks';\nimport makeServerRequest from '../xhr';\n\nimport GameLogModal from './GameLogModal';\n\nconst GameLog = (props) => {\n    const [_, setShowModal, showModal] = useStateRef(false);\n    const [__, setLogs, logs] = useStateRef([]);\n    const { player } = useContext(GameContext);\n\n    // Close modal\n    const closeModal = () => setShowModal(false);\n\n    // Get logs from the server when div is pressed\n    useEffect(async () => {\n        if (showModal.current) {\n            let response = await makeServerRequest({\n                requestType: \"get\",\n                url: `/logs/${player.current.roomID}`,\n            });\n\n            if (response.status === \"success\") setLogs([...response.logs])\n        }\n    }, [showModal.current]);\n\n\n    return (\n        <>\n            <div className=\"flex justify-between items-center\">\n                <div onClick={() => setShowModal(true)} className=\"cursor-pointer flex justify-end items-end space-x-1 text-gray-500\">\n                    <div className=\"flex-none\">{<FileText size={22} />}</div>\n                    <div className=\"flex-none text-sm\">Game Logs</div>\n                </div>\n                <div className=\"flex justify-end items-end space-x-1\">\n                    <div className=\"font-bold pt-2 text-sm text-gray-500\"><Share2 size={22} className=\"inline pb-1 pr-1\" />{player.current.roomID}\n                    </div>\n                </div>\n            </div>\n            <GameLogModal logs={logs.current} close={closeModal} show={showModal} />\n        </>\n\n    );\n};\n\nexport default GameLog;","import React from 'react';\nimport Connection from './Connection';\nimport ScoreBoard from './ScoreBoard';\nimport Notification from './Notification';\n\nimport Rack from './Rack';\nimport GameLog from './GameLog';\n\nconst GamePanel = (props) => {\n    return (\n        <div className=\"flex flex-col pt-4 pb-10 justify-around w-450\">\n            <div className=\"block\">\n                <Notification />\n            </div>\n            <div className=\"block py-8\">\n                <Connection status=\"off\" />\n            </div>\n            <div className=\"block py-8\">\n                <ScoreBoard />\n            </div>\n            <div className=\"block py-8\">\n                <div className=\"flex justify-end\">\n                    <Rack />\n                </div>\n            </div>\n            <div className=\"block\">\n                <div className=\"pt-1\">\n                    <GameLog />\n                </div>\n            </div>\n        </div>\n    )\n};\n\nexport default GamePanel;","import React from 'react';\nimport { Plus, ChevronsRight, CornerUpRight } from 'react-feather';\n\nconst GameChooser = (props) => {\n\n    return (\n        <div className=\"h-full w-full flex flex-col items-center justify-center\">\n            <div className=\"block flex justify-center text-gray-800 text-bold text-3xl space-x-2\">\n                <div className=\"text-4xl\">\n                    Scrabble\n                </div>\n                <div className=\"bg-yellow-200 px-2 font-normal rounded-md text-black self-center text-sm border\">\n                    v2.4\n                </div>\n            </div>\n            <div className=\"flex my-6 mb-2 space-x-6 block justify-center\">\n                <button title=\"Create a new game session\" onClick={() => props.setGameChoice(\"new\")} className=\"h-12 w-36 bg-green-600 hover:bg-green-700 text-white font-bold px-4 border border-green-700 rounded inline-flex justify-center items-center\">\n                    <Plus strokeWidth={3} size={26} />\n                    <span className=\"pl-1 pr-2 text-md\">Host</span>\n                </button>\n                <button onClick={() => props.setGameChoice(\"join\")} className=\"h-12 w-36 bg-blue-600 hover:bg-blue-700 text-white font-bold px-4 border border-blue-700 rounded inline-flex justify-center items-center\">\n                    <ChevronsRight strokeWidth={3} size={26} />\n                    <span title=\"Join a game session\"  className=\"pl-1 pr-2 text-md\">Join</span>\n                </button>\n                {/* <button onClick={() => props.setGameChoice(\"resume\")} className=\"h-12 w-36 bg-red-600 hover:bg-red-700 text-white font-bold px-4 border border-red-700 rounded inline-flex justify-center items-center\">\n                    <CornerUpRight strokeWidth={3} size={22} />\n                    <span title=\"Resume a game session\"  className=\"pl-1 pr-1 text-md\">Resume</span>\n                </button> */}\n            </div>\n            <div className=\"flex my-4 mb-2 space-x-6 block justify-center\">\n                <div className=\"text-gray-400\">Familiarize yourself with the <a className=\"text-blue-500\" href=\"https://github.com/olumidesan/scrabble\" target=\"_blank\" referrerPolicy=\"no-referrer\">Game Notes</a> before you begin</div>\n            </div>\n        </div>\n    )\n};\n\nexport default GameChooser;","import React from 'react';\n\nconst ResumeGame = (props) => {\n\n    return (\n       <div>Not Implemented</div>\n    )\n};\n\nexport default ResumeGame;","import React, { useEffect, useContext } from 'react';\nimport { Trash2, Users, Share2 } from 'react-feather';\nimport { GameContext, NotificationContext, SocketIOContext } from '../context';\nimport { useStateRef } from '../hooks';\nimport { countUp } from '../utils';\n\n\nconst WaitingRoom = (props) => {\n    const sio = useContext(SocketIOContext);\n    const { setNotifications } = useContext(NotificationContext);\n    const [_, setConnectedPlayers, connectedPlayers] = useStateRef([]);\n    const [_s, setPrepText, prepText] = useStateRef(\"Preparing game room...\");\n    const { player, setGameCreated, setAllowAudio, setPlayers, setTimeToPlay } = useContext(GameContext);\n\n\n    useEffect(() => {\n        // Set self as connected. ??? Network issue\n        setConnectedPlayers([player.current]);\n\n        // Register socket io listeners\n        sio.on(\"joinedRoom\", (data) => {\n\n            // Set up audio chat and timer\n            setTimeToPlay(data.timeToPlay);\n            setAllowAudio(data.enableAudio);\n\n            // Overwrite my list of connected players\n            // with what the server sent, as it's updated\n            setConnectedPlayers(data.connectedPlayers);\n\n            // If it's not my connection event\n            if (data.player.name !== player.current.name) {\n                // Game should start if the required number of players is reached and I'm the host\n                if (connectedPlayers.current.length === props.numPlayers && player.current.isHost) {\n                    sio.emit(\"gameCreateEvent\", { roomID: props.roomID });\n                }\n            }\n        });\n\n        // When game is created, overwrite \n        // players with what host sent\n        // and signal that game has started\n        sio.on(\"gameCreate\", (data) => {\n\n            let welcomeMessage = player.current.isHost\n                ? \"Make a draw using the yellow button on your button rack. You'll\"\n                : \"The host will make a draw, and you'll\";\n\n            setNotifications([\n                {\n                    message: `Welcome, ${player.current.name}! ${welcomeMessage} be notified (just like this) of who gets to play first. Good luck! 🍀`,\n                    overwrite: false,\n                    type: \"success\",\n                }\n            ]);\n\n            setPlayers(data.allPlayers);\n\n            // Dilly-dally for effect\n            setTimeout(() => {\n                setPrepText(\"Fetching game bag...\")\n            }, 1500);\n            \n            setTimeout(() => {\n                setGameCreated(true);\n            }, 3500);\n\n        }, []);\n    }, []);\n\n\n    return (\n        <div className=\"h-full w-full flex flex-col items-center justify-center\">\n            <div className=\"max-w-sm pt-4 w-96 rounded overflow-hidden shadow-2xl\">\n                <div className=\"px-8 flex justify-between items-center w-full py-4\">\n\n                    <div className=\"font-bold text-left text-2xl\">Waiting Room\n                    </div>\n                    <div title=\"Share this ID with players you want to join your game session\" className=\"cursor-help font-bold pt-2 text-sm text-gray-400\"><Share2 size={23} className=\"inline pb-1 pr-1\" />{props.roomID}\n                    </div>\n\n                </div>\n                <div className=\"py-8 px-6 border-t border\">\n                    <Users size={22} className=\"inline\" /> Connected players: {countUp(connectedPlayers.current.length)}/<span className=\"font-bold\">{props.numPlayers}</span>\n                </div>\n                {connectedPlayers.current.length === props.numPlayers\n                    ?\n                    <div className=\"py-4 border-t border\">\n                        <div className=\"text-sm italic text-gray-500\">{prepText.current}</div>\n                    </div>\n                    :\n                    null}\n                <div className=\"py-4 border-t border\">\n                    {connectedPlayers.current.map((p, index) => {\n                        return <div key={index} className=\"text-sm text-gray-500\">{p.name === player.current.name ? `You (${p.name})` : p.name} joined the game room</div>\n                    })\n                    }\n                </div>\n                {player.current.isHost\n                    ?\n                    <div className=\"h-14 border-t border\">\n                        <button onClick={props.handleDestroyGameSession} className=\"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center\">\n                            <Trash2 size={22} />\n                            <span className=\"pl-1 pr-2 text-md\">Delete Session</span>\n                        </button>\n                    </div>\n                    :\n                    null\n                }\n            </div>\n        </div>\n    )\n};\n\nexport default WaitingRoom;","import React, { useContext, useState } from 'react';\nimport { ChevronsRight, X } from 'react-feather';\nimport WaitingRoom from './WaitingRoom';\nimport makeServerRequest from '../xhr';\nimport { GameContext, SocketIOContext } from '../context';\nimport { isAlphanumeric } from '../utils';\n\nconst JoinGame = (props) => {\n\n    const [numPlayers, setNumPlayers] = useState(0);\n    const [gameJoined, setGameJoined] = useState(false);\n    const [sessionID, setSessionID] = useState({ valid: true, message: \"\", roomID: \"\" });\n    const [sessionName, setSessionName] = useState({ valid: true, message: \"\", name: \"\" });\n\n    const sio = useContext(SocketIOContext);\n    const { setPlayer } = useContext(GameContext);\n\n\n    const handleNameChange = (e) => {\n        setSessionName({ ...sessionName, valid: true, name: e.target.value.trim() });\n    }\n\n    const handleRoomIDChange = (e) => {\n        setSessionID({ ...sessionID, valid: true, roomID: e.target.value.trim() });\n    }\n\n    const getGameRoomData = async (gameRoomID) => await makeServerRequest({ requestType: 'get', url: `/room/${gameRoomID}?name=${sessionName.name}`, payload: {} });\n\n    const handleJoinGameSession = async () => {\n\n        // Validate length\n        if (sessionName.name.length < 2 || sessionName.name.length > 10) {\n            setSessionName({ ...sessionName, valid: false, message: \"Name must be between 2 and 10 characters\" });\n            return;\n        }\n\n        // Validate alphanumerism\n        if (!isAlphanumeric(sessionName.name)) {\n            setSessionName({ ...sessionName, valid: false, message: \"Name must be alphanumeric\" });\n            return;\n        }\n\n        // Validate game room length\n        if (sessionID.roomID.length < 11) {\n            setSessionID({ ...sessionID, valid: false, message: \"Session ID must be 11 characters\" });\n            return;\n        }\n\n        const gameRoomData = await getGameRoomData(sessionID.roomID);\n\n        // If no game is created with that room/session ID\n        if (gameRoomData.status === \"error\") {\n            setSessionID({ ...sessionID, valid: false, message: gameRoomData.message });\n        }\n        // If chosen name is already being used\n        else if (gameRoomData.status === \"nameError\") {\n            setSessionName({ ...sessionName, valid: false, message: gameRoomData.message });\n        }\n\n        else {\n            if (gameRoomData.room.joinable) {\n                const currentPlayer = {\n                    score: 0,\n                    turn: false,\n                    isHost: false,\n                    isSpeaking: false,\n                    roomID: sessionID.roomID,\n                    name: sessionName.name.capitalize(),\n                };\n\n                sio.emit(\"join\", { roomID: sessionID.roomID, player: currentPlayer });\n                setNumPlayers(gameRoomData.room.limit);\n                setPlayer(currentPlayer);\n                setGameJoined(true);\n            }\n            else {\n                setSessionID({ valid: false, message: \"Game session has started and cannot be joined\" });\n            }\n        }\n    }\n\n    let classNames = `${sessionName.valid ? \"mb-4\" : \"mb-0\"} w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500`\n\n    return (\n        gameJoined\n            ?\n            <WaitingRoom roomID={sessionID.roomID} numPlayers={numPlayers} />\n            :\n            <div className=\"h-full w-full flex flex-col items-center justify-center\">\n                <div className=\"font-medium text-xl pb-3\">Join a Game Session</div>\n\n                <div className=\"justify-center flex flex-col pt-4 w-96 rounded overflow-hidden shadow-2xl\">\n                    <div className=\"flex self-center pt-6 mx-3 mb-1\">\n                        <div className=\"px-3\">\n                            <label className=\"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-1\">\n                                Your Name\n                            </label>\n                            <input minLength={3} maxLength={10} onChange={handleNameChange} title=\"Your name\" className={classNames} type=\"text\" placeholder=\"E.g. Joey\" />\n                        </div>\n                    </div>\n                    <div className=\"flex self-center wrap mx-3\">\n                        {!sessionName.valid\n                            ?\n                            <div className=\"w-full px-3\">\n                                <div className=\"w-80 md:flex md:items-center\">\n                                    <span className=\"text-sm text-red-600 mb-4\">\n                                        {sessionName.message}\n                                    </span>\n                                </div>\n                            </div>\n                            :\n                            null\n                        }\n                    </div>\n                    <div className=\"flex self-center mx-3 mb-0\">\n                        <div className=\"px-3\">\n                            <label className=\"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                                Session ID\n                            </label>\n                            <input onChange={handleRoomIDChange} maxLength={11} className=\"w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\" type=\"text\" placeholder=\"E.g. 41828-11860\" />\n                        </div>\n                    </div>\n                    <div className=\"flex self-center wrap mx-3 mb-6\">\n                        {!sessionID.valid\n                            ?\n                            <div className=\"w-full px-3\">\n                                <div className=\"w-80  md:flex md:items-center\">\n                                    <span className=\"text-sm text-red-600 pb-2\">\n                                        {sessionID.message}\n                                    </span>\n                                </div>\n                            </div>\n                            :\n                            null\n                        }\n                    </div>\n                    <div className=\"h-14 border-t flex border\">\n                        <div className=\"block w-1/2\">\n                            <button onClick={() => props.setGameChoice(\"cancel\")} className=\"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center\">\n                                <X size={26} />\n                                <span className=\"pl-1 pr-2 text-md\">Cancel</span>\n                            </button>\n                        </div>\n                        <div className=\"block w-1/2\">\n                            <button onClick={handleJoinGameSession} className=\"h-full w-full bg-green-600 hover:bg-green-700 text-white font-bold border border-green-700 inline-flex justify-center items-center\">\n                                <ChevronsRight className=\"pb\" strokeWidth={3} size={26} />\n                                <span className=\"pl-1 pr-2 text-md\">Join</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n    )\n};\n\nexport default JoinGame;","import React, { useContext, useState } from 'react';\nimport { Plus, ChevronDown, X, AlertOctagon } from 'react-feather';\nimport { GameContext, SocketIOContext } from '../context';\nimport { generateRandomID, isAlphanumeric } from '../utils';\nimport WaitingRoom from './WaitingRoom';\n\n\n// Create a random room ID initially\nlet roomID = `${generateRandomID(5)}-${generateRandomID(5)}`;\n\nconst NewGame = (props) => {\n\n    const [numPlayers, setNumPlayers] = useState(2);\n    const [timeToPlay, setTimeToPlay] = useState(null);\n    const [gameCreated, setGameCreated] = useState(false);\n    const [enableAudio, setEnableAudio] = useState(false);\n    const [sessionName, setSessionName] = useState({ valid: true, message: \"\", name: \"\" });\n\n    const sio = useContext(SocketIOContext);\n    const { setPlayer } = useContext(GameContext);\n\n    const handleNameChange = (e) => {\n        setSessionName({ ...sessionName, valid: true, name: e.target.value.trim() });\n    }\n\n    const handleNumPlayersChange = (e) => {\n        setNumPlayers(parseInt(e.target.value))\n    }\n\n    const handleTimeToPlayChange = (e) => {\n        if (e.target.value !== \"Disabled\") setTimeToPlay(parseInt(e.target.value))\n        else setTimeToPlay(null)\n    }\n\n    const handleEnableAudioChange = (e) => {\n        setEnableAudio(e.target.checked)\n    }\n\n    const handleDestroyGameSession = () => {\n        if (window.confirm(\"Are you sure you want to delete this game session?\")) {\n            setNumPlayers(2);\n            setEnableAudio(false);\n            setGameCreated(false);\n            props.setGameChoice(\"cancel\");\n            setSessionName({ message: \"\", valid: true, name: \"\" });\n\n            // Remove the room from server\n            sio.emit(\"leave\", { roomID });\n\n            // If room is killed, regenerate ID\n            roomID = `${generateRandomID(5)}-${generateRandomID(5)}`;\n        }\n    }\n\n    const handleCreateGameSession = () => {\n        // Validate length\n        if (sessionName.name.length < 2 || sessionName.name.length > 10) {\n            setSessionName({ ...sessionName, valid: false, message: \"Name must be between 2 and 10 characters\" });\n            return;\n        }\n\n        // Validate alphanumerism\n        if (!isAlphanumeric(sessionName.name)) {\n            setSessionName({ ...sessionName, valid: false, message: \"Name must be alphanumeric\" });\n            return;\n        }\n\n        let currentPlayer = {\n            roomID,\n            score: 0,\n            turn: false,\n            isHost: true,\n            isSpeaking: false,\n            name: sessionName.name.capitalize(),\n        };\n\n        sio.emit(\"join\", { roomID, enableAudio, timeToPlay, player: currentPlayer, limit: numPlayers });\n        setPlayer(currentPlayer);\n        setGameCreated(true);\n    }\n\n    let classNames = `${sessionName.valid ? \"mb-4\" : \"mb-0\"} w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500`;\n\n    return (\n        gameCreated\n            ?\n            <WaitingRoom\n                roomID={roomID}\n                numPlayers={numPlayers}\n                handleDestroyGameSession={handleDestroyGameSession}\n            />\n            :\n            <div className=\"h-full w-full flex flex-col items-center justify-center\">\n                <div className=\"font-medium text-xl pb-3\">Host a Game Session</div>\n\n                <div className=\"justify-center flex flex-col pt-4 w-96 rounded overflow-hidden shadow-2xl\">\n                    <div className=\"flex self-center pt-6 mx-3 mb-2\">\n                        <div className=\"px-3\">\n                            <label className=\"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                                Your Session ID\n                            </label>\n                            <input title=\"Automatically-generated session ID\" disabled value={roomID} className=\"w-80 cursor-not-allowed appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\" type=\"text\" placeholder=\"E.g. Joey\" />\n                        </div>\n                    </div>\n                    <div className=\"flex self-center mx-3 mb-1\">\n                        <div className=\"px-3\">\n                            <label className=\"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-1\">\n                                Your Name\n                            </label>\n                            <input minLength={3} maxLength={10} onChange={handleNameChange} title=\"Your name\" className={classNames} type=\"text\" placeholder=\"E.g. Phoebe\" />\n                        </div>\n                    </div>\n                    <div className=\"flex self-center wrap mx-3\">\n                        {!sessionName.valid\n                            ?\n                            <div className=\"w-full px-3\">\n                                <div className=\"w-80 md:flex md:items-center\">\n                                    <span className=\"text-sm text-red-600 mb-4\">\n                                        {sessionName.message}\n                                    </span>\n                                </div>\n                            </div>\n                            :\n                            null\n                        }\n                    </div>\n                    <div className=\"flex self-center flex-wrap -mx-3 mt-1 mb-4\">\n                        <div className=\"w-full px-3\">\n                            <label className=\"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                                Number of Players\n                            </label>\n                            <div className=\"relative\">\n                                <select onChange={handleNumPlayersChange} className=\"block cursor-pointer appearance-none w-80 bg-gray-100 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\">\n                                    <option defaultValue value={2}>Two</option>\n                                    <option value={3}>Three</option>\n                                    <option value={4}>Four</option>\n                                </select>\n                                <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                                    <ChevronDown size={20} />\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div className=\"flex self-center flex-wrap -mx-3 mt-1 mb-6\">\n                        <div className=\"w-full px-3\">\n                            <label title=\"Required time to play before turn is automatically skipped\" className=\"cursor-help block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                                Time to Play\n                            </label>\n                            <div className=\"relative\">\n                                <select onChange={handleTimeToPlayChange} className=\"block cursor-pointer appearance-none w-80 bg-gray-100 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\">\n                                    <option defaultValue value={null}>Disabled</option>\n                                    <option value={300}>Five minutes</option>\n                                    <option value={240}>Four minutes</option>\n                                    <option value={180}>Three minutes</option>\n                                    <option value={120}>Two minutes</option>\n                                    <option value={60}>One minute</option>\n                                </select>\n                                <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                                    <ChevronDown size={20} />\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div className=\"flex self-center wrap mx-3 mb-4\">\n                        <div className=\"w-full px-3\">\n                            <div title=\"If checked, push-to-talk audio between players will be allowed. That is, of course, if the player allows it\" className=\"w-80 cursor-help md:flex md:items-center mb-2\">\n                                <label className=\"pb-1 block text-gray-500 font-bold\">\n                                    <input onChange={handleEnableAudioChange} className=\"mr-2 leading-tight h-5 w-5\" type=\"checkbox\" />\n                                </label>\n                                <span className=\"text-sm pb-2\">\n                                    Enable Audio Chat (Push-To-Talk)\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"h-14 border-t flex border\">\n                        <div className=\"block w-1/2\">\n                            <button onClick={() => props.setGameChoice(\"cancel\")} className=\"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center\">\n                                <X size={26} />\n                                <span className=\"pl-1 pr-2 text-md\">Cancel</span>\n                            </button>\n                        </div>\n                        <div className=\"block w-1/2\">\n                            <button onClick={handleCreateGameSession} className=\"h-full w-full bg-green-600 hover:bg-green-700 text-white font-bold border border-green-700 inline-flex justify-center items-center\">\n                                <Plus className=\"pb\" strokeWidth={3} size={26} />\n                                <span className=\"pl-1 pr-2 text-md\">Host</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n    )\n};\n\nexport default NewGame;","import React, { useState, useEffect } from 'react';\nimport GameChooser from './GameChooser';\nimport ResumeGame from './ResumeGame';\nimport JoinGame from './JoinGame';\nimport NewGame from './NewGame';\n\nconst LandingPage = (props) => {\n\n    // State\n    const [newGame, setNewGame] = useState(false);\n    const [joinGame, setJoinGame] = useState(false);\n    const [resumeGame, setResumeGame] = useState(false);\n\n    const setGameChoice = (choice) => {\n        if (choice === \"new\") {\n            setNewGame(true);\n            setJoinGame(false);\n            setResumeGame(false);\n        }\n        else if (choice === \"join\") {\n            setJoinGame(true);\n            setNewGame(false);\n            setResumeGame(false);\n        }\n        else if (choice === \"resume\") {\n            setNewGame(false);\n            setJoinGame(false);\n            setResumeGame(true);\n        }\n        else {\n            setNewGame(false);\n            setJoinGame(false);\n            setResumeGame(false);\n        }\n    }\n\n\n    let page;\n\n    if (newGame) {\n        page = <NewGame setGameChoice={setGameChoice} />\n    }\n    else if (joinGame) {\n        page = <JoinGame setGameChoice={setGameChoice} />\n    }\n    else if (resumeGame) {\n        page = <ResumeGame setGameChoice={setGameChoice} />\n    }\n    else {\n        page = <GameChooser setGameChoice={setGameChoice} />;\n    }\n\n    return page;\n};\n\nexport default LandingPage;","import React, { useContext, useEffect, useState } from \"react\";\nimport { SocketIOContext } from \"../context\";\nimport { GameContext } from \"../context\";\nimport { ThumbsUp } from \"react-feather\";\nimport { useStateRef } from \"../hooks\";\n\nexport default function WinnerModal(props) {\n    const [_, setShow, show] = useStateRef(false);\n    const [endMessage, setEndMessage] = useState(\"\");\n\n    const sio = useContext(SocketIOContext);\n    const { player, setPlayers } = useContext(GameContext);\n\n    useEffect(() => {\n        // When the game ends. Show a modal with the winner\n        sio.on(\"gameEnd\", (data) => {\n            let finalMessage;\n            let winner = { name: \"\", score: 0 };\n\n            // Compare scores to get winner\n            for (const p of data) {\n                if (p.score > winner.score) {\n                    winner.name = p.name;\n                    winner.score = p.score;\n                }\n            }\n\n            // Construct final message\n            if (player.current.name === winner.name) {\n                finalMessage = `Congratulations, ${winner.name}! You are the winner with ${winner.score} points. You've earned the trophy!`;\n            } else {\n                finalMessage = `${winner.name} is the winner with ${winner.score} points. Good game, ${player.current.name}. You still earn a medal 🏅`;\n            }\n\n            // Update medals on score board\n            for (const p of data) {\n                if (p.name === winner.name) {\n                    p.name = `${p.name} 🏆`;\n                }\n                else p.name = `${p.name} 🏅`;\n            }\n\n            setEndMessage(finalMessage);\n            setPlayers(data);\n            setShow(true);\n        });\n    }, []);\n\n\n    let modal = <>\n        <div className=\"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n            <div className=\"relative w-screen my-6 mx-auto max-w-3xl\">\n                <div className=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\n                    <div className=\"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t\">\n                        <h3 className=\"text-2xl font-semibold\">\n                            🏆 The Game Has Ended 🏆\n                        </h3>\n                    </div>\n                    <div className=\"flex-col relative text-lg pt-5 pb-7 flex justify-center flex-wrap\">\n                        <div className=\"pb-6\">{endMessage}</div>\n                        <button onClick={() => { setShow(false) }} className=\"self-center bg-green-600 hover:bg-green-700 text-white inline py-2 px-4 border border-green-700 rounded\">\n                            <ThumbsUp className=\"inline pb-1\" strokeWidth={2} size={24} />\n                            <span className=\"pl-1\">Cool, Thanks</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div className=\"opacity-75 fixed inset-0 z-40 bg-black\"></div>\n    </>\n\n    return (show.current ? modal : null);\n}","import React, { useEffect, useContext } from 'react';\nimport GameBoard from '../components/GameBoard';\nimport GamePanel from '../components/GamePanel';\nimport { useStateRef } from '../hooks';\nimport { ValidDragContext, GameContext, SocketIOContext, NotificationContext } from '../context';\nimport LandingPage from '../components/LandingPage';\nimport WinnerModal from '../components/WinnerModal';\n\n\n// [TODO] Definitely need to revamp this\n\n// Game has two played pieces store\n// The rack's own for its own use,\n// and the Game's own for use with\n// the board for clearing or comm.\nconst Game = () => {\n\n    const [e________, setGameEnded, gameEnded] = useStateRef(false);\n    const [g_______, setGameCreated, gameCreated] = useStateRef(false);\n    const [________, setGameStarted, gameStarted] = useStateRef(false);\n    const [_sp, setPlayFlag, playFlag] = useStateRef(false);\n    const [_, setRecallFlag, recallFlag] = useStateRef(false);\n    const [_a, setAllowAudio, allowAudio] = useStateRef(false);\n    const [_s, setTimeToPlay, timeToPlay] = useStateRef(null);\n    const [__, setPlayedTiles, playedTiles] = useStateRef([]);\n    const [__pw, setPlayedWords, playedWords] = useStateRef([]);\n    const [__f, setUsedTiles, usedTiles] = useStateRef([]);\n    const [___, setValidDrag, validDrag] = useStateRef(true);\n    const [____, setPlayers, players] = useStateRef([]);\n    const [_____, setPlayer, player] = useStateRef({});\n    const [______, setBag, bag] = useStateRef({ length: 0, pieces: {} });\n    const [_______, setNotifications, notifications] = useStateRef([]);\n\n    const sio = useContext(SocketIOContext);\n    const gameContext = {\n        bag, setBag,\n        player, setPlayer,\n        players, setPlayers,\n        playFlag, setPlayFlag,\n        gameEnded, setGameEnded,\n        usedTiles, setUsedTiles,\n        allowAudio, setAllowAudio,\n        recallFlag, setRecallFlag,\n        timeToPlay, setTimeToPlay,\n        gameStarted, setGameStarted,\n        gameCreated, setGameCreated,\n        playedTiles, setPlayedTiles,\n        playedWords, setPlayedWords,\n    }\n\n\n    // Register listeners\n    useEffect(() => {\n        sio.on(\"drawDone\", (data) => {\n            // Save bag\n            setBag(data.bag);\n            setGameStarted(true);\n\n            const updatedPlayers = [];\n            const playerToPlay = data.players[0];\n            let playerToPlayMessage, playOrderMessage = \"\";\n\n            // Set turn for each player\n            for (const p of players.current) {\n                if (p.name === playerToPlay) {\n                    p['turn'] = true;\n                }\n                updatedPlayers.push(p);\n            }\n\n            // Update player's players\n            setPlayers(updatedPlayers);\n\n            // Say who gets to play first\n            if (playerToPlay === player.current.name) {\n                playerToPlayMessage = `You get to play first`;\n                setPlayer({ ...player.current, turn: true })\n            } else {\n                playerToPlayMessage = `${playerToPlay} gets to play first`;\n            }\n\n            // Set turn order of players\n            data.players.forEach((p, index) => {\n                if (p === player.current.name) {\n                    p = `${p} (You)`;\n                }\n                if (index + 1 === data.players.length) {\n                    playOrderMessage += p;\n                } else {\n                    playOrderMessage += `${p}, then `;\n                }\n            });\n\n            // Notify everyone\n            setNotifications([\n                {\n                    message: `${playerToPlayMessage}. Also note that the turn order is, ${playOrderMessage}`,\n                    overwrite: false,\n                    type: \"info\",\n                    timeout: 5\n                }\n            ]);\n        });\n\n\n        sio.on(\"validPlay\", (data) => {\n\n            // Update the players' turns\n            updatedPlayerTurns(data.playerToPlay.name)\n\n            if (data.name === player.current.name) {\n                setPlayer({ ...player.current, score: data.updatedScore });\n            }\n\n            // Update state of all players\n            setPlayers(getUpdatedPlayers(data));\n\n            // Announce type of play\n            announcePlayResult(data)\n\n            // Cement used tiles\n            setUsedTiles([...new Set([...usedTiles.current, ...playedTiles.current])]);\n\n            // Update bag\n            setBag(data.bag);\n\n            // Give a bag length heads up\n            announceBagState(data.bag.length)\n\n            // Reset played tiles\n            setPlayedTiles([]);\n\n            // Game ends after six consecutive turn skips or empty bag and player's empty rack\n            if (data.turnSkips === 6 || (data.bagIsEmpty && data.rackIsEmpty)) setGameEnded(true);\n        });\n    }, []);\n\n\n    // Update player turns\n    const updatedPlayerTurns = (playerToPlay) => {\n        if (playerToPlay === player.current.name)\n            setPlayer({ ...player.current, turn: true })\n        else setPlayer({ ...player.current, turn: false });\n    }\n\n    // Update every players' turn on table and [poosibly] scores\n    const getUpdatedPlayers = (data) => {\n        let updatedPlayers = [];\n        for (const p of players.current) {\n            if (p.name === data.playerToPlay.name) p.turn = true;\n            else p.turn = false;\n\n            // Update all scores on scoreboard\n            if (p.name === data.name) p.score = data.updatedScore;\n            updatedPlayers.push(p);\n        }\n\n        return updatedPlayers;\n    }\n\n    // Give a heads up if bag is almost empty\n    const announceBagState = (bagLength) => {\n        if (bagLength <= 7) {\n            let emptyMessage;\n\n            if (bagLength === 0) {\n                emptyMessage = \"No pieces are left in the bag\";\n            } else if (bagLength === 1) {\n                emptyMessage = \"Only one piece is left in the bag\";\n            } else {\n                emptyMessage = `Only ${bagLength} pieces are left in the bag.`;\n            }\n\n            setTimeout(() => {\n                setNotifications([\n                    {\n                        message: `Heads up! ${emptyMessage}`,\n                        type: \"warning\",\n                    }\n                ]);\n            }, 7000);\n        }\n    }\n\n\n    // Announce type of play\n    const announcePlayResult = (data) => {\n        let message;\n        let turnPlayer = `It's ${data.playerToPlay.name === player.current.name ? \"your\" : `${data.playerToPlay.name}'s`}`;\n\n        // If turn is skipped, announce\n        if (data.isTurnSkipped) {\n            message = data.name === player.current.name\n                ? \"You skipped your turn.\"\n                : `Turn skipped by ${data.name}.`;\n            message += ` ${turnPlayer} turn to play`;\n        }\n\n        // If turn is swapped, announce\n        else if (data.isTurnSwapped) {\n            message = data.name === player.current.name\n                ? \"You swapped pieces for your turn.\"\n                : `${data.name} swapped pieces for turn.`;\n            message += ` ${turnPlayer} turn to play`;\n        }\n\n        // If a word was played, announce\n        else {\n            message = data.name === player.current.name\n                ? `You played '${data.word}' worth ${data.score} points.`\n                : `${data.name} played '${data.word}' worth ${data.score} points.`;\n            message += ` ${turnPlayer} turn to play`;\n        }\n\n        setNotifications([{ type: \"info\", message }]);\n    }\n\n\n    const gameSpace =\n        <div className=\"flex space-x-10\">\n            <GameBoard />\n            <div className=\"px-10\"></div>\n            <GamePanel />\n        </div>\n\n    return (\n        <div className=\"container mx-auto p-10 flex h-screen justify-center\">\n            <NotificationContext.Provider value={{ notifications, setNotifications }}>\n                <GameContext.Provider value={gameContext}>\n                    <ValidDragContext.Provider value={{ validDrag, setValidDrag }}>\n                        {gameCreated.current ? gameSpace : <LandingPage />}\n                        <WinnerModal />\n                    </ValidDragContext.Provider>\n                </GameContext.Provider>\n            </NotificationContext.Provider>\n        </div>\n    )\n};\n\nexport default Game;","import './App.css';\nimport Game from './containers/Game';\nimport { SocketIOContext } from './context';\n\nimport { socket } from './context';\n\nfunction App() {\n  return (\n    <SocketIOContext.Provider value={socket}>\n      <div className=\"App\">\n        <Game />\n      </div>\n    </SocketIOContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}